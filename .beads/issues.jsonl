{"id":"tv-011s","title":"Merge: tv-ch8","description":"branch: polecat/capable/tv-ch8@mku8k1hk\ntarget: main\nsource_issue: tv-ch8\nrig: tribal_village\nworker: capable\nagent_bead: tv-tribal_village-polecat-capable\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"in_progress","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T13:21:15.510844656-08:00","created_by":"tribal_village/polecats/capable","updated_at":"2026-01-25T13:45:32.101790458-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-02f7","title":"Remove or enable dead temple hybrid code","description":"attached_molecule: tv-wisp-wisp-mylm\nattached_at: 2026-01-26T00:54:45Z\ndispatched_by: mayor\n\nScriptedTempleAssignEnabled = false means hybrid assignment never executes. processTempleHybridRequests and pendingHybridRoles are dead. Either remove the dead code or enable and test the feature. See codebase_audit.md section 3.1.1. Files: src/scripted/ai_defaults.nim:401","status":"closed","priority":2,"issue_type":"task","assignee":"tribal_village/polecats/rictus","owner":"richard@relh.net","created_at":"2026-01-25T10:20:21.594871715-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T16:56:07.129123058-08:00","closed_at":"2026-01-25T16:56:07.129124761-08:00","dependencies":[{"issue_id":"tv-02f7","depends_on_id":"tv-wisp-wisp-mylm","type":"blocks","created_at":"2026-01-25T16:54:45.496861405-08:00","created_by":"mayor"}]}
{"id":"tv-02pb","title":"Pre-allocate pathfinding scratch space to reduce GC pressure","description":"attached_molecule: tv-wisp-wisp-qesx\nattached_at: 2026-01-25T22:38:12Z\ndispatched_by: mayor\n\nEvery findPath() call allocates 6 data structures (HashSet, Tables, seqs). Pre-allocate PathfindingCache on Controller with fixed arrays instead. Expected 20-40% reduction in AI tick time. See performance_scaling_1000_agents.md section 1. Files: src/scripted/ai_core.nim:574-654","status":"closed","priority":1,"issue_type":"task","assignee":"tribal_village/polecats/nux","owner":"richard@relh.net","created_at":"2026-01-25T10:20:06.152574812-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:17:30.832745159-08:00","closed_at":"2026-01-25T22:17:30.832745159-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-02pb","depends_on_id":"tv-wisp-wisp-jdo","type":"blocks","created_at":"2026-01-25T14:38:12.086758024-08:00","created_by":"mayor"},{"issue_id":"tv-02pb","depends_on_id":"tv-wisp-wisp-qesx","type":"blocks","created_at":"2026-01-25T19:13:17.158973909-08:00","created_by":"mayor"}]}
{"id":"tv-19cx","title":"Replace placeholder bear/wolf sprites with dedicated assets","description":"Renderer still uses cow art as placeholder for bears/wolves. Create and swap to dedicated bear.png and wolf.png assets. See wildlife_predators.md 'Observation and Rendering' section. Files: src/renderer.nim, data/assets/","status":"open","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T10:20:50.897518352-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:20:50.897518352-08:00"}
{"id":"tv-1ep","title":"Implement unused ramp terrain tiles","description":"attached_molecule: tv-wisp-q13\nattached_at: 2026-01-25T07:17:49Z\ndispatched_by: mayor\n\nThe terrain types RampUpN/S/W/E and RampDownN/S/W/E exist in the terrain enum but are never placed. Currently roads serve as the ramp mechanic.\n\nConsider either:\n1. Remove the unused ramp types from the enum (cleanup)\n2. Actually implement ramp tile placement for visual variety\n\nReference: refinery/rig/docs/terrain_biomes_audit.md section 2 - Missing Constants/Features","notes":"Implemented: Updated applyCliffRamps to use directional RampUp*/RampDown* terrain types instead of Road at elevation boundaries. Added isRampTerrain helper, updated canTraverseElevation, movement acceleration, AI building logic, and terrain interaction to support ramps.","status":"closed","priority":3,"issue_type":"task","assignee":"tribal_village/polecats/ace","owner":"richard@relh.net","created_at":"2026-01-24T23:17:01.083515929-08:00","created_by":"mayor","updated_at":"2026-01-24T23:28:13.439618771-08:00","closed_at":"2026-01-24T23:28:13.439618771-08:00","close_reason":"Completed by ace, MR: tv-lbd"}
{"id":"tv-2bk","title":"Implement EmergencyHeal behavior for agents with low HP","description":"attached_molecule: tv-wisp-wisp-7ym\nattached_at: 2026-01-25T22:38:48Z\n\nAdd an optional behavior to eat bread when HP \u003c 50%. Currently this is handled globally but should be an option in the OptionDef framework. See docs/codebase_audit.md section 6.2 for suggested implementation.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T09:46:12.639643486-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:22.266253558-08:00","dependencies":[{"issue_id":"tv-2bk","depends_on_id":"tv-wisp-wisp-7ym","type":"blocks","created_at":"2026-01-25T14:38:48.089189668-08:00","created_by":"mayor"}]}
{"id":"tv-3bt","title":"Add cow milking behavior for non-lethal food","description":"Use interact (3'u8) instead of attack (2'u8) when cow is healthy. Only kill when cow HP is low or food is critical. See role_audit_report.md 'Cow Milking Behavior' section. File: src/scripted/gatherer.nim:308","status":"closed","priority":3,"issue_type":"feature","assignee":"tribal_village/furiosa","owner":"richard@relh.net","created_at":"2026-01-25T10:19:07.537358783-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:33:37.156952638-08:00","closed_at":"2026-01-25T22:33:37.156952638-08:00","close_reason":"Closed"}
{"id":"tv-3ns","title":"Add Builder flee behavior when enemies nearby","description":"attached_molecule: tv-wisp-wisp-v9eo\nattached_at: 2026-01-25T21:45:20Z\ndispatched_by: mayor\n\nAdd canStartBuilderFlee similar to gatherer recommendation. Also add partial construction abandonment when enemy in range. Insert at high priority. See role_audit_report.md 'Threat-Aware Building' section.","notes":"Feature tv-3ns was already implemented and merged to main (commit 40b85ad). BuilderFlee behavior is at priority 1 in BuilderOptions. Tests verified passing.","status":"closed","priority":1,"issue_type":"feature","assignee":"tribal_village/polecats/slit","owner":"richard@relh.net","created_at":"2026-01-25T10:18:38.712876303-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:21:39.195255025-08:00","closed_at":"2026-01-25T22:18:51.995374919-08:00","close_reason":"Already implemented and merged (commit 40b85ad)","dependencies":[{"issue_id":"tv-3ns","depends_on_id":"tv-wisp-wisp-735","type":"blocks","created_at":"2026-01-25T13:45:20.403555731-08:00","created_by":"mayor"},{"issue_id":"tv-3ns","depends_on_id":"tv-wisp-wisp-v9eo","type":"blocks","created_at":"2026-01-25T19:11:54.504314097-08:00","created_by":"mayor"}]}
{"id":"tv-433","title":"Add tactical retreat behavior","description":"attached_molecule: tv-wisp-wisp-f3bu\nattached_at: 2026-01-25T22:57:16Z\n\nImprove retreat to consider escape routes, not just destination. Lead enemies away from base if possible. Retreat toward allies, not just buildings. See role_audit_report.md 'Tactical Retreat' section. File: src/scripted/fighter.nim","status":"closed","priority":2,"issue_type":"feature","assignee":"tribal_village/polecats/dag","owner":"richard@relh.net","created_at":"2026-01-25T10:18:54.141686973-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T15:26:27.336679488-08:00","closed_at":"2026-01-25T15:26:27.336679488-08:00","close_reason":"Splitting into smaller sub-tasks - polecats kept failing on full task","dependencies":[{"issue_id":"tv-433","depends_on_id":"tv-wisp-wisp-l8h","type":"blocks","created_at":"2026-01-25T14:57:16.314096685-08:00","created_by":"mayor"},{"issue_id":"tv-433","depends_on_id":"tv-wisp-wisp-hl2y","type":"blocks","created_at":"2026-01-25T15:04:57.721941705-08:00","created_by":"mayor"},{"issue_id":"tv-433","depends_on_id":"tv-wisp-wisp-f3bu","type":"blocks","created_at":"2026-01-25T15:09:36.922394288-08:00","created_by":"mayor"}]}
{"id":"tv-4837","title":"Document the include pattern for scripted modules","description":"Files use 'include' rather than 'import' creating implicit dependencies. Document this pattern or consider refactoring to explicit imports. See codebase_audit.md section 7.4 and ai_system.md 'Modularization plan'.","status":"open","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T10:20:38.11823955-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:20:38.11823955-08:00"}
{"id":"tv-5evk","title":"Extract shared behaviors (SmeltGold, CraftBread, StoreValuables)","description":"SmeltGold, CraftBread, StoreValuables appear in multiple roles (Gatherer, Builder, Fighter). Consider extracting to shared behaviors in ai_core.nim or options.nim. See codebase_audit.md section 7.6.","status":"open","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T10:20:35.889592766-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:20:35.889592766-08:00"}
{"id":"tv-6mlv","title":"Add inter-role coordination system","description":"No communication between roles. Fighter can't request defensive structures from Builder. Gatherer can't call for protection from Fighter. Add coordination/request system. See role_audit_report.md 'Cross-Role Analysis'. Files: src/scripted/ai_core.nim","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:21:06.078013898-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:21:06.078013898-08:00"}
{"id":"tv-8b8","title":"Add BuildingRepair behavior for damaged structures","description":"attached_molecule: tv-wisp-wisp-mt9u\nattached_at: 2026-01-25T22:56:40Z\n\nImplement a Builder behavior to repair damaged buildings. This would help maintain defensive structures during combat. Pattern should follow the OptionDef framework in src/scripted/builder.nim.","status":"closed","priority":2,"issue_type":"task","assignee":"tribal_village/polecats/cheedo","owner":"richard@relh.net","created_at":"2026-01-25T09:46:14.44208239-08:00","created_by":"mayor","updated_at":"2026-01-25T15:26:28.548250618-08:00","closed_at":"2026-01-25T15:26:28.548250618-08:00","close_reason":"Splitting into smaller sub-tasks - polecats kept failing on full task","dependencies":[{"issue_id":"tv-8b8","depends_on_id":"tv-wisp-wisp-g5f","type":"blocks","created_at":"2026-01-25T14:56:39.960940998-08:00","created_by":"mayor"},{"issue_id":"tv-8b8","depends_on_id":"tv-wisp-wisp-wxnw","type":"blocks","created_at":"2026-01-25T15:04:22.0739725-08:00","created_by":"mayor"},{"issue_id":"tv-8b8","depends_on_id":"tv-wisp-wisp-mt9u","type":"blocks","created_at":"2026-01-25T15:09:55.017585634-08:00","created_by":"mayor"}]}
{"id":"tv-8ro","title":"Add anti-siege priority for fighters","description":"attached_molecule: tv-wisp-wisp-pysf\nattached_at: 2026-01-26T00:06:47Z\ndispatched_by: mayor\n\nAdd option to prioritize attacking enemy siege units, especially if they're attacking friendly structures. See role_audit_report.md 'Anti-Siege Priority' section. File: src/scripted/fighter.nim","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:18:55.382378676-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:26:22.01630599-08:00","dependencies":[{"issue_id":"tv-8ro","depends_on_id":"tv-wisp-wisp-pysf","type":"blocks","created_at":"2026-01-25T16:06:21.522910008-08:00","created_by":"mayor"}]}
{"id":"tv-96g","title":"Add true siege conversion for combat units","description":"attached_molecule: tv-wisp-wisp-m1vl\nattached_at: 2026-01-25T22:37:36Z\ndispatched_by: mayor\n\nAllow combat units (UnitManAtArms, UnitKnight) to interact with SiegeWorkshop to become siege. Add FighterBecomeSiege option that triggers when fighter sees enemy structures and siege workshop exists. See role_audit_report.md 'True Siege Conversion' section. File: src/scripted/fighter.nim","notes":"Verified implementation: FighterBecomeSiege option exists in fighter.nim (lines 555-591), allowing ManAtArms and Knight to convert to battering rams at SiegeWorkshop when enemy structures visible. Test exists in ai_harness.nim (line 648). All tests pass. Feature already on main.","status":"open","priority":1,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:18:40.450448273-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:25:51.484066841-08:00","dependencies":[{"issue_id":"tv-96g","depends_on_id":"tv-wisp-wisp-lw5","type":"blocks","created_at":"2026-01-25T14:37:36.578915283-08:00","created_by":"mayor"},{"issue_id":"tv-96g","depends_on_id":"tv-wisp-wisp-m1vl","type":"blocks","created_at":"2026-01-25T19:11:23.654504475-08:00","created_by":"mayor"}]}
{"id":"tv-9ixk","title":"Add biome-specific resource gathering bonuses","description":"Forest: +20% wood. Plains: +20% food. Caves: +20% stone. Snow: +20% gold. Desert: +10% all near water. See terrain_biomes_audit.md section 3.3. Files: src/environment.nim, src/step.nim","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:19:52.720705875-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:19:52.720705875-08:00"}
{"id":"tv-af7q","title":"Consolidate duplicated market trading behaviors","description":"Market trade logic duplicated in: canStartGathererMarket (gatherer.nim), canStartBuilderMarketTrade (builder.nim), canStartMarketManipulator (options.nim). Consolidate into single shared market behavior. See codebase_audit.md section 4.3.","status":"open","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T10:20:22.402762226-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:20:22.402762226-08:00"}
{"id":"tv-agd","title":"Create comprehensive tribal_village backlog (~50 beads)","description":"attached_molecule: tv-wisp-wisp-9yt\nattached_at: 2026-01-25T18:17:45Z\ndispatched_by: mayor\n\nRead all docs in docs/ folder and create ~50 beads covering all identified work for tribal_village.\n\n## Source Documents to Review\n- docs/codebase_audit.md - Dead code, duplicated logic, cleanup recommendations\n- docs/role_audit_report.md - Gatherer/Builder/Fighter gaps and enhancements\n- docs/temple_hybridization.md - Temple improvements\n- docs/perf-improvements.md - Performance opportunities\n- docs/siege_fortifications_plan.md - Siege mechanics\n- docs/terrain_biomes.md - Terrain work\n- docs/combat.md - Combat improvements\n- docs/ai_system.md - AI enhancements\n- docs/wildlife_predators.md - Wildlife mechanics\n- docs/economy_respawn.md - Economy balance\n\n## Categories to Cover\n1. **New Behaviors** - From role_audit (flee, kiting, siege conversion, etc.)\n2. **Cleanup Tasks** - Dead code removal, unused constants\n3. **Performance** - Profiling opportunities, optimization targets\n4. **Features** - Temple enhancements, terrain, combat\n5. **Tests** - Missing test coverage\n6. **Documentation** - Gaps in docs\n\n## Output\nCreate beads with:\n- Clear titles describing the work\n- Descriptions with file references (path:line when possible)\n- Appropriate priority (P1 for bugs/critical, P2 for features, P3 for nice-to-have)\n- Type: task, bug, or feature\n\nDO NOT start implementing - just create the beads as a backlog.","status":"closed","priority":1,"issue_type":"task","assignee":"tribal_village/polecats/capable","owner":"richard@relh.net","created_at":"2026-01-25T10:17:12.736477501-08:00","created_by":"mayor","updated_at":"2026-01-25T14:43:11.290828521-08:00","closed_at":"2026-01-25T14:43:11.290828521-08:00","close_reason":"Work completed, forcing close despite wisp dependencies","dependencies":[{"issue_id":"tv-agd","depends_on_id":"tv-wisp-bhv","type":"blocks","created_at":"2026-01-25T10:17:45.225061837-08:00","created_by":"mayor"},{"issue_id":"tv-agd","depends_on_id":"tv-wisp-wisp-8rd","type":"blocks","created_at":"2026-01-25T14:31:40.779826347-08:00","created_by":"mayor"},{"issue_id":"tv-agd","depends_on_id":"tv-wisp-wisp-9yt","type":"blocks","created_at":"2026-01-25T14:35:55.304899-08:00","created_by":"mayor"}]}
{"id":"tv-aqx","title":"Add terrain movement speed modifiers","description":"attached_molecule: tv-wisp-fksq\nattached_at: 2026-01-25T07:17:28Z\ndispatched_by: mayor\n\nPer the terrain_biomes_audit.md, all walkable terrain currently has equal movement cost. Add terrain-based movement speed modifiers:\n\n- Sand/Dune: 0.8x speed (slower in desert)\n- Snow: 0.7x speed (slower in cold)\n- Road: 1.2x speed (faster on roads)\n- Swamp/Water edge: 0.6x speed\n\nThis would add gameplay variety and strategic depth to terrain choices.\n\nReference: refinery/rig/docs/terrain_biomes_audit.md section 3.1","notes":"Implemented terrain movement speed modifiers: Snow (0.8x), Sand (0.9x), Dune (0.85x). Movement debt system skips moves when debt \u003e= 1.0. Boats exempt. Added 6 tests.","status":"closed","priority":2,"issue_type":"task","assignee":"tribal_village/polecats/dementus","owner":"richard@relh.net","created_at":"2026-01-24T23:17:00.419439122-08:00","created_by":"mayor","updated_at":"2026-01-25T14:43:02.650791762-08:00","closed_at":"2026-01-25T14:43:02.650791762-08:00","close_reason":"Work completed, PR merged or submitted"}
{"id":"tv-b3n","title":"Add group combat tactics for fighters","description":"attached_molecule: tv-wisp-wisp-86en\nattached_at: 2026-01-25T22:56:58Z\n\nCount nearby allies before engaging, wait for allies to catch up, focus fire on same target as allies. See role_audit_report.md 'Group Combat Tactics' section. File: src/scripted/fighter.nim","status":"closed","priority":2,"issue_type":"feature","assignee":"tribal_village/polecats/toast","owner":"richard@relh.net","created_at":"2026-01-25T10:18:52.657504049-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T15:26:26.367895183-08:00","closed_at":"2026-01-25T15:26:26.367895183-08:00","close_reason":"Splitting into smaller sub-tasks - polecats kept failing on full task","dependencies":[{"issue_id":"tv-b3n","depends_on_id":"tv-wisp-wisp-d0l","type":"blocks","created_at":"2026-01-25T14:56:57.782483724-08:00","created_by":"mayor"},{"issue_id":"tv-b3n","depends_on_id":"tv-wisp-wisp-p4e1","type":"blocks","created_at":"2026-01-25T15:04:39.818736247-08:00","created_by":"mayor"},{"issue_id":"tv-b3n","depends_on_id":"tv-wisp-wisp-86en","type":"blocks","created_at":"2026-01-25T15:09:18.989883482-08:00","created_by":"mayor"}]}
{"id":"tv-bbok","title":"Add terrain movement speed modifiers","description":"attached_molecule: tv-wisp-wisp-19n1\nattached_at: 2026-01-26T01:32:20Z\ndispatched_by: mayor\n\nAdd TerrainSpeedModifiers: Snow 0.8 (20% slower), Sand 0.9 (10% slower), Road 1.2 (20% faster), Dune 0.85 (15% slower). Makes terrain choices strategically meaningful. See terrain_biomes_audit.md section 3.1. Files: src/environment.nim, src/types.nim","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:19:50.915300272-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:26:20.126251981-08:00","dependencies":[{"issue_id":"tv-bbok","depends_on_id":"tv-wisp-wisp-19n1","type":"blocks","created_at":"2026-01-25T17:32:04.464656602-08:00","created_by":"mayor"}]}
{"id":"tv-c035","title":"Add spatial index for O(1) nearest-thing queries","description":"attached_molecule: tv-wisp-wisp-45i\nattached_at: 2026-01-25T21:44:45Z\ndispatched_by: mayor\n\nfindNearestThing() performs O(n) scans. Partition world into cells, index things by cell. Expected 30-50% reduction in resource gathering time. See performance_scaling_1000_agents.md section 2. Files: src/scripted/ai_core.nim:184-191, src/environment.nim","notes":"Implemented spatial index with 16x16 cell partitioning. Replaced O(n) linear scans in findNearestThing() and findNearestFriendlyThing() with O(cells) cell-based lookups. Index maintained on add/remove and rebuilt after each step.","status":"closed","priority":1,"issue_type":"task","assignee":"tribal_village/polecats/dementus","owner":"richard@relh.net","created_at":"2026-01-25T10:20:06.987797402-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T14:43:11.285032211-08:00","closed_at":"2026-01-25T14:43:11.285032211-08:00","close_reason":"Work completed, forcing close despite wisp dependencies","dependencies":[{"issue_id":"tv-c035","depends_on_id":"tv-wisp-wisp-45i","type":"blocks","created_at":"2026-01-25T13:44:45.63817839-08:00","created_by":"mayor"}]}
{"id":"tv-cbg","title":"Add structure repair behavior for Builder","description":"attached_molecule: tv-wisp-wisp-v2zi\nattached_at: 2026-01-25T22:37:54Z\ndispatched_by: mayor\n\nAdd canStartBuilderRepair that finds damaged friendly structures and repairs them. Insert before BuilderWallRing (priority 7). See role_audit_report.md 'Structure Repair Option' section. File: src/scripted/builder.nim","status":"open","priority":1,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:18:41.111566569-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:25:51.239066372-08:00","dependencies":[{"issue_id":"tv-cbg","depends_on_id":"tv-wisp-wisp-c1i","type":"blocks","created_at":"2026-01-25T14:37:54.117869169-08:00","created_by":"mayor"},{"issue_id":"tv-cbg","depends_on_id":"tv-wisp-wisp-v2zi","type":"blocks","created_at":"2026-01-25T19:13:52.190757689-08:00","created_by":"mayor"}]}
{"id":"tv-ch8","title":"Add class-specific combat overlay colors","description":"attached_molecule: tv-wisp-sdu9\nattached_at: 2026-01-25T17:45:39Z\ndispatched_by: mayor\n\nPer combat.md future improvements section, add class-specific overlays with different tint colors per counter type:\n\n- Archer bonus hits: different color than infantry\n- Cavalry bonus hits: different color  \n- Siege vs buildings: stronger visual feedback\n\nThis would make the counter system more readable during combat.\n\nReference: refinery/rig/docs/combat.md - Future Improvements","notes":"Implemented class-specific bonus tint codes: ActionTintBonusArcher (13), ActionTintBonusInfantry (14), ActionTintBonusCavalry (15), ActionTintBonusSiege (16). Increased siege tint intensity to 1.40 for stronger visual feedback. Updated docs.","status":"closed","priority":3,"issue_type":"task","assignee":"tribal_village/polecats/capable","owner":"richard@relh.net","created_at":"2026-01-24T23:17:02.530257149-08:00","created_by":"mayor","updated_at":"2026-01-25T14:43:02.65744898-08:00","closed_at":"2026-01-25T14:43:02.65744898-08:00","close_reason":"Work completed, PR merged or submitted"}
{"id":"tv-epff","title":"Merge: tv-jhet","description":"branch: polecat/rictus/tv-jhet@mku8hcue\ntarget: main\nsource_issue: tv-jhet\nrig: tribal_village\nworker: rictus\nagent_bead: tv-tribal_village-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T13:14:26.874455782-08:00","created_by":"tribal_village/polecats/rictus","updated_at":"2026-01-25T13:15:31.840595732-08:00","closed_at":"2026-01-25T13:15:31.840595732-08:00","close_reason":"Closed","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-fwrl","title":"Implement Mangonel extended AoE attack shape","description":"attached_molecule: tv-wisp-wisp-r2dz\nattached_at: 2026-01-26T01:31:56Z\ndispatched_by: mayor\n\nAdd 'large spear' attack: forward line 4-5 tiles with 1-tile side prongs. Clump breaker, moderate vs buildings. See siege_fortifications_plan.md section 1.2. Files: src/combat.nim, src/step.nim","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:19:39.238557327-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:26:20.385710461-08:00","dependencies":[{"issue_id":"tv-fwrl","depends_on_id":"tv-wisp-wisp-r2dz","type":"blocks","created_at":"2026-01-25T17:31:40.592428136-08:00","created_by":"mayor"}]}
{"id":"tv-gjim","title":"Add BiomeSwampTerrain as distinct mud type","description":"Change swamp from Grass to distinct Mud terrain type for visual clarity. Quick win from terrain_biomes_audit.md section 5.1. Files: src/terrain.nim, src/spawn.nim","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:19:53.779712488-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:19:53.779712488-08:00"}
{"id":"tv-gs2","title":"Consolidate duplicate market trading logic across roles","description":"Market trading logic is duplicated across Gatherer, Builder, and meta behaviors. Consolidate canStartGathererMarket/optGathererMarket, canStartBuilderMarketTrade/optBuilderMarketTrade, and canStartMarketManipulator/optMarketManipulator into a single shared market behavior. See docs/codebase_audit.md section 4.3.","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T09:46:13.630501679-08:00","created_by":"mayor","updated_at":"2026-01-25T10:15:41.917105119-08:00","closed_at":"2026-01-25T10:15:41.917105119-08:00","close_reason":"Already merged to main in commit bc1a0b0 (refactor: consolidate market trading behavior)"}
{"id":"tv-gyad","title":"Merge: tv-aqx","description":"branch: polecat/dementus/tv-aqx@mku8jltd\ntarget: main\nsource_issue: tv-aqx\nrig: tribal_village\nworker: dementus\nagent_bead: tv-tribal_village-polecat-dementus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"in_progress","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T13:27:16.794200654-08:00","created_by":"tribal_village/polecats/dementus","updated_at":"2026-01-25T13:45:32.014729701-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-i8sz","title":"Expose biome type in agent observations","description":"attached_molecule: tv-wisp-wisp-bs1f\nattached_at: 2026-01-26T01:33:29Z\ndispatched_by: mayor\n\nCurrently agents can't see biome type in their observations, limiting strategic biome-aware behavior. Quick win from terrain_biomes_audit.md section 5.2. Files: src/ffi.nim, src/environment.nim","notes":"Implemented: Added BiomeLayer to observation layers in types.nim, writes biome type in environment.nim:writeTileObs. Also fixed pre-existing memory safety violations in spawn.nim where nested procs captured var Rand.","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:20:51.668139541-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:26:19.58399302-08:00","dependencies":[{"issue_id":"tv-i8sz","depends_on_id":"tv-wisp-wisp-bs1f","type":"blocks","created_at":"2026-01-25T17:33:13.574538383-08:00","created_by":"mayor"}]}
{"id":"tv-i8zc","title":"Add cliff fall damage for elevation drops","description":"Falling from cliff edges could deal damage, making elevation strategically important. Quick win from terrain_biomes_audit.md section 5.3. Files: src/step.nim, src/environment.nim","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:20:52.420878018-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:20:52.420878018-08:00"}
{"id":"tv-iied","title":"Add per-unit attack overlays for combat feedback","description":"Bonus flashes now use per-attacker colors. Extend to show different tints per unit type scoring critical hits. See combat.md 'Critical-Hit Overlay' section. Files: src/combat.nim, src/ffi.nim","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:20:49.923531067-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:20:49.923531067-08:00"}
{"id":"tv-ilh","title":"Add target swapping for fighters","description":"attached_molecule: tv-wisp-wisp-jyha\nattached_at: 2026-01-26T01:23:44Z\ndispatched_by: mayor\n\nRe-evaluate target every N ticks. Switch to lower HP enemy if available. Switch to higher threat if ally in danger. See role_audit_report.md 'Target Swapping' section. File: src/scripted/fighter.nim","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:19:06.672676325-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:26:21.749665521-08:00","dependencies":[{"issue_id":"tv-ilh","depends_on_id":"tv-wisp-wisp-1gtx","type":"blocks","created_at":"2026-01-25T17:23:29.089183682-08:00","created_by":"mayor"},{"issue_id":"tv-ilh","depends_on_id":"tv-wisp-wisp-exo0","type":"blocks","created_at":"2026-01-25T17:26:19.283770347-08:00","created_by":"mayor"},{"issue_id":"tv-ilh","depends_on_id":"tv-wisp-wisp-jyha","type":"blocks","created_at":"2026-01-25T17:27:22.958080577-08:00","created_by":"mayor"}]}
{"id":"tv-jd9","title":"Add resource priority weighting for gatherers","description":"attached_molecule: tv-wisp-wisp-mdl6\nattached_at: 2026-01-26T01:25:47Z\ndispatched_by: mayor\n\nAdd multipliers based on game phase. Early game: Food \u003e Wood \u003e Stone \u003e Gold. Late game: Gold \u003e Stone \u003e Wood \u003e Food. See role_audit_report.md 'Resource Priority Weighting' section. File: src/scripted/gatherer.nim:48-65","notes":"Implemented game phase-based resource priority weighting in gatherer.nim:updateGathererTask. Early game prioritizes Food\u003eWood\u003eStone\u003eGold, late game prioritizes Gold\u003eStone\u003eWood\u003eFood. Uses multiplicative weights applied to stockpile counts.","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:19:08.361562099-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:26:21.50134805-08:00","dependencies":[{"issue_id":"tv-jd9","depends_on_id":"tv-wisp-wisp-mdl6","type":"blocks","created_at":"2026-01-25T17:25:32.223457913-08:00","created_by":"mayor"}]}
{"id":"tv-jfi6","title":"Standardize building queries to use getBuildingCount","description":"attached_molecule: tv-wisp-wisp-2w49\nattached_at: 2026-01-26T00:54:42Z\ndispatched_by: mayor\n\nSome behaviors query raw env.thingsByKind directly instead of cached getBuildingCount. Standardize for consistency and performance. See codebase_audit.md section 5.3. Files: src/scripted/ai_defaults.nim, builder.nim","status":"open","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T10:20:24.012541372-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:26:25.456909728-08:00","dependencies":[{"issue_id":"tv-jfi6","depends_on_id":"tv-wisp-wisp-2w49","type":"blocks","created_at":"2026-01-25T16:54:42.34300465-08:00","created_by":"mayor"}]}
{"id":"tv-jhet","title":"Investigate tribal_village codebase and beads status","description":"attached_molecule: tv-wisp-wm89\nattached_at: 2026-01-25T21:09:06Z\ndispatched_by: mayor\n\nInvestigate the tribal_village rig to understand:\n\n1. **Codebase Overview**: What is tribal_village? What does it do?\n2. **Current State**: Review the repo structure and key files\n3. **Beads Status**: Check all open beads (tv-*) and their priorities\n4. **In-Progress Work**: What's currently being worked on?\n5. **Blockers**: Are there any blocked issues or dependencies?\n\nReport findings back to mayor with summary of:\n- Project purpose and architecture\n- Current development priorities\n- Recommended next steps","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T13:08:18.337398735-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:19.333889395-08:00","dependencies":[{"issue_id":"tv-jhet","depends_on_id":"tv-wisp-e0al","type":"blocks","created_at":"2026-01-25T13:09:06.088340596-08:00","created_by":"mayor"}]}
{"id":"tv-jqbo","title":"Digest: mol-refinery-patrol","description":"Patrol cycle: merged 1 branch (tv-1ep ramp terrain), 52 tests passed, 0 conflicts, MERGED mail sent to witness","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T10:19:55.55673051-08:00","updated_at":"2026-01-25T10:19:55.55673051-08:00","closed_at":"2026-01-25T10:19:55.556684845-08:00","close_reason":"Squashed from 11 wisps"}
{"id":"tv-kh38","title":"Add adaptive wall radius for builders","description":"Calculate wall ring radius based on current territory/building count. Expand wall ring as village grows. Currently fixed at 7 tiles. See role_audit_report.md 'Adaptive Wall Radius' section. File: src/scripted/builder.nim","status":"closed","priority":3,"issue_type":"feature","assignee":"tribal_village/slit","owner":"richard@relh.net","created_at":"2026-01-25T10:19:20.955067191-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:48:46.994604436-08:00","closed_at":"2026-01-25T22:48:46.994604436-08:00","close_reason":"Closed"}
{"id":"tv-kmy2","title":"Implement Guard Tower with range 4 auto-attack","description":"attached_molecule: tv-wisp-wisp-d08y\nattached_at: 2026-01-26T01:24:32Z\ndispatched_by: mayor\n\nAdd static ranged defender building. Auto-attacks nearest enemy in range 4. No advanced targeting or micro. See siege_fortifications_plan.md section 2.2. Files: src/registry.nim, src/step.nim","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:19:36.274719914-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:26:20.957627624-08:00","dependencies":[{"issue_id":"tv-kmy2","depends_on_id":"tv-wisp-wisp-d08y","type":"blocks","created_at":"2026-01-25T17:24:17.141274162-08:00","created_by":"mayor"}]}
{"id":"tv-l0oc","title":"Add dynamic defense priority for builders","description":"attached_molecule: tv-wisp-wisp-p9hy\nattached_at: 2026-01-26T01:24:08Z\ndispatched_by: mayor\n\nAdd state tracking for 'under threat'. When threat detected, reorder: WallRing -\u003e TechBuildings -\u003e Infrastructure. When safe, reorder: Infrastructure -\u003e TechBuildings -\u003e WallRing. See role_audit_report.md 'Dynamic Defense Priority' section. File: src/scripted/builder.nim","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:19:19.388384135-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:26:21.244739489-08:00","dependencies":[{"issue_id":"tv-l0oc","depends_on_id":"tv-wisp-wisp-6pbk","type":"blocks","created_at":"2026-01-25T17:23:53.373441014-08:00","created_by":"mayor"},{"issue_id":"tv-l0oc","depends_on_id":"tv-wisp-wisp-p9hy","type":"blocks","created_at":"2026-01-25T17:28:19.148582816-08:00","created_by":"mayor"}]}
{"id":"tv-lbd","title":"Merge: tv-1ep","description":"branch: polecat/ace/tv-1ep@mkteow5w\ntarget: main\nsource_issue: tv-1ep\nrig: tribal_village\nworker: ace\nagent_bead: tv-tribal_village-polecat-ace\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","notes":"Merged to main by refinery. All 52 tests passed.","status":"closed","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-24T23:27:58.292574882-08:00","created_by":"tribal_village/polecats/ace","updated_at":"2026-01-25T09:45:30.238023794-08:00","closed_at":"2026-01-25T09:45:30.238027922-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-luzl","title":"Add water depth visualization (deep vs shallow)","description":"River centers could be 'deep water' (impassable) vs edges as 'shallow water' (slower but passable). Quick win from terrain_biomes_audit.md section 5.4. Files: src/terrain.nim, src/spawn.nim","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:21:04.154162454-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:21:04.154162454-08:00"}
{"id":"tv-lvcn","title":"Review AgentInventory*Layer aliases for removal","description":"Many AgentInventory*Layer aliases in types.nim:260-279 point to same base layer. Determine if all are needed or vestigial from earlier observation system design. See code_review_dead_code.md section 1.","status":"open","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T10:20:37.334817061-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:20:37.334817061-08:00"}
{"id":"tv-lzll","title":"Add meaningful termination conditions to behaviors","description":"Most behaviors use optionsAlwaysTerminate but some could benefit from custom shouldTerminate logic. Review FighterBreakout, FighterRetreat, FighterDividerDefense patterns. See codebase_audit.md section 5.1. Files: src/scripted/*.nim","status":"open","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T10:20:23.234182478-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:20:23.234182478-08:00"}
{"id":"tv-mu59","title":"Add shared threat map across agents","description":"Currently no shared threat awareness between agents. Each acts independently. Add team-level threat map for strategic coordination. See role_audit_report.md 'Global Gaps' section 3. Files: src/scripted/ai_core.nim, ai_defaults.nim","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:21:06.900521316-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:21:06.900521316-08:00"}
{"id":"tv-octv","title":"Implement AI modularization (import vs include)","description":"Replace include chain with explicit imports. Proposed structure: ai_types.nim (shared types), ai_options.nim (OptionDef, runOptions), ai_roles.nim (role assembly), ai_controller.nim (decideAction). See ai_system.md 'Modularization plan'. Files: src/scripted/*.nim","status":"open","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T10:21:05.032854663-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:21:05.032854663-08:00"}
{"id":"tv-oqe","title":"Add anti-oscillation hysteresis for gatherer task selection","description":"Don't switch task unless resource difference is significant (e.g., 5+ count). See role_audit_report.md 'Anti-oscillation for Resource Selection' section. File: src/scripted/gatherer.nim","status":"closed","priority":3,"issue_type":"feature","assignee":"tribal_village/nux","owner":"richard@relh.net","created_at":"2026-01-25T10:19:09.124320169-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:48:07.736505591-08:00","closed_at":"2026-01-25T22:48:07.736505591-08:00","close_reason":"Closed"}
{"id":"tv-puj","title":"Add kiting behavior for ranged units (Archers)","description":"attached_molecule: tv-wisp-wisp-kls4\nattached_at: 2026-01-25T21:45:40Z\ndispatched_by: mayor\n\nAfter attacking, check if melee enemy approaching and move away while maintaining attack range. Insert between attack check and FighterAggressive. See role_audit_report.md 'Kiting for Ranged Units' section. File: src/scripted/fighter.nim","notes":"Work was already completed: Kiting behavior implemented in tv-5aui (commit 7a46d04) and merged to main. Implementation includes: findNearestMeleeEnemy, canStartFighterKite, optFighterKite, and FighterKite registered in FighterOptions before FighterAggressive. Tests pass. No new changes needed - branch is identical to main.","status":"closed","priority":1,"issue_type":"feature","assignee":"tribal_village/polecats/rictus","owner":"richard@relh.net","created_at":"2026-01-25T10:18:51.408647946-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T19:13:05.06762874-08:00","closed_at":"2026-01-25T19:13:05.06762874-08:00","close_reason":"Work already completed and merged to main (tv-5aui, commit 7a46d04)","dependencies":[{"issue_id":"tv-puj","depends_on_id":"tv-wisp-wisp-c60","type":"blocks","created_at":"2026-01-25T13:45:40.169696006-08:00","created_by":"mayor"},{"issue_id":"tv-puj","depends_on_id":"tv-wisp-wisp-kls4","type":"blocks","created_at":"2026-01-25T19:10:53.700416109-08:00","created_by":"mayor"}]}
{"id":"tv-r1ix","title":"Add builder coordination to prevent duplicate construction","description":"Track 'claimed' building slots. Prevent multiple builders from attempting same construction. See role_audit_report.md 'Builder Coordination' section. File: src/scripted/builder.nim","status":"closed","priority":3,"issue_type":"feature","assignee":"tribal_village/rictus","owner":"richard@relh.net","created_at":"2026-01-25T10:19:22.68754839-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:49:46.979374109-08:00","closed_at":"2026-01-25T22:49:46.979374109-08:00","close_reason":"Closed"}
{"id":"tv-rig-tribal_village","title":"tribal_village","description":"Rig identity bead for tribal_village.\n\nrepo: git@github.com:Metta-AI/tribal-village\nprefix: tv\nstate: active","status":"open","priority":2,"issue_type":"task","assignee":"refinery-1","owner":"richard@relh.net","created_at":"2026-01-25T15:52:33.445488421-08:00","created_by":"mayor","updated_at":"2026-01-25T21:55:05.671422098-08:00","labels":["gt:rig"]}
{"id":"tv-s7x7","title":"Investigate terrain type aliases usage","description":"TerrainWater, TerrainBridge, TerrainFertile etc (terrain.nim:135-143) may be vestigial. Verify if external code uses them or if they can be removed. See code_review_dead_code.md section 4.","status":"open","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T10:20:36.644090445-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:20:36.644090445-08:00"}
{"id":"tv-uogr","title":"Review orphaned commits and recover valuable work","description":"Review the 10 orphaned commits from the last 24h and determine which contain valuable work worth recovering:\n\n## Orphaned Commits to Review:\n1. 138bb6b5 - AI profiling logs and behavior analysis (furiosa, 17h ago)\n2. 988fe2fc - Remove dead code: unused layer aliases (slit, 1d ago)\n3. d71a3182 - Correct legacy observation layer audit (ace, 16h ago)\n4. b8a61297 - Building interaction and siege mechanics analysis (rictus, 17h ago)\n5. f63dfd90 - Entity interaction analysis for animals/enemies (slit, 17h ago)\n6. 7c40e0c6 - Reduce AI invalid actions by validating moves (rictus, 1d ago)\n7. e04666ff - Consolidate market trading behavior (dag, 16h ago)\n8. e2d9d315 - Return noop instead of random move when blocked (dementus, 1d ago)\n9. 995e5e0b - Codebase structure audit with cleanup recs (capable, 17h ago)\n\n## Tasks:\n1. Use 'git show \u003csha\u003e' to review each commit\n2. Categorize as: KEEP (cherry-pick to main), DISCARD, or REDO (good idea, bad impl)\n3. For KEEP commits, cherry-pick them onto a recovery branch\n4. Report findings to mayor with recommended actions\n\n## Commands:\n- gt orphans --days=2 (to see full list)\n- git show \u003csha\u003e (to review each commit)\n- git cherry-pick \u003csha\u003e (to recover)","status":"closed","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T13:14:06.412788901-08:00","created_by":"mayor","updated_at":"2026-01-25T13:16:50.871611909-08:00","closed_at":"2026-01-25T13:16:50.871613582-08:00","comments":[{"id":1,"issue_id":"tv-uogr","author":"tribal_village/polecats/toast","text":"## Orphan Commit Review Complete\n\nAll 9 orphaned commits have been analyzed. **No recovery needed** - all work has already been merged to main.\n\n| SHA | Description | Main Equivalent |\n|-----|-------------|-----------------|\n| 138bb6b5 | AI profiling logs | data/ files exist |\n| 988fe2fc | Remove dead code | 715880f |\n| d71a3182 | Legacy layer audit fix | 64c6a27 |\n| b8a61297 | Building siege analysis | docs exist |\n| f63dfd90 | Entity interaction analysis | docs exist |\n| 7c40e0c6 | Reduce AI invalid actions | 0b547b4 |\n| e04666ff | Market trading consolidation | bc1a0b0 |\n| e2d9d315 | Return noop when blocked | 4ca201f |\n| 995e5e0b | Codebase structure audit | e2a0b31 |\n\nOrphaned branches can be safely garbage collected.","created_at":"2026-01-25T21:16:44Z"}]}
{"id":"tv-uor5","title":"Implement Battering Ram unit with simple AI","description":"attached_molecule: tv-wisp-wisp-ce9t\nattached_at: 2026-01-26T01:31:31Z\ndispatched_by: mayor\n\nTrains at Siege Workshop. Simple AI: move forward until blocked, attack blocking target, resume. Best vs structures (x3 damage), weak vs units. See siege_fortifications_plan.md section 1.1. Files: src/types.nim, src/step.nim, src/scripted/fighter.nim","notes":"Implemented Battering Ram simple AI in fighter.nim: move forward in current orientation, attack blocking targets (units/walls/doors), resume forward when target destroyed. Added BatteringRamAdvance option to FighterOptions array.","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:19:38.263310624-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:26:20.682897189-08:00","dependencies":[{"issue_id":"tv-uor5","depends_on_id":"tv-wisp-wisp-ce9t","type":"blocks","created_at":"2026-01-25T17:31:16.203605764-08:00","created_by":"mayor"}]}
{"id":"tv-upwa","title":"Convert inventory from Table to array for common items","description":"attached_molecule: tv-wisp-wisp-i7i6\nattached_at: 2026-01-26T00:54:39Z\ndispatched_by: mayor\n\nInventory uses Table[ItemKey, int] requiring hash computation. Use fixed array[ItemKind, int16] for O(1) access. Keep Table fallback for thing-items. Expected 15-25% reduction in action processing. See performance_scaling_1000_agents.md section 5. Files: src/items.nim:178-194","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T10:20:08.412546652-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:26:19.867441898-08:00","dependencies":[{"issue_id":"tv-upwa","depends_on_id":"tv-wisp-wisp-i7i6","type":"blocks","created_at":"2026-01-25T16:54:39.22748628-08:00","created_by":"mayor"}]}
{"id":"tv-v0lg","title":"Track entity movement for incremental tint updates","description":"attached_molecule: tv-wisp-wisp-07f2\nattached_at: 2026-01-25T22:38:30Z\ndispatched_by: mayor\n\nCurrently all 1000 agents apply tint every step. Track position changes and only update tint for moved entities. Expected 40-60% reduction in tint processing. See performance_scaling_1000_agents.md section 3. Files: src/tint.nim:66-126","notes":"Fixed pre-existing compile errors in spawn.nim (rng capture in nested procs). Build and all tests pass.","status":"open","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T10:20:07.649828471-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:25:50.97531088-08:00","dependencies":[{"issue_id":"tv-v0lg","depends_on_id":"tv-wisp-wisp-nmn","type":"blocks","created_at":"2026-01-25T14:38:30.128498109-08:00","created_by":"mayor"},{"issue_id":"tv-v0lg","depends_on_id":"tv-wisp-wisp-22vo","type":"blocks","created_at":"2026-01-25T19:10:22.083491631-08:00","created_by":"mayor"},{"issue_id":"tv-v0lg","depends_on_id":"tv-wisp-wisp-07f2","type":"blocks","created_at":"2026-01-25T19:16:45.911995105-08:00","created_by":"mayor"}]}
{"id":"tv-vgzm","title":"Implement visual ramp tiles for elevation transitions","description":"Use RampUp*/RampDown* terrain types that exist but aren't placed. Provides clearer visual feedback for elevation transitions. Allow different ramp widths. See terrain_biomes_audit.md section 3.2. Files: src/spawn.nim, src/terrain.nim","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:19:51.815674021-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T10:19:51.815674021-08:00"}
{"id":"tv-wisp-00k","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T09:42:54.449258282-08:00","updated_at":"2026-01-25T09:43:58.007674625-08:00","closed_at":"2026-01-25T09:43:58.007674625-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-00k","depends_on_id":"tv-wisp-1f3","type":"blocks","created_at":"2026-01-25T09:42:54.463828885-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-09p","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"closed","priority":2,"issue_type":"epic","assignee":"tribal_village/witness","created_at":"2026-01-25T10:18:35.908002339-08:00","updated_at":"2026-01-25T10:18:51.568466471-08:00","closed_at":"2026-01-25T10:18:51.568466471-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-0brh","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:51.190112862-08:00","updated_at":"2026-01-25T13:20:37.043348992-08:00","closed_at":"2026-01-25T13:20:37.043348992-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-0hs","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T09:42:36.25951212-08:00","updated_at":"2026-01-25T09:42:36.25951216-08:00","ephemeral":true}
{"id":"tv-wisp-0pkq","title":"Add Wheelbarrow/Hand Cart research","description":"attached_molecule: tv-wisp-wisp-tcnq\nattached_at: 2026-01-26T04:20:31Z\ndispatched_by: mayor\n\nImplement AoE2-style wheelbarrow and hand cart upgrades. Increases villager carry capacity and movement speed. Research at Town Center.","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:19:03.276060783-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:23.093184497-08:00","labels":["aoe2","economy"],"dependencies":[{"issue_id":"tv-wisp-0pkq","depends_on_id":"tv-wisp-wisp-tcnq","type":"blocks","created_at":"2026-01-25T20:20:30.316762926-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-0r5","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:17:35.509074569-08:00","updated_at":"2026-01-25T10:17:35.509076673-08:00","ephemeral":true}
{"id":"tv-wisp-0sipu","title":"Digest: mol-witness-patrol","description":"Patrol 2: No polecats, refinery running, deacon down.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T22:11:56.233671395-08:00","updated_at":"2026-01-25T22:11:56.233671395-08:00","closed_at":"2026-01-25T22:11:56.233627382-08:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"tv-wisp-0sipu","depends_on_id":"tv-wisp-wisp-2owzn","type":"parent-child","created_at":"2026-01-25T22:11:56.234735551-08:00","created_by":"tribal_village/witness"}]}
{"id":"tv-wisp-0tq4","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:20:05.966848253-08:00","updated_at":"2026-01-25T10:20:05.966848314-08:00","ephemeral":true}
{"id":"tv-wisp-0u7x","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:20:49.467158554-08:00","updated_at":"2026-01-25T10:20:49.467158594-08:00","ephemeral":true}
{"id":"tv-wisp-0vdb","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-jhet).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-jhet\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:11:45.972989422-08:00","updated_at":"2026-01-25T13:11:45.972989472-08:00","dependencies":[{"issue_id":"tv-wisp-0vdb","depends_on_id":"tv-wisp-13qw","type":"blocks","created_at":"2026-01-25T13:11:46.097176028-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-1167","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-ch8\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:51.190799515-08:00","updated_at":"2026-01-25T13:21:04.733405683-08:00","dependencies":[{"issue_id":"tv-wisp-1167","depends_on_id":"tv-wisp-6ujx","type":"blocks","created_at":"2026-01-25T13:13:51.424424319-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-13qw","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-jhet\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:11:45.972716312-08:00","updated_at":"2026-01-25T13:11:45.972716352-08:00","dependencies":[{"issue_id":"tv-wisp-13qw","depends_on_id":"tv-wisp-505b","type":"blocks","created_at":"2026-01-25T13:11:46.08473545-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-14gin","title":"Merge: tv-wisp-p5yr","description":"branch: polecat/auditor2-mkumm8ji\ntarget: main\nsource_issue: tv-wisp-p5yr\nrig: tribal_village\nworker: auditor2\nagent_bead: tv-tribal_village-polecat-auditor2\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T19:55:47.016478565-08:00","created_by":"tribal_village/polecats/auditor2","updated_at":"2026-01-25T20:02:16.586857153-08:00","closed_at":"2026-01-25T20:02:16.586859708-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-1au4h","title":"Analyze docs/ folder and verify accuracy against current game mechanics","description":"Review all documentation in docs/ and README.md. Compare against actual game implementation in the codebase. Create a report identifying: 1) Outdated information 2) Missing features 3) Inaccuracies 4) Duplicative content. Output a structured report for the docs updater.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T22:17:21.971781103-08:00","created_by":"mayor","updated_at":"2026-01-25T22:17:21.971781103-08:00"}
{"id":"tv-wisp-1cy","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-agd\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-agd --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:17:45.130074458-08:00","updated_at":"2026-01-25T10:17:45.130074518-08:00","dependencies":[{"issue_id":"tv-wisp-1cy","depends_on_id":"tv-wisp-bhv","type":"parent-child","created_at":"2026-01-25T10:17:45.144428541-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-1f3","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T09:42:54.448965057-08:00","updated_at":"2026-01-25T09:43:47.556560047-08:00","closed_at":"2026-01-25T09:43:47.556560047-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-1f3","depends_on_id":"tv-wisp-5qe","type":"blocks","created_at":"2026-01-25T09:42:54.462354972-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-1ll","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T09:42:36.260389674-08:00","updated_at":"2026-01-25T09:42:36.260389714-08:00","ephemeral":true}
{"id":"tv-wisp-1o6g","title":"Fighter: Add waitForAllies behavior condition","description":"Add a condition check that delays engagement until allies catch up.\n\n**File:** src/scripted/fighter.nim\n\n**Implementation:**\nAdd to fighter behavior tree:\n```nim\nproc shouldWaitForAllies*(env: Environment, agent: Agent): bool =\n  ## Return true if agent should wait for nearby allies before engaging\n  let nearbyAllies = countNearbyAllies(env, agent, radius=5)\n  let nearbyEnemies = countNearbyEnemies(env, agent, radius=7)\n  # Wait if outnumbered and allies are coming\n  result = nearbyEnemies \u003e nearbyAllies + 1 and \n           countNearbyAllies(env, agent, radius=10) \u003e nearbyAllies\n```\n\nThis is step 2 of group combat tactics.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T15:26:45.789583144-08:00","created_by":"mayor","updated_at":"2026-01-25T15:26:45.789583144-08:00"}
{"id":"tv-wisp-1qer","title":"Generate handoff summary","description":"Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:09:10.220254487-08:00","updated_at":"2026-01-25T13:09:10.220254527-08:00","dependencies":[{"issue_id":"tv-wisp-1qer","depends_on_id":"tv-wisp-506w","type":"parent-child","created_at":"2026-01-25T13:09:10.303280365-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-1rmd","title":"Pre-existing test failure: spatial index overflow in task hearts test","description":"attached_molecule: tv-wisp-wisp-ud7x\nattached_at: 2026-01-25T22:41:44Z\ndispatched_by: mayor\n\nFound failing test during pre-work verification for tv-96g.\n\nTest: 'task hearts uses magma when carrying gold'\nError: over- or underflow [OverflowDefect]\nLocation: src/spatial_index.nim:101 findNearestThingSpatial\n\nLikely related to commit 85a28d0 (spatial index for O(1) nearest-thing queries)","status":"open","priority":0,"issue_type":"bug","owner":"richard@relh.net","created_at":"2026-01-25T14:40:25.486191321-08:00","created_by":"tribal_village/polecats/capable","updated_at":"2026-01-25T22:25:49.935423764-08:00","dependencies":[{"issue_id":"tv-wisp-1rmd","depends_on_id":"tv-wisp-wisp-mni","type":"blocks","created_at":"2026-01-25T14:41:43.962200777-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-1rmd","depends_on_id":"tv-wisp-wisp-ud7x","type":"blocks","created_at":"2026-01-25T19:10:13.219296339-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-1si","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T09:42:54.450598432-08:00","updated_at":"2026-01-25T09:46:17.797767649-08:00","closed_at":"2026-01-25T09:46:17.797767649-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-1si","depends_on_id":"tv-wisp-zdt","type":"blocks","created_at":"2026-01-25T09:42:54.468703603-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-20xn","title":"Merge: tv-fwrl","description":"branch: polecat/rictus-mkuhn64r\ntarget: main\nsource_issue: tv-fwrl\nrig: tribal_village\nworker: rictus\nagent_bead: tv-tribal_village-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T17:39:51.996570393-08:00","created_by":"tribal_village/polecats/rictus","updated_at":"2026-01-25T20:02:15.571832741-08:00","closed_at":"2026-01-25T20:02:15.571835326-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-22azn","title":"Resolve spawn.nim conflict for biome observations PR","description":"Rebase polecat/furiosa-mkuhtgy6 branch to resolve spawn.nim conflicts with main. Keep both sets of changes - the biome observations feature and any new main changes.","status":"closed","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T20:03:29.601427886-08:00","created_by":"mayor","updated_at":"2026-01-25T20:05:59.968084023-08:00","closed_at":"2026-01-25T20:05:59.968084023-08:00","close_reason":"Closed","labels":["conflict","merge"]}
{"id":"tv-wisp-25n","title":"Merge: tv-3ns","description":"branch: polecat/capable/tv-3ns@mku9oivk\ntarget: main\nsource_issue: tv-3ns\nrig: tribal_village\nworker: capable\nagent_bead: tv-tribal_village-polecat-capable\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"in_progress","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T13:52:03.25531428-08:00","created_by":"tribal_village/polecats/capable","updated_at":"2026-01-25T14:23:04.006267992-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-2igh9","title":"Digest: mol-witness-patrol","description":"Patrol: Rig quiet, no polecats, no messages.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T22:04:23.581873259-08:00","updated_at":"2026-01-25T22:04:23.581873259-08:00","closed_at":"2026-01-25T22:04:23.581787228-08:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"tv-wisp-2igh9","depends_on_id":"tv-wisp-wisp-m0s49","type":"parent-child","created_at":"2026-01-25T22:04:23.58395514-08:00","created_by":"tribal_village/witness"}]}
{"id":"tv-wisp-2j4","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T09:42:36.260801264-08:00","updated_at":"2026-01-25T09:42:36.260801304-08:00","ephemeral":true}
{"id":"tv-wisp-2jzw","title":"Add University technologies","description":"Implement AoE2-style university techs. Ballistics, chemistry, siege engineers, murder holes, heated shot, architecture, masonry.","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:19:56.773044905-08:00","created_by":"mayor","updated_at":"2026-01-25T19:19:56.773044905-08:00","labels":["aoe2","research"]}
{"id":"tv-wisp-2kql","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-xt5w\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:36:54.613113345-08:00","updated_at":"2026-01-25T13:36:54.613113425-08:00","dependencies":[{"issue_id":"tv-wisp-2kql","depends_on_id":"tv-wisp-573r","type":"blocks","created_at":"2026-01-25T13:36:54.745144235-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-2mqj3","title":"Merge: tv-ynta","description":"branch: polecat/dementus/tv-ynta@mkusk92p\ntarget: main\nsource_issue: tv-ynta\nrig: tribal_village\nworker: dementus\nagent_bead: tv-tribal_village-polecat-dementus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T22:37:34.450202944-08:00","created_by":"tribal_village/polecats/dementus","updated_at":"2026-01-25T22:49:18.485215806-08:00","closed_at":"2026-01-25T22:49:18.485215806-08:00","close_reason":"Closed","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-2mu6","title":"Add Trebuchet pack/unpack mechanic","description":"attached_molecule: tv-wisp-wisp-dreg\nattached_at: 2026-01-26T03:27:43Z\ndispatched_by: mayor\n\nImplement AoE2-style trebuchet. Trebuchets must unpack before firing. Unpacking/packing takes time. Packed trebuchets can move but not fire.","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:18:31.933103546-08:00","created_by":"mayor","updated_at":"2026-01-25T22:25:58.970315404-08:00","labels":["aoe2","siege"],"dependencies":[{"issue_id":"tv-wisp-2mu6","depends_on_id":"tv-wisp-wisp-dreg","type":"blocks","created_at":"2026-01-25T19:27:42.805439562-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-2uhx","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:19:44.097453691-08:00","updated_at":"2026-01-25T10:19:44.097453751-08:00","ephemeral":true}
{"id":"tv-wisp-30u","title":"Run test suite","description":"Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:17:49.506153179-08:00","updated_at":"2026-01-25T10:17:49.50615322-08:00","dependencies":[{"issue_id":"tv-wisp-30u","depends_on_id":"tv-wisp-ne9","type":"blocks","created_at":"2026-01-25T10:17:49.541405917-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-318k","title":"Add Market trading mechanics","description":"attached_molecule: tv-wisp-wisp-wkqr\nattached_at: 2026-01-26T03:20:54Z\ndispatched_by: mayor\n\nImplement AoE2-style market where resources can be traded. Market prices adjust based on supply/demand. Buy/sell gold, food, wood, stone with dynamic exchange rates.","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:18:05.543286311-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:00.021709104-08:00","labels":["aoe2","economy"],"dependencies":[{"issue_id":"tv-wisp-318k","depends_on_id":"tv-wisp-wisp-wkqr","type":"blocks","created_at":"2026-01-25T19:20:53.717712276-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-32y6","title":"Builder: Add findDamagedBuilding helper function","description":"attached_molecule: tv-wisp-wisp-59hk\nattached_at: 2026-01-25T23:30:06Z\ndispatched_by: mayor\n\nAdd a helper function to find damaged buildings that need repair.\n\n**File:** src/scripted/builder.nim\n\n**Implementation:**\n```nim\nproc findDamagedBuilding*(env: Environment, agent: Agent): Option[Thing] =\n  ## Find nearest damaged friendly building\n  var nearest: Option[Thing]\n  var minDist = 999\n  \n  for thing in env.things:\n    if thing.kind in BuildingKinds and thing.team == agent.team:\n      if thing.hp \u003c thing.maxHp:  # Building is damaged\n        let dist = manhattanDistance(agent.pos, thing.pos)\n        if dist \u003c minDist:\n          minDist = dist\n          nearest = some(thing)\n  \n  return nearest\n```\n\nThis is step 1 of BuildingRepair behavior.","notes":"Implemented findDamagedBuilding* helper function in src/scripted/builder.nim. Function finds nearest damaged friendly building (hp \u003c maxHp) using chebyshevDist, following existing codebase patterns.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T15:27:20.435649711-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:07.250130432-08:00","dependencies":[{"issue_id":"tv-wisp-32y6","depends_on_id":"tv-wisp-wisp-x8yu","type":"blocks","created_at":"2026-01-25T15:30:06.509543686-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-32y6","depends_on_id":"tv-wisp-wisp-59hk","type":"blocks","created_at":"2026-01-25T16:07:28.502723378-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-36ns","title":"Merge: tv-i8sz","description":"branch: polecat/furiosa-mkuhtgy6\ntarget: main\nsource_issue: tv-i8sz\nrig: tribal_village\nworker: furiosa\nagent_bead: tv-tribal_village-polecat-furiosa\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T17:43:27.16733762-08:00","created_by":"tribal_village/polecats/furiosa","updated_at":"2026-01-25T20:02:15.82496521-08:00","closed_at":"2026-01-25T20:02:15.824967194-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-376f","title":"Add Castle unique unit spawning","description":"attached_molecule: tv-wisp-wisp-y86p\nattached_at: 2026-01-26T03:25:26Z\ndispatched_by: mayor\n\nImplement AoE2-style castle unique units. Each civilization has a unique unit that can only be trained at castles. Unique units have special abilities.","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:18:25.378238177-08:00","created_by":"mayor","updated_at":"2026-01-25T22:25:59.221932837-08:00","labels":["aoe2","military"],"dependencies":[{"issue_id":"tv-wisp-376f","depends_on_id":"tv-wisp-wisp-y86p","type":"blocks","created_at":"2026-01-25T19:25:25.891991008-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-38ac","title":"Pre-existing: renderer.nim addImage mipmaps parameter error","description":"attached_molecule: tv-wisp-wisp-2pyz\nattached_at: 2026-01-26T03:16:18Z\ndispatched_by: mayor\n\nnim check fails on renderer.nim lines 891-892:\n\nError: type mismatch - unknown named parameter 'mipmaps' in addImage call.\n\nThe Boxy library API appears to have changed. The addImage proc no longer accepts a mipmaps parameter.\n\nFiles affected: src/renderer.nim:891-892","notes":"Fixed: Removed unsupported 'mipmaps' parameter from all 5 addImage calls in renderer.nim. The Boxy library API no longer accepts this parameter.","status":"open","priority":1,"issue_type":"bug","owner":"richard@relh.net","created_at":"2026-01-25T16:36:46.082408389-08:00","created_by":"tribal_village/polecats/furiosa","updated_at":"2026-01-25T22:25:50.459432753-08:00","dependencies":[{"issue_id":"tv-wisp-38ac","depends_on_id":"tv-wisp-wisp-2pyz","type":"blocks","created_at":"2026-01-25T19:16:17.788216282-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-38m","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:17:43.905956825-08:00","updated_at":"2026-01-25T10:17:43.905956865-08:00","ephemeral":true}
{"id":"tv-wisp-395fz","title":"Re-implement Mangonel 1-tile side prong AoE on new spawn.nim","description":"attached_molecule: tv-wisp-wisp-1k5c\nattached_at: 2026-01-26T04:07:31Z\ndispatched_by: mayor\n\nThe previous implementation conflicted with spawn.nim refactor. Re-implement Mangonel AoE damage that hits 1 tile on each side of the projectile path (side prongs), using the new refactored spawn.nim helpers.","status":"open","priority":1,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T20:06:15.858674684-08:00","created_by":"mayor","updated_at":"2026-01-25T22:25:50.201779064-08:00","labels":["aoe2","reimpl"],"dependencies":[{"issue_id":"tv-wisp-395fz","depends_on_id":"tv-wisp-wisp-1k5c","type":"blocks","created_at":"2026-01-25T20:07:29.469967924-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-3cr3","title":"Merge: tv-wisp-h2uu","description":"branch: polecat/furiosa/tv-wisp-h2uu\ntarget: main\nsource_issue: tv-wisp-h2uu\nrig: tribal_village\nworker: furiosa\nagent_bead: tv-tribal_village-polecat-furiosa\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T16:09:37.091238312-08:00","created_by":"tribal_village/polecats/furiosa","updated_at":"2026-01-25T16:32:13.949853625-08:00","closed_at":"2026-01-25T16:32:13.949855548-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-3glc","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:20:32.057284822-08:00","updated_at":"2026-01-25T10:20:32.057284862-08:00","ephemeral":true}
{"id":"tv-wisp-4393","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-xt5w).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-xt5w\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:36:54.613592535-08:00","updated_at":"2026-01-25T13:36:54.613592585-08:00","dependencies":[{"issue_id":"tv-wisp-4393","depends_on_id":"tv-wisp-2kql","type":"blocks","created_at":"2026-01-25T13:36:54.759028238-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-46n","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-agd should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:17:45.129338115-08:00","updated_at":"2026-01-25T10:17:45.129338176-08:00","dependencies":[{"issue_id":"tv-wisp-46n","depends_on_id":"tv-wisp-bhv","type":"parent-child","created_at":"2026-01-25T10:17:45.139226602-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-46n","depends_on_id":"tv-wisp-umz","type":"blocks","created_at":"2026-01-25T10:17:45.153585133-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-49j","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T23:17:28.156670337-08:00","updated_at":"2026-01-24T23:17:28.156670397-08:00","dependencies":[{"issue_id":"tv-wisp-49j","depends_on_id":"tv-wisp-9gv","type":"blocks","created_at":"2026-01-24T23:17:28.166160625-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-4xwf","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:09:10.220487873-08:00","updated_at":"2026-01-25T13:09:10.220487914-08:00","dependencies":[{"issue_id":"tv-wisp-4xwf","depends_on_id":"tv-wisp-506w","type":"parent-child","created_at":"2026-01-25T13:09:10.31420539-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-4xwf","depends_on_id":"tv-wisp-1qer","type":"blocks","created_at":"2026-01-25T13:09:10.42800377-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-4zq","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-aqx\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T23:17:28.155643613-08:00","updated_at":"2026-01-24T23:18:56.348146387-08:00","closed_at":"2026-01-24T23:18:56.348146387-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-505b","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-jhet           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-jhet\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:11:45.972435747-08:00","updated_at":"2026-01-25T13:11:45.972435777-08:00","ephemeral":true}
{"id":"tv-wisp-506w","title":"mol-refinery-patrol","description":"Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to main one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────\u003e│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch \u0026 rebase            │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge \u0026 push              │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │\u003c─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T13:09:10.21707713-08:00","updated_at":"2026-01-25T13:09:10.21707717-08:00","ephemeral":true}
{"id":"tv-wisp-573r","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-xt5w           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-xt5w\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:36:54.612496869-08:00","updated_at":"2026-01-25T13:36:54.612496929-08:00","ephemeral":true}
{"id":"tv-wisp-59t6","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:19:57.119675277-08:00","updated_at":"2026-01-25T10:19:57.119675317-08:00","ephemeral":true}
{"id":"tv-wisp-5d7t","title":"Audit and refactor terrain.nim for code quality","description":"attached_molecule: tv-wisp-wisp-vlrj\nattached_at: 2026-01-26T03:56:38Z\ndispatched_by: mayor\n\nReview terrain.nim for code quality: simplify terrain generation logic, reduce nested conditionals, extract helper functions, improve readability.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T19:46:55.153278744-08:00","created_by":"mayor","updated_at":"2026-01-25T22:25:57.944558611-08:00","labels":["audit","cleanup"],"dependencies":[{"issue_id":"tv-wisp-5d7t","depends_on_id":"tv-wisp-wisp-vlrj","type":"blocks","created_at":"2026-01-25T19:56:37.762712228-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-5gp","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-ch8)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-ch8\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T09:45:39.633708041-08:00","updated_at":"2026-01-25T09:45:39.633708071-08:00","dependencies":[{"issue_id":"tv-wisp-5gp","depends_on_id":"tv-wisp-d3r","type":"blocks","created_at":"2026-01-25T09:45:39.648521678-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-5kkk","title":"Add murder holes technology for buildings","description":"Defensive buildings should not have minimum attack range after research, like AoE2 Murder Holes.\n\n**Current:** Unknown if towers/castles have minimum range\n**Desired:** Murder Holes research removes minimum attack range\n\nImplementation:\n- Check if buildings have min range currently\n- Add Murder Holes research at University\n- When researched, towers/castles can attack units directly beneath them","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:15:11.432787374-08:00","created_by":"mayor","updated_at":"2026-01-25T15:15:11.432787374-08:00"}
{"id":"tv-wisp-5kr","title":"Build scripter expertise: Document metta scripted agent architecture","description":"As the new scripter crew member, build deep expertise in the metta scripted agent systems.\n\n## Objectives\n\n1. **Survey the codebase** - Map out all scripted agent code:\n   - packages/mettagrid/nim/ - Nim simulation code\n   - packages/cogames/src/cogames/policy/ - Python policy wrappers\n   - packages/cogames/src/cogames/cogs_vs_clips/ - CogsGuard game mode\n\n2. **Document the architecture** - Create docs/scripted-agents-overview.md covering:\n   - How Nim agents work (mettascope)\n   - The policy abstraction layer\n   - CogsGuard reward variants and missions\n   - Teacher/student training pipeline\n\n3. **Identify improvement opportunities** - Note any:\n   - Missing documentation\n   - Code that could be refactored\n   - Performance bottlenecks\n   - Potential new behaviors\n\n4. **Create personal notes** - Start docs/scripter-notes.md as your ongoing knowledge base\n\n## Key Files to Study\n- packages/cogames/src/cogames/policy/starter_agent.py\n- packages/cogames/src/cogames/cogs_vs_clips/cog.py\n- packages/cogames/src/cogames/cogs_vs_clips/cogsguard_reward_variants.py\n- packages/mettagrid/nim/mettascope/src/mettascope/*.nim\n\nThis is a learning/documentation task - take your time to build real expertise.","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T13:49:11.847463591-08:00","created_by":"mayor","updated_at":"2026-01-25T13:49:21.69222586-08:00","closed_at":"2026-01-25T13:49:21.69222586-08:00","close_reason":"Wrong rig, recreating in metta"}
{"id":"tv-wisp-5mx","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T09:42:54.450104205-08:00","updated_at":"2026-01-25T09:45:54.904883152-08:00","closed_at":"2026-01-25T09:45:54.904883152-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-5mx","depends_on_id":"tv-wisp-6no","type":"blocks","created_at":"2026-01-25T09:42:54.466926705-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-5o2p","title":"Add relic gold generation at Monastery","description":"attached_molecule: tv-wisp-wisp-2t2z\nattached_at: 2026-01-26T01:34:56Z\ndispatched_by: mayor\n\nRelics held at Monastery should generate gold over time, similar to AoE2.\n\n**Current:** Relics only drop gold on death\n**Desired:** Monastery with relic generates gold per tick\n\nImplementation:\n- Track if Monastery contains a Relic\n- Add tick-based gold generation (e.g., 1 gold every N ticks)\n- Add to team stockpile automatically\n\nReference: docs/aoe2_design_investigation.md section 2.1","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:14:17.28823092-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:18.540785684-08:00","dependencies":[{"issue_id":"tv-wisp-5o2p","depends_on_id":"tv-wisp-wisp-2t2z","type":"blocks","created_at":"2026-01-25T17:34:55.995212116-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-5pj","title":"Scan merge queue","description":"Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list \u003crig\u003e\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep \u003cbranch\u003e\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close \u003cmr-id\u003e --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T09:42:48.89108929-08:00","updated_at":"2026-01-25T09:42:48.89108933-08:00","ephemeral":true}
{"id":"tv-wisp-5pvuv","title":"Pre-existing: spawn.nim rng capture error prevents compilation","description":"Main branch has a compilation error in spawn.nim line 199.\n\nError: 'rng' is of type \u003cRand\u003e which cannot be captured as it would violate memory safety\n\nThe nested proc carveTreeOasisWater and randFloat call on line 199 capture rng which is a var Rand from the outer scope. This violates Nim's memory safety rules for the arc memory manager.\n\nFix would involve either:\n1. Pass rng explicitly to nested procs\n2. Use a ref Rand type that can be captured\n3. Restructure to avoid closure capture","status":"open","priority":1,"issue_type":"bug","owner":"richard@relh.net","created_at":"2026-01-25T19:51:07.34033443-08:00","created_by":"tribal_village/polecats/auditor1","updated_at":"2026-01-25T19:51:07.34033443-08:00"}
{"id":"tv-wisp-5qe","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T09:42:54.448550601-08:00","updated_at":"2026-01-25T09:43:34.960169509-08:00","closed_at":"2026-01-25T09:43:34.960169509-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-5rqo","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-jhet)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-jhet\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:09:05.822511912-08:00","updated_at":"2026-01-25T13:09:05.822511952-08:00","dependencies":[{"issue_id":"tv-wisp-5rqo","depends_on_id":"tv-wisp-e0al","type":"parent-child","created_at":"2026-01-25T13:09:05.857517005-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-5uec","title":"Investigate missing game assets and document generation workflow","description":"dispatched_by: mayor\n\nAudit tribal_village assets to find what's missing art and document the generation workflow.\n\n## Asset Locations to Check\n- data/ folder (main assets)\n- data/oriented/ subfolder (directional sprites)\n- assets/ folder if it exists\n\n## Investigation Tasks\n\n1. **Inventory existing assets:**\n   - List all image files in data/ and subdirectories\n   - Identify which game entities have sprites vs placeholders\n   - Check for missing orientations (n/s/e/w/ne/nw/se/sw)\n\n2. **Cross-reference with game entities:**\n   - Check src/types.nim for all entity/unit types\n   - Check src/registry.nim for building types\n   - Identify any entities without corresponding art\n\n3. **Document the asset generation workflow:**\n   - How to use scripts/generate_assets.py\n   - Google Cloud / Vertex API authentication setup\n   - Required environment variables (GOOGLE_API_KEY or gcloud ADC)\n   - Example prompts for different asset types\n\n4. **Create beads for missing assets:**\n   - One bead per missing asset or asset category\n   - Include prompt suggestions based on existing style\n\n## Known Missing (from existing beads)\n- tv-19cx: Bear/wolf placeholder sprites need dedicated assets\n\n## Output\n- List of missing assets\n- Authentication documentation\n- Recommended prompts for generation","status":"closed","priority":2,"issue_type":"task","assignee":"tribal_village/crew/artist","owner":"richard@relh.net","created_at":"2026-01-25T15:18:42.751023551-08:00","created_by":"mayor","updated_at":"2026-01-25T15:22:16.684684075-08:00","closed_at":"2026-01-25T15:22:16.684684075-08:00","close_reason":"Completed: Audited assets, documented findings in asset_pipeline.md, updated prompts.tsv, created beads tv-wisp-oip8 (bear), tv-wisp-ihxq (wolf), tv-wisp-nt7q (cow). Commit 3e04927."}
{"id":"tv-wisp-5uv","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-ch8           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-ch8\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T09:45:39.632495932-08:00","updated_at":"2026-01-25T09:46:17.918933696-08:00","ephemeral":true}
{"id":"tv-wisp-5yau","title":"Merge and push to main","description":"Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send \u003crig\u003e/witness -s \"MERGED \u003cpolecat-name\u003e\" -m \"Branch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"\u003cissue-id\u003e\"\n# OR verify the commit SHA is on main:\ngit branch --contains \u003ccommit-sha\u003e | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close \u003cmr-bead-id\u003e --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep \u003cpolecat-name\u003e\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive \u003cmerge-ready-message-id\u003e\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete \u003cpolecat-branch\u003e\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:09:10.218754755-08:00","updated_at":"2026-01-25T13:09:10.218754795-08:00","dependencies":[{"issue_id":"tv-wisp-5yau","depends_on_id":"tv-wisp-506w","type":"parent-child","created_at":"2026-01-25T13:09:10.281506697-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-62v8","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-jhet should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:11:45.973588231-08:00","updated_at":"2026-01-25T13:11:45.973588281-08:00","ephemeral":true}
{"id":"tv-wisp-66r0","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-aqx           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-aqx\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:31.210434512-08:00","updated_at":"2026-01-25T13:15:11.368349321-08:00","closed_at":"2026-01-25T13:15:11.368349321-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-6e991","title":"Re-implement biome type in agent observations on new spawn.nim","description":"attached_molecule: tv-wisp-wisp-cj2u\nattached_at: 2026-01-26T04:07:38Z\ndispatched_by: mayor\n\nThe previous implementation conflicted with spawn.nim refactor. Re-implement exposing biome type in agent observations, using the new refactored spawn.nim helpers.","notes":"Implemented: Added BiomeLayer to ObservationName enum in types.nim and populated biome type in agent observations via writeTileObs in environment.nim","status":"closed","priority":1,"issue_type":"feature","assignee":"tribal_village/polecats/cheedo","owner":"richard@relh.net","created_at":"2026-01-25T20:06:17.140174871-08:00","created_by":"mayor","updated_at":"2026-01-25T20:21:41.714350951-08:00","closed_at":"2026-01-25T20:21:41.714350951-08:00","close_reason":"Closed","labels":["aoe2","reimpl"],"dependencies":[{"issue_id":"tv-wisp-6e991","depends_on_id":"tv-wisp-wisp-cj2u","type":"blocks","created_at":"2026-01-25T20:07:36.751307869-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-6no","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T09:42:54.449797394-08:00","updated_at":"2026-01-25T09:45:35.984577897-08:00","closed_at":"2026-01-25T09:45:35.984577897-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-6no","depends_on_id":"tv-wisp-g5l","type":"blocks","created_at":"2026-01-25T09:42:54.465875784-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-6ujx","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-ch8\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-ch8 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:51.190446445-08:00","updated_at":"2026-01-25T13:20:56.078277607-08:00","closed_at":"2026-01-25T13:20:56.078277607-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-6ujx","depends_on_id":"tv-wisp-0brh","type":"blocks","created_at":"2026-01-25T13:13:51.409511451-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-6x3m","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-aqx should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:31.212608855-08:00","updated_at":"2026-01-25T13:24:25.395400418-08:00","closed_at":"2026-01-25T13:24:25.395400418-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-746p","title":"Add attack-move command for military units","description":"attached_molecule: tv-wisp-wisp-7urn\nattached_at: 2026-01-26T01:44:39Z\ndispatched_by: mayor\n\nMilitary units should support attack-move command, like AoE2.\n\n**Current:** Units either move or attack, not both\n**Desired:** Attack-move: move to destination, attacking any enemies along the way\n\nImplementation:\n- Add attack-move action\n- Unit paths to destination\n- If enemy encountered, engage and fight\n- After combat, resume path to destination\n- Essential for army movement across map","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:14:48.740579297-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:11.12591318-08:00","dependencies":[{"issue_id":"tv-wisp-746p","depends_on_id":"tv-wisp-wisp-7urn","type":"blocks","created_at":"2026-01-25T17:44:39.275957515-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-7e5","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/\u003cbranch\u003e`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"\u003csource_issue\u003e\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T09:42:48.892244549-08:00","updated_at":"2026-01-25T09:42:48.892244589-08:00","ephemeral":true}
{"id":"tv-wisp-7fm","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-ch8\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T09:45:39.634926753-08:00","updated_at":"2026-01-25T09:45:39.634926793-08:00","dependencies":[{"issue_id":"tv-wisp-7fm","depends_on_id":"tv-wisp-nmb","type":"blocks","created_at":"2026-01-25T09:45:39.654568318-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-7i83","title":"Merge: tv-cbg","description":"branch: polecat/toast-mkuldmli\ntarget: main\nsource_issue: tv-cbg\nrig: tribal_village\nworker: toast\nagent_bead: tv-tribal_village-polecat-toast\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T19:22:59.741630102-08:00","created_by":"tribal_village/polecats/toast","updated_at":"2026-01-25T20:02:14.489933242-08:00","closed_at":"2026-01-25T20:02:14.489935376-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-7ro","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-agd).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-agd\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:17:45.128789773-08:00","updated_at":"2026-01-25T10:17:45.128789823-08:00","dependencies":[{"issue_id":"tv-wisp-7ro","depends_on_id":"tv-wisp-bhv","type":"parent-child","created_at":"2026-01-25T10:17:45.135543856-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-7ro","depends_on_id":"tv-wisp-81w","type":"blocks","created_at":"2026-01-25T10:17:45.15007052-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-7uh","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-1ep\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-24T23:17:49.475786919-08:00","updated_at":"2026-01-24T23:27:39.623537743-08:00","dependencies":[{"issue_id":"tv-wisp-7uh","depends_on_id":"tv-wisp-iyu","type":"blocks","created_at":"2026-01-24T23:17:49.490191274-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-7vgfv","title":"Digest: mol-refinery-patrol","description":"Patrol: merged 4 branches (tv-oqe, tv-kh38, tv-ynta, tv-r1ix), all tests passed, no conflicts","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T22:50:13.49670691-08:00","updated_at":"2026-01-25T22:50:13.49670691-08:00","closed_at":"2026-01-25T22:50:13.496658411-08:00","close_reason":"Squashed from 11 wisps","dependencies":[{"issue_id":"tv-wisp-7vgfv","depends_on_id":"tv-wisp-wisp-2poqt","type":"parent-child","created_at":"2026-01-25T22:50:13.497890215-08:00","created_by":"tribal_village/refinery"}]}
{"id":"tv-wisp-7xtw","title":"Add Lumber Camp drop-off upgrade","description":"attached_molecule: tv-wisp-wisp-hl8l\nattached_at: 2026-01-26T04:20:10Z\ndispatched_by: mayor\n\nImplement AoE2-style lumber camp upgrades. Double-bit axe, bow saw, two-man saw. Each upgrade increases wood gathering rate.","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:18:56.833767631-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:23.350855346-08:00","labels":["aoe2","economy"],"dependencies":[{"issue_id":"tv-wisp-7xtw","depends_on_id":"tv-wisp-wisp-hl8l","type":"blocks","created_at":"2026-01-25T20:20:09.419557433-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-81w","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-agd\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:17:45.128513799-08:00","updated_at":"2026-01-25T10:17:45.128513859-08:00","dependencies":[{"issue_id":"tv-wisp-81w","depends_on_id":"tv-wisp-bhv","type":"parent-child","created_at":"2026-01-25T10:17:45.133509473-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-81w","depends_on_id":"tv-wisp-cuq","type":"blocks","created_at":"2026-01-25T10:17:45.147960185-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-8dj","title":"Burn and respawn or loop","description":"End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:17:49.507342737-08:00","updated_at":"2026-01-25T10:17:49.507342777-08:00","ephemeral":true}
{"id":"tv-wisp-8z2q","title":"Add team/civilization asymmetry modifiers","description":"attached_molecule: tv-wisp-wisp-kdbr\nattached_at: 2026-01-26T01:41:56Z\ndispatched_by: mayor\n\nImplement team-specific modifiers for gather rates, build costs, and unit stats, like AoE2 civilizations.\n\n**Current:** All teams share identical stats\n**Desired:** Teams have small unique bonuses\n\nImplementation per docs/aoe2_design_investigation.md:\n```nim\ntype\n  TeamModifiers* = object\n    gatherRateMultiplier*: float32  # 1.0 = normal\n    buildCostMultiplier*: float32   # 1.0 = normal\n    unitHpBonus*: array[AgentUnitClass, int]\n    unitAttackBonus*: array[AgentUnitClass, int]\n```\n\nApply in:\n- src/environment.nim at addToStockpile() for gather rates\n- src/registry.nim at buildingTrainCosts() for build costs\n- src/environment.nim at applyUnitClass() for unit stats\n\nReference: docs/aoe2_design_plan.md section 6","notes":"Implemented: Added TeamModifiers type with gatherRateMultiplier, buildCostMultiplier, unitHpBonus, and unitAttackBonus. Modified addToStockpile() to apply gather multiplier, added applyUnitClass() overload for unit stat bonuses, added applyBuildCostMultiplier() helper. Safe defaults (0.0 treated as 1.0) for backwards compatibility.","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:14:45.139588133-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:24.138812702-08:00","dependencies":[{"issue_id":"tv-wisp-8z2q","depends_on_id":"tv-wisp-wisp-kdbr","type":"blocks","created_at":"2026-01-25T17:41:55.593422808-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-9gv","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-24T23:17:28.156485194-08:00","updated_at":"2026-01-24T23:28:30.887169791-08:00","dependencies":[{"issue_id":"tv-wisp-9gv","depends_on_id":"tv-wisp-9mt","type":"blocks","created_at":"2026-01-24T23:17:28.165687925-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-9mt","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-aqx should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T23:17:28.156286437-08:00","updated_at":"2026-01-24T23:17:28.156286488-08:00","dependencies":[{"issue_id":"tv-wisp-9mt","depends_on_id":"tv-wisp-dqs","type":"blocks","created_at":"2026-01-24T23:17:28.16523416-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-9pf","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-1ep\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T23:17:49.474294634-08:00","updated_at":"2026-01-24T23:20:14.958882054-08:00","closed_at":"2026-01-24T23:20:14.958882054-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-9pf","depends_on_id":"tv-wisp-vut","type":"blocks","created_at":"2026-01-24T23:17:49.483897811-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-adlp","title":"Merge: tv-wisp-1rmd","description":"branch: polecat/toast/tv-wisp-1rmd@mkubp1ql\ntarget: main\nsource_issue: tv-wisp-1rmd\nrig: tribal_village\nworker: toast\nagent_bead: tv-tribal_village-polecat-toast\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":0,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T14:47:44.086915126-08:00","created_by":"tribal_village/polecats/toast","updated_at":"2026-01-25T14:48:42.423434862-08:00","closed_at":"2026-01-25T14:48:42.423437086-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-adtt","title":"Merge: tv-2bk","description":"branch: polecat/valkyrie/tv-2bk@mkublb3y\ntarget: main\nsource_issue: tv-2bk\nrig: tribal_village\nworker: valkyrie\nagent_bead: tv-tribal_village-polecat-valkyrie\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"in_progress","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T14:53:41.177080213-08:00","created_by":"tribal_village/polecats/valkyrie","updated_at":"2026-01-25T14:58:09.574881122-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-ago5","title":"Add formation movement for military groups","description":"Groups of military units should maintain formation while moving, like AoE2.\n\n**Current:** Units move independently\n**Desired:** Selected units move as a group in formation\n\nFormations:\n- Line: Units spread horizontally\n- Box: Units form defensive square\n- Staggered: Ranged behind melee\n\nImplementation:\n- Group selection mechanic\n- Formation pathfinding\n- Note: Complex, may not suit RL training well\n\nReference: docs/aoe2_design_investigation.md - listed as lower priority","status":"open","priority":4,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:15:08.155889247-08:00","created_by":"mayor","updated_at":"2026-01-25T15:15:08.155889247-08:00"}
{"id":"tv-wisp-aoc76","title":"Merge: tv-oqe","description":"branch: polecat/nux/tv-oqe@mkusielx\ntarget: main\nsource_issue: tv-oqe\nrig: tribal_village\nworker: nux\nagent_bead: tv-tribal_village-polecat-nux\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T22:34:23.259788533-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:48:07.46560076-08:00","closed_at":"2026-01-25T22:48:07.46560076-08:00","close_reason":"Closed","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-at1s","title":"Add Dock naval units","description":"Implement AoE2-style dock and naval units. Fishing ship, transport ship, galley line, fire ship, demolition ship, cannon galleon.","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:19:50.34080856-08:00","created_by":"mayor","updated_at":"2026-01-25T19:19:50.34080856-08:00","labels":["aoe2","naval"]}
{"id":"tv-wisp-av0","title":"Handle test failures","description":"**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - Option A: Fix it yourself (you're the Engineer!)\n   - Option B: File a bead: bd create --type=bug --priority=1 --title=\"...\"\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Fix committed, OR\n- Bead filed for the failure\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T09:42:48.891547488-08:00","updated_at":"2026-01-25T09:42:48.891547518-08:00","ephemeral":true}
{"id":"tv-wisp-aw8","title":"Check for more work","description":"More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T09:42:48.89182796-08:00","updated_at":"2026-01-25T09:42:48.89182799-08:00","ephemeral":true}
{"id":"tv-wisp-b7p","title":"Merge: tv-c035","description":"branch: polecat/dementus/tv-c035@mku9nscn\ntarget: main\nsource_issue: tv-c035\nrig: tribal_village\nworker: dementus\nagent_bead: tv-tribal_village-polecat-dementus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"in_progress","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T13:54:02.142746722-08:00","created_by":"tribal_village/polecats/dementus","updated_at":"2026-01-25T14:23:04.08312563-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-b8sl","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:11:45.974019968-08:00","updated_at":"2026-01-25T13:11:45.974019998-08:00","dependencies":[{"issue_id":"tv-wisp-b8sl","depends_on_id":"tv-wisp-62v8","type":"blocks","created_at":"2026-01-25T13:11:46.134258012-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-bhtr9","title":"Merge: tv-r1ix","description":"branch: polecat/rictus/tv-r1ix@mkusjvrk\ntarget: main\nsource_issue: tv-r1ix\nrig: tribal_village\nworker: rictus\nagent_bead: tv-tribal_village-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T22:38:11.286415039-08:00","created_by":"tribal_village/polecats/rictus","updated_at":"2026-01-25T22:49:46.718079573-08:00","closed_at":"2026-01-25T22:49:46.718079573-08:00","close_reason":"Closed","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-bhv","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T10:17:45.127407215-08:00","updated_at":"2026-01-25T21:00:38.166593483-08:00","ephemeral":true}
{"id":"tv-wisp-c85p","title":"Add Scout line-of-sight exploration","description":"attached_molecule: tv-wisp-wisp-40l7\nattached_at: 2026-01-26T04:15:27Z\ndispatched_by: mayor\n\nImplement AoE2-style scout exploration. Scouts have extended line of sight. Auto-scout feature for automatic map exploration. Fog of war clearing.","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:18:38.447257105-08:00","created_by":"mayor","updated_at":"2026-01-25T22:25:58.725972318-08:00","labels":["aoe2","exploration"],"dependencies":[{"issue_id":"tv-wisp-c85p","depends_on_id":"tv-wisp-wisp-40l7","type":"blocks","created_at":"2026-01-25T20:15:26.207160098-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-c9ep","title":"Add Wonder victory condition","description":"Implement AoE2-style wonder victory. Building and defending a wonder for a set time wins the game. Wonder is expensive and visible to all.","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:20:03.262696141-08:00","created_by":"mayor","updated_at":"2026-01-25T19:20:03.262696141-08:00","labels":["aoe2","victory"]}
{"id":"tv-wisp-c9gp","title":"Merge: tv-wisp-38ac","description":"branch: polecat/rictus-mkulgysi\ntarget: main\nsource_issue: tv-wisp-38ac\nrig: tribal_village\nworker: rictus\nagent_bead: tv-tribal_village-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T19:21:19.501469744-08:00","created_by":"tribal_village/polecats/rictus","updated_at":"2026-01-25T20:02:14.214153774-08:00","closed_at":"2026-01-25T20:02:14.214156249-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-casu","title":"Builder: Add RepairBuilding OptionDef behavior","description":"Add the actual RepairBuilding behavior using OptionDef framework.\n\n**File:** src/scripted/builder.nim\n\n**Implementation:**\nFollow the existing OptionDef pattern in builder.nim:\n```nim\nlet RepairBuildingOption* = OptionDef(\n  name: \"RepairBuilding\",\n  canStart: canStartBuildingRepair,\n  tick: proc(env: Environment, agent: Agent): Action =\n    let target = findDamagedBuilding(env, agent)\n    if target.isNone:\n      return noopAction()\n    \n    let building = target.get\n    let dist = manhattanDistance(agent.pos, building.pos)\n    \n    if dist \u003c= 1:\n      # Adjacent to building - repair it\n      return repairAction(building)\n    else:\n      # Move toward building\n      return moveToward(agent, building.pos)\n  ,\n  priority: 60  # Higher than idle, lower than flee\n)\n```\n\nAdd to builder behavior tree with appropriate priority.\n\nThis is step 3 of BuildingRepair behavior.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T15:27:22.170106994-08:00","created_by":"mayor","updated_at":"2026-01-25T15:27:22.170106994-08:00"}
{"id":"tv-wisp-cg1c","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-aqx).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-aqx\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:31.211919887-08:00","updated_at":"2026-01-25T13:17:00.637761065-08:00","closed_at":"2026-01-25T13:17:00.637761065-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-csv","title":"Check refinery mail","description":"Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: \u003cbranch\u003e\n# Issue: \u003cissue-id\u003e\n# Polecat: \u003cpolecat-name\u003e\n# MR: \u003cmr-bead-id\u003e\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:17:49.505523936-08:00","updated_at":"2026-01-25T10:17:49.505523976-08:00","ephemeral":true}
{"id":"tv-wisp-cuq","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-agd           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-agd\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:17:45.128177712-08:00","updated_at":"2026-01-25T10:17:45.128177782-08:00","dependencies":[{"issue_id":"tv-wisp-cuq","depends_on_id":"tv-wisp-bhv","type":"parent-child","created_at":"2026-01-25T10:17:45.130765246-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-cvro","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-ch8)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-ch8\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:51.189087836-08:00","updated_at":"2026-01-25T13:19:27.749896945-08:00","closed_at":"2026-01-25T13:19:27.749896945-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-cvro","depends_on_id":"tv-wisp-mazm","type":"blocks","created_at":"2026-01-25T13:13:51.351097193-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-cx6z","title":"Add Mill farm queue system","description":"attached_molecule: tv-wisp-wisp-5nrw\nattached_at: 2026-01-26T04:21:15Z\ndispatched_by: mayor\n\nImplement AoE2-style farm queue. Farms can be queued at mill. When farmer finishes, next farm auto-reseeds if queued.","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:19:09.420112927-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:22.816376029-08:00","labels":["aoe2","economy"],"dependencies":[{"issue_id":"tv-wisp-cx6z","depends_on_id":"tv-wisp-wisp-5nrw","type":"blocks","created_at":"2026-01-25T20:21:15.01266672-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-d0fq","title":"Merge: tv-02pb","description":"branch: polecat/dag/tv-02pb@mkubkj5s\ntarget: main\nsource_issue: tv-02pb\nrig: tribal_village\nworker: dag\nagent_bead: tv-tribal_village-polecat-dag\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"in_progress","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T14:55:20.928599237-08:00","created_by":"tribal_village/polecats/dag","updated_at":"2026-01-25T14:58:09.473047586-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-d3r","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-ch8).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-ch8\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T09:45:39.633120953-08:00","updated_at":"2026-01-25T09:45:39.633121023-08:00","dependencies":[{"issue_id":"tv-wisp-d3r","depends_on_id":"tv-wisp-u7l","type":"blocks","created_at":"2026-01-25T09:45:39.647425558-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-d6jo","title":"Audit and refactor pathfinding.nim for code quality","description":"attached_molecule: tv-wisp-wisp-rah4\nattached_at: 2026-01-26T03:57:59Z\ndispatched_by: mayor\n\nReview pathfinding.nim for code quality: optimize algorithm clarity, reduce code duplication, improve variable naming, add documentation for complex algorithms.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T19:47:01.224846467-08:00","created_by":"mayor","updated_at":"2026-01-25T22:25:57.696569789-08:00","labels":["audit","cleanup"],"dependencies":[{"issue_id":"tv-wisp-d6jo","depends_on_id":"tv-wisp-wisp-rah4","type":"blocks","created_at":"2026-01-25T19:57:58.786435044-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-d8yb5","title":"Digest: mol-witness-patrol","description":"Patrol: No polecats, refinery running, deacon down.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T22:11:11.396753641-08:00","updated_at":"2026-01-25T22:11:11.396753641-08:00","closed_at":"2026-01-25T22:11:11.396713735-08:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"tv-wisp-d8yb5","depends_on_id":"tv-wisp-wisp-4serm","type":"parent-child","created_at":"2026-01-25T22:11:11.398644023-08:00","created_by":"tribal_village/witness"}]}
{"id":"tv-wisp-dc4ij","title":"Merge: tv-wisp-6e991","description":"branch: polecat/cheedo-mkunb0pv\ntarget: main\nsource_issue: tv-wisp-6e991\nrig: tribal_village\nworker: cheedo\nagent_bead: tv-tribal_village-polecat-cheedo\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T20:14:34.273808716-08:00","created_by":"tribal_village/polecats/cheedo","updated_at":"2026-01-25T21:55:44.984245035-08:00","closed_at":"2026-01-25T21:55:44.984245035-08:00","close_reason":"rejected: Branch does not exist on remote - stale MR","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-de6","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-1ep should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T23:17:49.474966363-08:00","updated_at":"2026-01-24T23:26:58.787974071-08:00","closed_at":"2026-01-24T23:26:58.787974071-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-de6","depends_on_id":"tv-wisp-dne","type":"blocks","created_at":"2026-01-24T23:17:49.486327112-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-dne","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-1ep)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-1ep\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T23:17:49.474757187-08:00","updated_at":"2026-01-24T23:26:16.579271551-08:00","closed_at":"2026-01-24T23:26:16.579271551-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-dne","depends_on_id":"tv-wisp-qws","type":"blocks","created_at":"2026-01-24T23:17:49.485502529-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-dqs","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-aqx)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-aqx\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T23:17:28.156078153-08:00","updated_at":"2026-01-24T23:28:20.766222492-08:00","closed_at":"2026-01-24T23:28:20.766222492-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-dtqk","title":"Add Town Bell recall mechanic","description":"attached_molecule: tv-wisp-wisp-f2ka\nattached_at: 2026-01-26T01:40:03Z\ndispatched_by: mayor\n\nTown Center should have ability to recall nearby villagers for protection, like AoE2.\n\n**Current:** No recall mechanic\n**Desired:** Town Bell action recalls villagers to garrison in TC\n\nImplementation:\n- Add special action for Town Center\n- When activated, nearby villagers (within radius) path to TC\n- Villagers auto-garrison if garrison mechanic exists\n- Useful for quick defense against raids\n\nReference: docs/aoe2_design_investigation.md section 2.2","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:14:20.733723458-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:24.938947444-08:00","dependencies":[{"issue_id":"tv-wisp-dtqk","depends_on_id":"tv-wisp-wisp-f2ka","type":"blocks","created_at":"2026-01-25T17:40:02.469643472-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-e0al","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T13:09:05.821211222-08:00","updated_at":"2026-01-25T13:09:05.821211262-08:00","ephemeral":true}
{"id":"tv-wisp-e6p3","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-xt5w\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:36:54.61596385-08:00","updated_at":"2026-01-25T13:36:54.61596391-08:00","dependencies":[{"issue_id":"tv-wisp-e6p3","depends_on_id":"tv-wisp-hubs","type":"blocks","created_at":"2026-01-25T13:36:54.844769013-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-ecn6","title":"Merge: tv-wisp-xlji","description":"branch: polecat/nux-mkufpuw0\ntarget: main\nsource_issue: tv-wisp-xlji\nrig: tribal_village\nworker: nux\nagent_bead: tv-tribal_village-polecat-nux\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T16:40:30.065968129-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T16:46:59.542060323-08:00","closed_at":"2026-01-25T16:46:59.542062207-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-ees2","title":"Merge: tv-96g","description":"branch: polecat/capable/tv-96g@mkubjrrw\ntarget: main\nsource_issue: tv-96g\nrig: tribal_village\nworker: capable\nagent_bead: tv-tribal_village-polecat-capable\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"in_progress","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T14:44:42.268352638-08:00","created_by":"tribal_village/polecats/capable","updated_at":"2026-01-25T14:49:41.452699473-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-eov5","title":"Add University research system","description":"attached_molecule: tv-wisp-wisp-wv5q\nattached_at: 2026-01-26T01:41:11Z\ndispatched_by: mayor\n\nUniversity should support research for economic and defensive upgrades, like AoE2.\n\n**Current:** University only crafts items\n**Desired:** University can research upgrades (ballistics, masonry, etc.)\n\nImplementation:\n- Add research queue to University\n- Research options: Ballistics (archer accuracy), Masonry (building HP), Murder Holes (no min range)\n- Each research costs resources and time\n- Apply effects team-wide\n\nReference: docs/aoe2_design_investigation.md section 2.2","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:14:21.53888624-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:24.665400242-08:00","dependencies":[{"issue_id":"tv-wisp-eov5","depends_on_id":"tv-wisp-wisp-wv5q","type":"blocks","created_at":"2026-01-25T17:41:10.849695322-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-f1xp5","title":"Merge: tv-wisp-y1kfh","description":"branch: polecat/dag-mkunb1ww\ntarget: main\nsource_issue: tv-wisp-y1kfh\nrig: tribal_village\nworker: dag\nagent_bead: tv-tribal_village-polecat-dag\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T20:18:46.0209994-08:00","created_by":"tribal_village/polecats/dag","updated_at":"2026-01-25T21:55:51.765986817-08:00","closed_at":"2026-01-25T21:55:51.765986817-08:00","close_reason":"rejected: Branch does not exist on remote - stale MR","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-fb8m","title":"Builder: Add canStartBuildingRepair condition","description":"Add condition check for when builder should start repairing.\n\n**File:** src/scripted/builder.nim\n\n**Implementation:**\n```nim\nproc canStartBuildingRepair*(env: Environment, agent: Agent): bool =\n  ## Check if builder can start repairing a building\n  # Must have a damaged building nearby\n  let damaged = findDamagedBuilding(env, agent)\n  if damaged.isNone:\n    return false\n  \n  # Should not be in immediate danger\n  let nearbyEnemies = countNearbyEnemies(env, agent, radius=5)\n  if nearbyEnemies \u003e 0:\n    return false  # Use flee behavior instead\n  \n  # Check if we have resources for repair (if required)\n  # ... resource check logic\n  \n  return true\n```\n\nThis is step 2 of BuildingRepair behavior.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T15:27:21.263690428-08:00","created_by":"mayor","updated_at":"2026-01-25T15:27:21.263690428-08:00"}
{"id":"tv-wisp-fcfh","title":"Merge: tv-wisp-oyub","description":"branch: polecat/rictus-mkui7g50\ntarget: main\nsource_issue: tv-wisp-oyub\nrig: tribal_village\nworker: rictus\nagent_bead: tv-tribal_village-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T17:56:54.427628799-08:00","created_by":"tribal_village/polecats/rictus","updated_at":"2026-01-25T20:02:16.342814073-08:00","closed_at":"2026-01-25T20:02:16.342815997-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-fid5","title":"Add Stable cavalry units","description":"Implement AoE2-style stable cavalry. Scout cavalry line, knight line, camel line. Each with upgrade paths and counter relationships.","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:19:22.097191457-08:00","created_by":"mayor","updated_at":"2026-01-25T19:19:22.097191457-08:00","labels":["aoe2","military"]}
{"id":"tv-wisp-g0yx","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T13:08:56.126968651-08:00","updated_at":"2026-01-25T13:08:56.126968701-08:00","ephemeral":true}
{"id":"tv-wisp-g1xr","title":"Merge: tv-wisp-zngh","description":"branch: polecat/rictus-mkufq7yk\ntarget: main\nsource_issue: tv-wisp-zngh\nrig: tribal_village\nworker: rictus\nagent_bead: tv-tribal_village-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"in_progress","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T16:41:26.030139678-08:00","created_by":"tribal_village/polecats/rictus","updated_at":"2026-01-25T16:46:59.752233117-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-g2m05","title":"Merge: tv-wisp-395fz","description":"branch: polecat/capable-mkunazhj\ntarget: main\nsource_issue: tv-wisp-395fz\nrig: tribal_village\nworker: capable\nagent_bead: tv-tribal_village-polecat-capable\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T20:18:59.03619785-08:00","created_by":"tribal_village/polecats/capable","updated_at":"2026-01-25T21:55:52.252908587-08:00","closed_at":"2026-01-25T21:55:52.252908587-08:00","close_reason":"rejected: Branch does not exist on remote - stale MR","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-g5l","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T09:42:54.44953655-08:00","updated_at":"2026-01-25T09:45:09.153932787-08:00","closed_at":"2026-01-25T09:45:09.153932787-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-g5l","depends_on_id":"tv-wisp-00k","type":"blocks","created_at":"2026-01-25T09:42:54.464971019-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-gc5x","title":"Fighter: Add evaluateEscapeRoute helper","description":"attached_molecule: tv-wisp-wisp-inif\nattached_at: 2026-01-25T23:29:48Z\ndispatched_by: mayor\n\nAdd a helper function to evaluate escape routes when retreating.\n\n**File:** src/scripted/fighter.nim\n\n**Implementation:**\n```nim\nproc evaluateEscapeRoute*(env: Environment, agent: Agent, direction: Direction): float =\n  ## Score an escape route - higher is better\n  var score = 0.0\n  let targetPos = agent.pos + directionToOffset(direction)\n  \n  # Penalize routes toward enemies\n  for enemy in env.getEnemiesInRange(agent, 10):\n    let distToEnemy = manhattanDistance(targetPos, enemy.pos)\n    if distToEnemy \u003c manhattanDistance(agent.pos, enemy.pos):\n      score -= 10.0  # Moving toward enemy\n    else:\n      score += 5.0   # Moving away from enemy\n  \n  # Bonus for routes toward allies\n  for ally in env.getAlliesInRange(agent, 10):\n    if manhattanDistance(targetPos, ally.pos) \u003c manhattanDistance(agent.pos, ally.pos):\n      score += 3.0\n  \n  return score\n```\n\nThis is step 1 of tactical retreat.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T15:27:02.139942111-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:10.253270855-08:00","dependencies":[{"issue_id":"tv-wisp-gc5x","depends_on_id":"tv-wisp-wisp-9umu","type":"blocks","created_at":"2026-01-25T15:29:48.275852245-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-gc5x","depends_on_id":"tv-wisp-wisp-inif","type":"blocks","created_at":"2026-01-25T16:07:19.452224472-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-gddu","title":"Add idle villager detection and indicator","description":"attached_molecule: tv-wisp-wisp-l96l\nattached_at: 2026-01-26T01:46:58Z\ndispatched_by: mayor\n\nTrack and highlight idle villagers, like AoE2's idle villager button.\n\n**Current:** No idle detection\n**Desired:** System tracks villagers not performing any task\n\nImplementation:\n- Track agent state (working, moving, idle)\n- Villager is idle if: not gathering, not building, not moving, not fighting\n- Add indicator/flag to observations for idle villagers\n- Useful for RL agents to identify inefficiency","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:14:49.926087923-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:10.856901422-08:00","dependencies":[{"issue_id":"tv-wisp-gddu","depends_on_id":"tv-wisp-wisp-l96l","type":"blocks","created_at":"2026-01-25T17:46:57.845863264-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-gt4","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-aqx\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T23:17:28.157071077-08:00","updated_at":"2026-01-24T23:17:28.157071137-08:00","dependencies":[{"issue_id":"tv-wisp-gt4","depends_on_id":"tv-wisp-h2t","type":"blocks","created_at":"2026-01-24T23:17:28.167095394-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-gvv3","title":"Add villager combat capability (last resort fighting)","description":"attached_molecule: tv-wisp-wisp-kic6\nattached_at: 2026-01-26T01:48:30Z\ndispatched_by: mayor\n\nVillagers should have basic combat ability for self-defense, like AoE2.\n\n**Current:** Unclear if villagers can fight back\n**Desired:** Villagers have weak attack for emergencies\n\nImplementation:\n- Villagers have low attack value (1-2 damage)\n- Short attack range (melee)\n- Should flee when possible (see builder/gatherer flee)\n- Only fight when cornered or defending building","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:15:09.341938999-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:23.894074126-08:00","dependencies":[{"issue_id":"tv-wisp-gvv3","depends_on_id":"tv-wisp-wisp-kic6","type":"blocks","created_at":"2026-01-25T17:48:29.854639717-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-h2t","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-aqx\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-aqx --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T23:17:28.156869675-08:00","updated_at":"2026-01-24T23:17:28.156869735-08:00","dependencies":[{"issue_id":"tv-wisp-h2t","depends_on_id":"tv-wisp-49j","type":"blocks","created_at":"2026-01-24T23:17:28.166623797-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-h2uu","title":"Fighter: Add countNearbyAllies helper function","description":"attached_molecule: tv-wisp-wisp-jocg\nattached_at: 2026-01-25T23:29:30Z\ndispatched_by: mayor\n\nAdd a helper function to count nearby allied fighters.\n\n**File:** src/scripted/fighter.nim\n\n**Implementation:**\n```nim\nproc countNearbyAllies*(env: Environment, agent: Agent, radius: int = 5): int =\n  ## Count allied fighters within radius\n  for other in env.agents:\n    if other.team == agent.team and other.id != agent.id:\n      if other.unitClass in {Fighter, Knight, Scout}:\n        if manhattanDistance(agent.pos, other.pos) \u003c= radius:\n          result += 1\n```\n\nThis is step 1 of group combat tactics - just add the helper function.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T15:26:45.024211557-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:10.528148498-08:00","dependencies":[{"issue_id":"tv-wisp-h2uu","depends_on_id":"tv-wisp-wisp-87al","type":"blocks","created_at":"2026-01-25T15:29:30.030615351-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-h2uu","depends_on_id":"tv-wisp-wisp-jocg","type":"blocks","created_at":"2026-01-25T16:07:10.269818349-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-h84a","title":"Merge: hq-d0p6","description":"branch: polecat/rictus/hq-d0p6@mkubbqbp\ntarget: main\nsource_issue: hq-d0p6\nrig: tribal_village\nworker: rictus\nagent_bead: tv-tribal_village-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T16:12:38.77778416-08:00","created_by":"tribal_village/polecats/rictus","updated_at":"2026-01-25T16:32:14.306716975-08:00","closed_at":"2026-01-25T16:32:14.306719099-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-hubs","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-xt5w\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-xt5w --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:36:54.615631032-08:00","updated_at":"2026-01-25T13:36:54.615631092-08:00","ephemeral":true}
{"id":"tv-wisp-hzya","title":"Test failure: OverflowDefect in findNearestThingSpatial","description":"Pre-existing test failure in ai_harness test 'task hearts uses magma when carrying gold'.\n\nStack trace:\n- ai_defaults.nim(932) decideAction\n- ai_defaults.nim(674) tryPrioritizeHearts\n- ai_core.nim(187) findNearestThing\n- spatial_index.nim(101) findNearestThingSpatial\n\nError: Unhandled exception: over- or underflow [OverflowDefect]\n\nThe spatial index's findNearestThingSpatial function is encountering an overflow condition when trying to find nearest magma.","status":"open","priority":2,"issue_type":"bug","owner":"richard@relh.net","created_at":"2026-01-25T14:40:56.720571137-08:00","created_by":"tribal_village/polecats/valkyrie","updated_at":"2026-01-25T14:40:56.720571137-08:00"}
{"id":"tv-wisp-i3qx","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-xt5w should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:36:54.614405545-08:00","updated_at":"2026-01-25T13:36:54.614405615-08:00","dependencies":[{"issue_id":"tv-wisp-i3qx","depends_on_id":"tv-wisp-nh1s","type":"blocks","created_at":"2026-01-25T13:36:54.786879168-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-ihxq","title":"Generate oriented wolf sprites (8 directions)","description":"Generate wolf sprites for all 8 directions (n, s, e, w, ne, nw, se, sw).\n\n## Context\n- Prompts updated in data/prompts/assets.tsv line 25 to use oriented {dir} format\n- Currently no wolf sprites exist in data/oriented/\n- Wolf is defined in registry.nim with spriteKey 'oriented/wolf'\n\n## Commands\n```bash\n# Ensure GOOGLE_API_KEY is set\nexport GOOGLE_API_KEY=your_key_here\n\n# Generate all 8 directions\npython scripts/generate_assets.py --oriented --postprocess --postprocess-purple-bg --only 'oriented/wolf.{dir}.png'\n```\n\n## Acceptance Criteria\n- 8 PNG files created: wolf.n.png, wolf.s.png, wolf.e.png, wolf.w.png, wolf.ne.png, wolf.nw.png, wolf.se.png, wolf.sw.png\n- Sprites have transparent backgrounds\n- Consistent style matching existing unit sprites","status":"open","priority":2,"issue_type":"task","assignee":"tribal_village/crew/artist","owner":"richard@relh.net","created_at":"2026-01-25T15:21:13.403517639-08:00","created_by":"tribal_village/crew/artist","updated_at":"2026-01-25T15:21:13.403517639-08:00"}
{"id":"tv-wisp-iyu","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-1ep\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-1ep --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T23:17:49.475582642-08:00","updated_at":"2026-01-24T23:27:35.061311951-08:00","closed_at":"2026-01-24T23:27:35.061311951-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-j1jx","title":"Audit metta polecat PRs: verify CI/lint status","description":"attached_molecule: tv-wisp-wisp-7h8\nattached_at: 2026-01-25T22:52:54Z\ndispatched_by: mayor\n\nInvestigate metta rig polecat work to verify PRs are properly published and passing CI/lint.\n\nFocus ONLY on branches matching:\n- richard-*\n- relh-*\n- polecat/*\n\nFor each matching open PR:\n1. Check if PR exists and is OPEN (not draft)\n2. Check CI status (gh pr checks)\n3. Check if lint passes\n4. Report any PRs that are failing or stuck\n\nUse: gh pr list --repo Metta-AI/metta --state open --limit 50\nFilter to our branches only.\n\nOutput a summary table of PR status.","status":"in_progress","priority":2,"issue_type":"task","assignee":"metta/polecats/chrome","owner":"richard@relh.net","created_at":"2026-01-25T14:52:23.927145093-08:00","created_by":"mayor","updated_at":"2026-01-25T14:55:08.222672368-08:00","dependencies":[{"issue_id":"tv-wisp-j1jx","depends_on_id":"tv-wisp-wisp-7h8","type":"blocks","created_at":"2026-01-25T14:52:54.122739527-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-j7ol","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-jhet\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:09:05.823535084-08:00","updated_at":"2026-01-25T13:09:05.823535124-08:00","dependencies":[{"issue_id":"tv-wisp-j7ol","depends_on_id":"tv-wisp-e0al","type":"parent-child","created_at":"2026-01-25T13:09:05.912269759-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-jbe","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-ch8 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T09:45:39.633933237-08:00","updated_at":"2026-01-25T09:45:39.633933277-08:00","dependencies":[{"issue_id":"tv-wisp-jbe","depends_on_id":"tv-wisp-5gp","type":"blocks","created_at":"2026-01-25T09:45:39.649724871-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-jnik","title":"Add patrol behavior for military units","description":"attached_molecule: tv-wisp-wisp-do23\nattached_at: 2026-01-26T01:45:00Z\ndispatched_by: mayor\n\nMilitary units should support patrol command to walk between waypoints and attack enemies, like AoE2.\n\n**Current:** No patrol mechanic\n**Desired:** Units can patrol between two points, attacking enemies encountered\n\nImplementation:\n- Add patrol action with start/end waypoints\n- Unit walks back and forth between points\n- Attacks any enemy encountered along patrol route\n- Useful for perimeter defense and scouting","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:14:47.852656756-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:11.390579459-08:00","dependencies":[{"issue_id":"tv-wisp-jnik","depends_on_id":"tv-wisp-wisp-do23","type":"blocks","created_at":"2026-01-25T17:44:59.521092549-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-jz054","title":"Resolve spawn.nim conflict for Mangonel AoE PR","description":"Rebase polecat/rictus-mkuhn64r branch to resolve spawn.nim conflicts with main. Keep both sets of changes - the Mangonel AoE feature and any new main changes.","status":"closed","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T20:03:28.16043356-08:00","created_by":"mayor","updated_at":"2026-01-25T20:05:59.621281481-08:00","closed_at":"2026-01-25T20:05:59.621281481-08:00","close_reason":"Closed","labels":["conflict","merge"]}
{"id":"tv-wisp-k02r5","title":"Merge: tv-kh38","description":"branch: polecat/slit/tv-kh38@mkusir9s\ntarget: main\nsource_issue: tv-kh38\nrig: tribal_village\nworker: slit\nagent_bead: tv-tribal_village-polecat-slit\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T22:37:01.476624442-08:00","created_by":"tribal_village/polecats/slit","updated_at":"2026-01-25T22:48:46.722954537-08:00","closed_at":"2026-01-25T22:48:46.722954537-08:00","close_reason":"Closed","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-k0gj","title":"Audit and refactor step.nim for code quality","description":"attached_molecule: tv-wisp-wisp-oruc\nattached_at: 2026-01-26T03:47:54Z\ndispatched_by: mayor\n\nReview step.nim for code quality issues: reduce nesting depth, extract helper functions, remove dead code, improve variable names, add comments where logic is unclear. Focus on making code more readable and maintainable.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T19:46:42.489859667-08:00","created_by":"mayor","updated_at":"2026-01-25T22:25:58.472144745-08:00","labels":["audit","cleanup"],"dependencies":[{"issue_id":"tv-wisp-k0gj","depends_on_id":"tv-wisp-wisp-oruc","type":"blocks","created_at":"2026-01-25T19:47:53.855895565-08:00","created_by":"mayor"}],"comments":[{"id":4,"issue_id":"tv-wisp-k0gj","author":"tribal_village/polecats/auditor1","text":"Completed: Extracted 13 magic numbers into named constants (MillFertileCooldown, MaxTumorsPerSpawner, wildlife movement probabilities, temple cooldowns). Added organizational comments to const block. Previous refactoring commits (4adda41, b6d68e5) already extracted helper procs; this continues that work. Note: pre-existing compile error in spawn.nim (tv-wisp-5pvuv) prevents full test execution.","created_at":"2026-01-26T03:56:38Z"}]}
{"id":"tv-wisp-k0or","title":"Add Town Center garrison bonus","description":"attached_molecule: tv-wisp-wisp-hd5u\nattached_at: 2026-01-26T03:23:54Z\ndispatched_by: mayor\n\nImplement AoE2-style Town Center garrison. Villagers can garrison in TC for protection. Garrisoned units increase TC arrows. Town bell recalls all villagers to nearest TC.","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:18:18.749955079-08:00","created_by":"mayor","updated_at":"2026-01-25T22:25:59.509445131-08:00","labels":["aoe2","defense"],"dependencies":[{"issue_id":"tv-wisp-k0or","depends_on_id":"tv-wisp-wisp-hd5u","type":"blocks","created_at":"2026-01-25T19:23:53.574289411-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-k9ig","title":"Fighter: Add retreatTowardAllies behavior","description":"Modify retreat to prefer moving toward allied units, not just buildings.\n\n**File:** src/scripted/fighter.nim\n\n**Implementation:**\n```nim\nproc findRetreatTarget*(env: Environment, agent: Agent): Option[Position] =\n  ## Find best retreat target - allies first, then buildings\n  \n  # First try to find nearby allied fighters\n  var nearestAlly: Option[Agent]\n  var minDist = 999\n  for ally in env.agents:\n    if ally.team == agent.team and ally.id != agent.id:\n      if ally.unitClass in {Fighter, Knight}:\n        let dist = manhattanDistance(agent.pos, ally.pos)\n        if dist \u003c minDist and dist \u003e 2:  # Not too close\n          minDist = dist\n          nearestAlly = some(ally)\n  \n  if nearestAlly.isSome:\n    return some(nearestAlly.get.pos)\n  \n  # Fall back to defensive building\n  return findNearestDefensiveBuilding(env, agent)\n```\n\nThis is step 3 of tactical retreat.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T15:27:04.368733322-08:00","created_by":"mayor","updated_at":"2026-01-25T15:27:04.368733322-08:00"}
{"id":"tv-wisp-kb6v","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-jhet\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-jhet --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:11:45.974523799-08:00","updated_at":"2026-01-25T13:11:45.974523839-08:00","ephemeral":true}
{"id":"tv-wisp-kg5w","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-aqx\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:31.213687731-08:00","updated_at":"2026-01-25T13:27:06.558279975-08:00","dependencies":[{"issue_id":"tv-wisp-kg5w","depends_on_id":"tv-wisp-sucl","type":"blocks","created_at":"2026-01-25T13:13:31.460600546-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-kkmr","title":"Merge: tv-v0lg","description":"branch: polecat/dementus-mkuliqv7\ntarget: main\nsource_issue: tv-v0lg\nrig: tribal_village\nworker: dementus\nagent_bead: tv-tribal_village-polecat-dementus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T19:26:43.637970696-08:00","created_by":"tribal_village/polecats/dementus","updated_at":"2026-01-25T20:02:15.046533059-08:00","closed_at":"2026-01-25T20:02:15.046535734-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-l6qg","title":"Audit src/*.nim: file sizes, complexity, and organization","description":"dispatched_by: mayor\n\nComprehensive audit of tribal_village Nim source code.\n\n## Phase 1: File Inventory\n- Count all .nim files in src/\n- Measure lines of code per file\n- Identify stubby files (\u003c100 lines) that might merge\n- Identify omnibus files (\u003e1000 lines) that might split\n\n## Phase 2: Complexity Scan\n- Find functions \u003e50 lines\n- Find deeply nested code (\u003e3 levels)\n- Identify repeated patterns across files\n- Look for overly abstract indirection layers\n\n## Phase 3: Dependency Analysis\n- Map which files import which\n- Find circular dependencies\n- Identify single-use abstractions\n- Find dead/unused code\n\n## Phase 4: Create Refactoring Beads\nFor each issue found, create a bead with:\n- Problem description\n- File:line references\n- Suggested approach\n- Appropriate priority\n\n## Output\n- Summary report of findings\n- List of created refactoring beads\n- Recommendations for file reorganization","status":"closed","priority":2,"issue_type":"task","assignee":"tribal_village/crew/auditor","owner":"richard@relh.net","created_at":"2026-01-25T15:31:40.361042241-08:00","created_by":"mayor","updated_at":"2026-01-25T15:34:23.850155913-08:00","closed_at":"2026-01-25T15:34:23.850155913-08:00","close_reason":"Closed","comments":[{"id":2,"issue_id":"tv-wisp-l6qg","author":"tribal_village/crew/auditor","text":"\n## Audit Complete\n\n### Phase 1: File Inventory (30 files, 16,604 LOC)\n\n**Stubby files (\u003c100 lines):**\n- actions.nim (42), entropy.nim (46), agent_control.nim (89), placement.nim (98)\n- Verdict: NOT an issue - these are textual includes, not standalone modules\n\n**Omnibus files (\u003e1000 lines):**\n- options.nim (1056), ai_core.nim (1109), terrain.nim (1269), spawn.nim (1689), step.nim (2327)\n- Verdict: Real issues, created refactoring beads\n\n### Phase 2: Complexity Scan\n\n**Giant functions found:**\n- step* in step.nim: ~2230 lines (CRITICAL)\n- init() in spawn.nim: ~550 lines\n- generateRiver* in terrain.nim: ~565 lines\n\n**Deep nesting:**\n- step.nim: 57 lines at 10+ nesting, 217 at 8+, 712 at 6+\n- Max depth: ~20 levels in action handling\n\n### Phase 3: Dependency Analysis\n\n**Architecture uses include-based composition:**\n- environment.nim → ~5600 compiled lines\n- agent_control.nim → ~5800 compiled lines\n- No circular import issues (include pattern avoids this)\n\n### Phase 4: Refactoring Beads Created\n\n| ID | Title | Priority |\n|----|-------|----------|\n| tv-wisp-lvi4 | Refactor step.nim: Split giant step* function | P2 |\n| tv-wisp-rmos | Refactor spawn.nim: Break up init function | P2 |\n| tv-wisp-xlji | Refactor terrain.nim: Simplify generateRiver* | P2 |\n| tv-wisp-udcx | Document include-based architecture pattern | P3 |\n| tv-wisp-zngh | Reduce deep nesting in step.nim action handling | P3 |\n\n### Summary\n\nThe codebase is well-maintained with no dead code, no TODO/FIXME comments, and clean separation of concerns via includes. Main issues are concentrated in three very long functions that would benefit from extraction into smaller, focused procs.\n","created_at":"2026-01-25T23:34:19Z"}]}
{"id":"tv-wisp-ls8l","title":"Fix spatial index overflow in findNearestThingSpatial","description":"URGENT: Test failure on main branch.\n\n**Error:** over- or underflow [OverflowDefect]\n**Location:** src/spatial_index.nim:101 findNearestThingSpatial\n**Test:** 'task hearts uses magma when carrying gold'\n**Caused by:** commit 85a28d0 (tv-c035 spatial index)\n\nThe spatial index implementation has an overflow bug that needs immediate fix. Check array bounds and integer operations in findNearestThingSpatial.","status":"closed","priority":0,"issue_type":"bug","owner":"richard@relh.net","created_at":"2026-01-25T14:41:15.857767395-08:00","created_by":"mayor","updated_at":"2026-01-25T14:41:23.800870504-08:00","closed_at":"2026-01-25T14:41:23.800870504-08:00","close_reason":"Duplicate of tv-wisp-1rmd"}
{"id":"tv-wisp-lvi4","title":"Refactor step.nim: Split giant step* function (~2230 lines)","description":"dispatched_by: mayor\n\n## Problem\nsrc/step.nim has a single step* function spanning lines 54-2284 (~2230 lines).\nThis is the largest function in the codebase and violates maintainability guidelines.\n\n## Evidence\n- Function handles: tint decay, agent movement, combat, building updates, spawner logic, survival mechanics, observations\n- Contains deeply nested code (57 lines at 10+ nesting levels, 217 at 8+ levels)\n- Max nesting depth reaches ~20 levels\n\n## Suggested Approach\n1. Extract distinct phases into separate procs:\n   - stepDecayTints()\n   - stepAgentMovement()\n   - stepBuildingUpdates()\n   - stepSpawnerLogic()\n   - stepSurvivalMechanics()\n   - stepObservations()\n2. Keep step* as orchestrator calling phase functions\n3. Consider using templates for repeated patterns\n\n## Files\n- src/step.nim:54-2284","status":"closed","priority":2,"issue_type":"task","assignee":"tribal_village/crew/auditor","owner":"richard@relh.net","created_at":"2026-01-25T15:33:49.870038665-08:00","created_by":"tribal_village/crew/auditor","updated_at":"2026-01-25T16:37:49.047944742-08:00","closed_at":"2026-01-25T16:37:49.047944742-08:00","close_reason":"Closed","comments":[{"id":3,"issue_id":"tv-wisp-lvi4","author":"tribal_village/crew/auditor","text":"\n## Refactoring Complete - Phase 1\n\n### Changes Made\nExtracted 6 helper procedures from step* function:\n\n1. **stepDecayActionTints** (~25 lines) - Decay short-lived action tints\n2. **stepDecayShields** (~5 lines) - Decay shield countdown timers  \n3. **stepApplySurvivalPenalty** (~6 lines) - Apply per-step survival penalty\n4. **stepTryTowerAttack** (~36 lines) - Tower attack logic (was nested proc)\n5. **stepApplyTankAuras** (~26 lines) - ManAtArms/Knight aura tints\n6. **stepApplyMonkAuras** (~55 lines) - Monk aura tints and healing\n\n### Results\n- step* function reduced from ~2230 to ~2090 lines (~140 line reduction)\n- Build verified: `nim c -d:release src/ffi.nim` succeeds\n- All timing instrumentation preserved\n\n### Remaining Work (for future PRs)\nThe function is still large. Further extractions would require more extensive refactoring:\n\n1. **Action processing loop** (~1175 lines, lines 280-1440) - Contains nested procs and shared state\n2. **Things/building update loop** (~400 lines) - Uses local variables for tower removals\n3. **Tumor processing** (~100 lines) - Uses stepRng and shared sequences\n\nThese sections have tighter coupling that makes simple extraction less clean.\n\n### Commit\n2b43d2d - refactor(step): Extract helper procs from giant step* function\n","created_at":"2026-01-26T00:37:44Z"}]}
{"id":"tv-wisp-m1fr","title":"Add multiple builder construction speed bonus","description":"attached_molecule: tv-wisp-wisp-kb77\nattached_at: 2026-01-26T01:34:43Z\ndispatched_by: mayor\n\nMultiple villagers working on same construction should build faster, like AoE2.\n\n**Current:** No construction speed modifier for multiple builders\n**Desired:** 2+ villagers on same building = faster completion\n\nImplementation:\n- Track builders per construction site\n- Scale build progress by number of builders (diminishing returns)\n- Example: 2 builders = 1.5x speed, 3 builders = 1.8x speed\n\nReference: docs/aoe2_design_investigation.md section 2.1","notes":"Implemented AoE2-style multi-builder construction speed bonus. Player-built buildings start at hp=1 (under construction). Villagers can 'use' under-construction buildings to contribute. Multiple builders get diminishing returns bonus: 1=1.0x, 2=1.5x, 3=1.83x, 4=2.08x, etc. All existing tests pass.","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:14:18.437559369-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:18.277724491-08:00","dependencies":[{"issue_id":"tv-wisp-m1fr","depends_on_id":"tv-wisp-wisp-kb77","type":"blocks","created_at":"2026-01-25T17:34:42.324135088-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-mazm","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-ch8).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-ch8\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:51.188737371-08:00","updated_at":"2026-01-25T13:17:26.890301442-08:00","closed_at":"2026-01-25T13:17:26.890301442-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-mazm","depends_on_id":"tv-wisp-qiko","type":"blocks","created_at":"2026-01-25T13:13:51.336643774-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-mb3e","title":"Add Archery Range units","description":"Implement AoE2-style archery range. Archer line, skirmisher line, cavalry archer line, hand cannoneer. Each with upgrade paths.","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:19:28.50318608-08:00","created_by":"mayor","updated_at":"2026-01-25T19:19:28.50318608-08:00","labels":["aoe2","military"]}
{"id":"tv-wisp-mcdt8","title":"Digest: mol-witness-patrol","description":"Furiosa working on orphan recovery. Deacon still down. Refinery running. Inbox clean.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T22:31:03.837878338-08:00","updated_at":"2026-01-25T22:31:03.837878338-08:00","closed_at":"2026-01-25T22:31:03.837833334-08:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"tv-wisp-mcdt8","depends_on_id":"tv-wisp-wisp-6qovn","type":"parent-child","created_at":"2026-01-25T22:31:03.838879927-08:00","created_by":"tribal_village/witness"}]}
{"id":"tv-wisp-mvdk","title":"Merge: tv-wisp-8z2q","description":"branch: polecat/nux-mkui4inz\ntarget: main\nsource_issue: tv-wisp-8z2q\nrig: tribal_village\nworker: nux\nagent_bead: tv-tribal_village-polecat-nux\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T17:49:04.55964717-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T20:02:17.133084205-08:00","closed_at":"2026-01-25T20:02:17.13308705-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-n46q","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:31.212906441-08:00","updated_at":"2026-01-25T13:25:37.505850889-08:00","closed_at":"2026-01-25T13:25:37.505850889-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-n46q","depends_on_id":"tv-wisp-6x3m","type":"blocks","created_at":"2026-01-25T13:13:31.415689531-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-nank","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-ch8 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:51.189430547-08:00","updated_at":"2026-01-25T13:19:53.853988425-08:00","closed_at":"2026-01-25T13:19:53.853988425-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-nank","depends_on_id":"tv-wisp-cvro","type":"blocks","created_at":"2026-01-25T13:13:51.365722824-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-ne9","title":"Mechanical rebase","description":"Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/\u003cpolecat-branch\u003e\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2\u003e/dev/null \u0026\u0026 echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/\u003cpolecat-branch\u003e)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: \u003coriginal-issue-title\u003e\" --description=\"## Conflict Resolution Required\n\nOriginal MR: \u003cmr-bead-id\u003e\nBranch: \u003cpolecat-branch\u003e\nOriginal Issue: \u003cissue-id\u003e\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin \u003cbranch\u003e\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:17:49.505954319-08:00","updated_at":"2026-01-25T10:17:49.505954359-08:00","ephemeral":true}
{"id":"tv-wisp-nh1s","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-xt5w)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-xt5w\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T13:36:54.613979283-08:00","updated_at":"2026-01-25T13:36:54.613979343-08:00","dependencies":[{"issue_id":"tv-wisp-nh1s","depends_on_id":"tv-wisp-4393","type":"blocks","created_at":"2026-01-25T13:36:54.772875062-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-nl29","title":"Fighter: Add focus fire target selection","description":"Modify target selection to prefer targets already being attacked by allies.\n\n**File:** src/scripted/fighter.nim\n\n**Implementation:**\nModify findBestTarget or equivalent:\n```nim\nproc findFocusFireTarget*(env: Environment, agent: Agent): Option[Thing] =\n  ## Find a target that allies are already attacking\n  var bestTarget: Option[Thing]\n  var mostAttackers = 0\n  for enemy in env.getEnemiesInRange(agent, attackRange):\n    let attackers = countAlliesAttacking(env, agent, enemy)\n    if attackers \u003e mostAttackers:\n      mostAttackers = attackers\n      bestTarget = some(enemy)\n  if mostAttackers \u003e 0:\n    return bestTarget\n  # Fall back to normal target selection\n  return findNearestEnemy(env, agent)\n```\n\nThis is step 3 of group combat tactics.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T15:26:46.529019601-08:00","created_by":"mayor","updated_at":"2026-01-25T15:26:46.529019601-08:00"}
{"id":"tv-wisp-nmb","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-ch8\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-ch8 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T09:45:39.634742375-08:00","updated_at":"2026-01-25T09:45:39.634742405-08:00","ephemeral":true}
{"id":"tv-wisp-nt7q","title":"Generate oriented cow sprites (8 directions)","description":"Generate cow sprites for all 8 directions (n, s, e, w, ne, nw, se, sw).\n\n## Context\n- Prompts updated in data/prompts/assets.tsv line 23 to use oriented {dir} format\n- Currently only cow.png and cow.r.png exist (not proper directional variants)\n- Cow is defined in registry.nim with spriteKey 'oriented/cow'\n\n## Commands\n```bash\n# Ensure GOOGLE_API_KEY is set\nexport GOOGLE_API_KEY=your_key_here\n\n# Generate all 8 directions\npython scripts/generate_assets.py --oriented --postprocess --postprocess-purple-bg --only 'oriented/cow.{dir}.png'\n```\n\n## Acceptance Criteria\n- 8 PNG files created: cow.n.png, cow.s.png, cow.e.png, cow.w.png, cow.ne.png, cow.nw.png, cow.se.png, cow.sw.png\n- Sprites have transparent backgrounds\n- Consistent style matching existing unit sprites\n- Old cow.png and cow.r.png can be removed after verification","status":"open","priority":3,"issue_type":"task","assignee":"tribal_village/crew/artist","owner":"richard@relh.net","created_at":"2026-01-25T15:21:14.436011691-08:00","created_by":"tribal_village/crew/artist","updated_at":"2026-01-25T15:21:14.436011691-08:00"}
{"id":"tv-wisp-nxbl","title":"Add ballistics technology for archer accuracy","description":"Archers should gain improved accuracy after research, like AoE2 Ballistics.\n\n**Current:** Unclear if arrows have travel time or prediction\n**Desired:** Ballistics research makes projectiles predict target movement\n\nImplementation:\n- Add Ballistics research at University\n- Before: Arrows aim at current position\n- After: Arrows aim at predicted future position\n- Significantly improves archer effectiveness vs moving targets","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:15:12.903873519-08:00","created_by":"mayor","updated_at":"2026-01-25T15:15:12.903873519-08:00"}
{"id":"tv-wisp-nz3n","title":"Review and merge open tribal_village PRs","description":"attached_molecule: tv-wisp-wisp-uuf\nattached_at: 2026-01-25T22:43:48Z\ndispatched_by: mayor\n\nInvestigate and merge the open PRs for tribal_village. These can be auto-merged if CI passes.\n\nOpen PRs to review:\n- PR #3: feat: Add class-specific combat overlay colors (tv-ch8)\n- PR #4: feat: Add Builder flee behavior when enemies nearby (tv-3ns)\n- PR #5: feat: Add spatial index for O(1) nearest-thing queries (tv-c035)\n\nFor each PR:\n1. Check CI status (gh pr checks)\n2. If CI passes, merge it (gh pr merge --squash)\n3. If CI fails, note the failure and skip\n\nNote: PR #2 (tv-aqx) is already merged.\nNote: PR #5 (tv-c035) may have caused a test failure - check if there's a fix PR pending before merging.","status":"open","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T14:43:22.143197118-08:00","created_by":"mayor","updated_at":"2026-01-25T22:25:50.697734373-08:00","dependencies":[{"issue_id":"tv-wisp-nz3n","depends_on_id":"tv-wisp-wisp-uuf","type":"blocks","created_at":"2026-01-25T14:43:48.277463873-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-o168","title":"Add garrison mechanic for buildings","description":"attached_molecule: tv-wisp-wisp-9ksa\nattached_at: 2026-01-26T01:37:49Z\ndispatched_by: mayor\n\nUnits should be able to enter buildings for protection, like AoE2.\n\n**Current:** No garrison system\n**Desired:** Units can garrison inside buildings (TC, towers, castles)\n\nImplementation:\n- Add garrison capacity to buildings (TC=15, Tower=5, Castle=20)\n- Garrisoned units are protected (take no damage)\n- Buildings with archers garrisoned can attack\n- Units can ungarrison on command\n\nReference: docs/aoe2_design_investigation.md section 2.2","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:14:19.897695444-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:25.190683474-08:00","dependencies":[{"issue_id":"tv-wisp-o168","depends_on_id":"tv-wisp-wisp-9ksa","type":"blocks","created_at":"2026-01-25T17:37:48.419943484-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-o80q","title":"Merge: tv-wisp-m1fr","description":"branch: polecat/dementus-mkuhvi6z\ntarget: main\nsource_issue: tv-wisp-m1fr\nrig: tribal_village\nworker: dementus\nagent_bead: tv-tribal_village-polecat-dementus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T17:50:34.176730783-08:00","created_by":"tribal_village/polecats/dementus","updated_at":"2026-01-25T20:02:16.087999935-08:00","closed_at":"2026-01-25T20:02:16.088002309-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-oa56b","title":"Resolve spawn.nim conflict for builder speed bonus PR","description":"Rebase polecat/dementus-mkuhvi6z branch to resolve spawn.nim conflicts with main. Keep both sets of changes - the builder speed bonus feature and any new main changes.","status":"closed","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T20:03:30.507853729-08:00","created_by":"mayor","updated_at":"2026-01-25T20:06:00.305681259-08:00","closed_at":"2026-01-25T20:06:00.305681259-08:00","close_reason":"Closed","labels":["conflict","merge"]}
{"id":"tv-wisp-oip8","title":"Generate oriented bear sprites (8 directions)","description":"Generate bear sprites for all 8 directions (n, s, e, w, ne, nw, se, sw).\n\n## Context\n- Prompts updated in data/prompts/assets.tsv line 24 to use oriented {dir} format\n- Currently no bear sprites exist in data/oriented/\n- Bear is defined in registry.nim with spriteKey 'oriented/bear'\n\n## Commands\n```bash\n# Ensure GOOGLE_API_KEY is set\nexport GOOGLE_API_KEY=your_key_here\n\n# Generate all 8 directions\npython scripts/generate_assets.py --oriented --postprocess --postprocess-purple-bg --only 'oriented/bear.{dir}.png'\n```\n\n## Acceptance Criteria\n- 8 PNG files created: bear.n.png, bear.s.png, bear.e.png, bear.w.png, bear.ne.png, bear.nw.png, bear.se.png, bear.sw.png\n- Sprites have transparent backgrounds\n- Consistent style matching existing unit sprites","status":"open","priority":2,"issue_type":"task","assignee":"tribal_village/crew/artist","owner":"richard@relh.net","created_at":"2026-01-25T15:21:12.3074836-08:00","created_by":"tribal_village/crew/artist","updated_at":"2026-01-25T15:21:12.3074836-08:00"}
{"id":"tv-wisp-ow3z","title":"Add auto-reseed farm mechanic","description":"Farms should auto-reseed when depleted if resources available, like AoE2.\n\n**Current:** Unclear farm mechanics\n**Desired:** Farms auto-replant when food depleted\n\nImplementation:\n- Track farm food remaining\n- When depleted, check team stockpile for wood\n- If wood available, auto-rebuild farm\n- Villager continues gathering without player intervention","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:15:10.548959296-08:00","created_by":"mayor","updated_at":"2026-01-25T15:15:10.548959296-08:00"}
{"id":"tv-wisp-oyub","title":"Add unit stance modes (aggressive/defensive/stand ground)","description":"attached_molecule: tv-wisp-wisp-n3rx\nattached_at: 2026-01-26T01:45:09Z\ndispatched_by: mayor\n\nUnits should support stance modes that control their automatic behavior, like AoE2.\n\n**Current:** No stance system\n**Desired:** Units can be set to different stances\n\nStances:\n- Aggressive: Chase enemies, attack anything in sight\n- Defensive: Attack enemies in range, return to position\n- Stand Ground: Don't move, only attack what's in range\n- No Attack: Never auto-attack, useful for scouts\n\nImplementation:\n- Add stance field to Agent\n- Modify AI behavior trees to respect stance\n- Default to Defensive for military, No Attack for villagers","notes":"Implemented AgentStance enum (Aggressive/Defensive/StandGround/NoAttack), added stance field to agents, modified AI to respect stance (findAttackOpportunity, fighter behaviors), set defaults (NoAttack for villagers/monks, Defensive for military), added 4 new stance tests. All 57 tests pass.","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:14:46.459519355-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:11.694638443-08:00","dependencies":[{"issue_id":"tv-wisp-oyub","depends_on_id":"tv-wisp-wisp-n3rx","type":"blocks","created_at":"2026-01-25T17:45:08.849869136-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-p1qa","title":"Add Barracks infantry units","description":"Implement AoE2-style barracks infantry. Militia line, spearman line, eagle warrior line. Each with upgrade paths and counter relationships.","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:19:43.89297295-08:00","created_by":"mayor","updated_at":"2026-01-25T19:19:43.89297295-08:00","labels":["aoe2","military"]}
{"id":"tv-wisp-p5yr","title":"Audit and refactor spawn.nim for code quality","description":"attached_molecule: tv-wisp-wisp-hhw1\nattached_at: 2026-01-26T03:47:59Z\ndispatched_by: mayor\n\nReview spawn.nim for code quality issues: reduce complexity, extract reusable functions, improve error handling, clean up unused code paths. Make spawning logic clearer.","notes":"Implemented: Extracted 6 helper procs from initTeams to module level (placeStartingTownCenter, placeStartingRoads, placeStartingResourceBuildings, findResourceSpot, placeStartingResourceNodes, placeStartingHouses). Reduced initTeams complexity from ~504 to ~290 lines. Added docstrings to extracted procs. Code verified via nim check on ffi.nim.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T19:46:48.844787031-08:00","created_by":"mayor","updated_at":"2026-01-25T22:25:58.204743791-08:00","labels":["audit","cleanup"],"dependencies":[{"issue_id":"tv-wisp-p5yr","depends_on_id":"tv-wisp-wisp-hhw1","type":"blocks","created_at":"2026-01-25T19:47:58.918229276-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-pl03","title":"Merge: tv-uor5","description":"branch: polecat/nux-mkuhjpv4\ntarget: main\nsource_issue: tv-uor5\nrig: tribal_village\nworker: nux\nagent_bead: tv-tribal_village-polecat-nux\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T17:36:26.305405075-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T20:02:15.323962437-08:00","closed_at":"2026-01-25T20:02:15.32396422-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-po9op","title":"Review orphaned commits and recover valuable work","description":"Review the 26 orphaned commits found by 'gt orphans tribal_village'. For each commit:\n1. Check if the work was already merged to main (duplicate)\n2. Evaluate if the feature/fix is valuable and complete\n3. Cherry-pick valuable commits that aren't duplicates\n4. Create beads for any partially complete work that needs finishing\n\nKey orphaned commits to evaluate:\n- 2b0a01b3: Battering Ram AI (nux)\n- d38a2c11: Structure repair behavior for Builder (toast)\n- 860bd37c: Team/civilization asymmetry modifiers (nux)\n- e08cfe3a: Fix rng in spawn.nim (dementus)\n- 3e150918: Expose biome type in observations (furiosa)\n- 9d985c21: Resource priority weighting for gatherers (nux)\n- 1c30da87: Unit stance modes (rictus)\n- 106bd993: Multiple builder construction speed bonus (dementus)\n- 0bf30e75: Mangonel 1-tile side prong AoE (rictus)\n\nUse 'git show \u003csha\u003e' to review each commit. Use 'git cherry-pick \u003csha\u003e' to recover valuable ones.","status":"hooked","priority":1,"issue_type":"task","assignee":"tribal_village/furiosa","owner":"richard@relh.net","created_at":"2026-01-25T22:28:11.565040694-08:00","created_by":"mayor","updated_at":"2026-01-25T22:28:48.743807376-08:00"}
{"id":"tv-wisp-qiko","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-ch8\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:51.188380604-08:00","updated_at":"2026-01-25T13:16:20.714045292-08:00","closed_at":"2026-01-25T13:16:20.714045292-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-qiko","depends_on_id":"tv-wisp-ynor","type":"blocks","created_at":"2026-01-25T13:13:51.321808561-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-ql6qj","title":"Merge: tv-wisp-k0gj","description":"branch: polecat/auditor1-mkumm7ft\ntarget: main\nsource_issue: tv-wisp-k0gj\nrig: tribal_village\nworker: auditor1\nagent_bead: tv-tribal_village-polecat-auditor1\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T19:57:09.83647782-08:00","created_by":"tribal_village/polecats/auditor1","updated_at":"2026-01-25T20:02:16.883056402-08:00","closed_at":"2026-01-25T20:02:16.883059598-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-qqs","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-agd\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:17:45.130313103-08:00","updated_at":"2026-01-25T10:17:45.130313153-08:00","dependencies":[{"issue_id":"tv-wisp-qqs","depends_on_id":"tv-wisp-bhv","type":"parent-child","created_at":"2026-01-25T10:17:45.146229288-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-qqs","depends_on_id":"tv-wisp-1cy","type":"blocks","created_at":"2026-01-25T10:17:45.162048432-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-qws","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-1ep).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-1ep\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T23:17:49.474538243-08:00","updated_at":"2026-01-24T23:21:20.97451212-08:00","closed_at":"2026-01-24T23:21:20.97451212-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-qws","depends_on_id":"tv-wisp-9pf","type":"blocks","created_at":"2026-01-24T23:17:49.484692221-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-r9nlp","title":"Update tribal_village documentation based on analysis report","description":"Using the docs analysis report, update README.md and docs/ folder to: 1) Fix inaccuracies 2) Add missing feature documentation 3) Remove duplicative content 4) Improve organization and readability. Ensure docs accurately reflect current game mechanics.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T22:17:23.490593905-08:00","created_by":"mayor","updated_at":"2026-01-25T22:17:23.490593905-08:00","dependencies":[{"issue_id":"tv-wisp-r9nlp","depends_on_id":"tv-wisp-1au4h","type":"blocks","created_at":"2026-01-25T22:17:31.017371691-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-rmos","title":"Refactor spawn.nim: Break up init function (~550 lines)","description":"attached_molecule: tv-wisp-wisp-pij2\nattached_at: 2026-01-26T00:34:44Z\ndispatched_by: mayor\n\n## Problem\nsrc/spawn.nim has an init() function spanning lines 127-680 (~550 lines).\nWhile it has nested helper procs, the main body is still monolithic.\n\n## Evidence\n- 174 lines at 6+ nesting levels\n- 51 lines at 8+ nesting levels\n- Contains multiple distinct phases: terrain init, resource placement, building placement, agent spawning\n\n## Suggested Approach\n1. Extract phases into top-level procs:\n   - initTerrainAndBiomes()\n   - initResourceNodes()\n   - initStartingBuildings()\n   - initStartingAgents()\n   - initNeutralStructures()\n2. Pass env and rng explicitly\n3. Keep init() as simple orchestrator\n\n## Files\n- src/spawn.nim:127-680","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T15:33:50.925103541-08:00","created_by":"tribal_village/crew/auditor","updated_at":"2026-01-25T22:26:06.985433378-08:00","dependencies":[{"issue_id":"tv-wisp-rmos","depends_on_id":"tv-wisp-wisp-zble","type":"blocks","created_at":"2026-01-25T16:34:44.186090164-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-rmos","depends_on_id":"tv-wisp-wisp-pij2","type":"blocks","created_at":"2026-01-25T16:42:26.923255236-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-rr4ih","title":"Merge: tv-wisp-6e991","description":"branch: polecat/cheedo-mkunm6ny\ntarget: main\nsource_issue: tv-wisp-6e991\nrig: tribal_village\nworker: cheedo\nagent_bead: tv-tribal_village-polecat-cheedo\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T20:18:36.301824888-08:00","created_by":"tribal_village/polecats/cheedo","updated_at":"2026-01-25T21:55:51.287816045-08:00","closed_at":"2026-01-25T21:55:51.287816045-08:00","close_reason":"rejected: Branch does not exist on remote - stale MR","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-slts","title":"Merge: tv-v0lg","description":"branch: polecat/cheedo/tv-v0lg@mkubkx4l\ntarget: main\nsource_issue: tv-v0lg\nrig: tribal_village\nworker: cheedo\nagent_bead: tv-tribal_village-polecat-cheedo\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"in_progress","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T14:46:31.848001078-08:00","created_by":"tribal_village/polecats/cheedo","updated_at":"2026-01-25T14:49:41.56260157-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-sq74","title":"Fighter: Add retreatAwayFromBase logic","description":"When retreating, try to lead enemies away from base buildings.\n\n**File:** src/scripted/fighter.nim\n\n**Implementation:**\n```nim\nproc getRetreatDirectionAwayFromBase*(env: Environment, agent: Agent): Direction =\n  ## Get retreat direction that leads enemies away from base\n  let basePos = findTeamBaseCenter(env, agent.team)\n  var bestDir = North\n  var bestScore = -999.0\n  \n  for dir in allDirections:\n    let targetPos = agent.pos + directionToOffset(dir)\n    var score = evaluateEscapeRoute(env, agent, dir)\n    \n    # Bonus for leading away from base\n    if manhattanDistance(targetPos, basePos) \u003e manhattanDistance(agent.pos, basePos):\n      score += 8.0\n    \n    if score \u003e bestScore:\n      bestScore = score\n      bestDir = dir\n  \n  return bestDir\n```\n\nThis is step 2 of tactical retreat.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T15:27:02.975008723-08:00","created_by":"mayor","updated_at":"2026-01-25T15:27:02.975008723-08:00"}
{"id":"tv-wisp-sucl","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-aqx\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-aqx --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:31.213438545-08:00","updated_at":"2026-01-25T13:26:57.216406239-08:00","closed_at":"2026-01-25T13:26:57.216406239-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-u0xqr","title":"Digest: mol-witness-patrol","description":"Nuked 4 done polecats (furiosa, nux, rictus, slit). New furiosa spawned and working. Deacon still down (previously escalated). Refinery running. Inbox clean.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T22:29:40.186310577-08:00","updated_at":"2026-01-25T22:29:40.186310577-08:00","closed_at":"2026-01-25T22:29:40.186263569-08:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"tv-wisp-u0xqr","depends_on_id":"tv-wisp-wisp-uraue","type":"parent-child","created_at":"2026-01-25T22:29:40.187423874-08:00","created_by":"tribal_village/witness"}]}
{"id":"tv-wisp-u7l","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-ch8\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T09:45:39.632749421-08:00","updated_at":"2026-01-25T09:45:39.632749461-08:00","dependencies":[{"issue_id":"tv-wisp-u7l","depends_on_id":"tv-wisp-5uv","type":"blocks","created_at":"2026-01-25T09:45:39.646305733-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-udcx","title":"Document include-based architecture pattern","description":"\n## Observation\nThe codebase uses Nim's include directive extensively for code organization.\nThis is intentional and working well, not a problem to fix.\n\n## Architecture\nenvironment.nim (735 lines base) includes:\n- colors.nim (167), placement.nim (98), combat.nim (192)\n- tint.nim (209), connectivity.nim (162)\n- spawn.nim (1689), step.nim (2327)\nTotal compiled: ~5600 lines\n\nagent_control.nim (89 lines base) includes:\n- scripted/ai_core.nim (1109), scripted/ai_defaults.nim (962)\n- ai_defaults includes: options.nim, gatherer.nim, builder.nim, fighter.nim, roles.nim, evolution.nim\nTotal compiled: ~5800 lines\n\n## Recommendation\n- The 'stubby' files (actions.nim 42 lines, entropy.nim 46 lines, etc.) are NOT candidates for merging\n- They are textual includes designed to break up large logical units\n- Consider adding header comment to each included file noting its parent\n- Example: '# Included by environment.nim'\n\n## Files\n- All files using include directive (see list above)\n","status":"open","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T15:34:06.239455724-08:00","created_by":"tribal_village/crew/auditor","updated_at":"2026-01-25T15:34:06.239455724-08:00"}
{"id":"tv-wisp-umz","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-agd)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-agd\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T10:17:45.129046652-08:00","updated_at":"2026-01-25T10:17:45.129046712-08:00","dependencies":[{"issue_id":"tv-wisp-umz","depends_on_id":"tv-wisp-bhv","type":"parent-child","created_at":"2026-01-25T10:17:45.137370712-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-umz","depends_on_id":"tv-wisp-7ro","type":"blocks","created_at":"2026-01-25T10:17:45.151832174-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-urbl","title":"Merge: fighter-escape","description":"branch: nux/26/1/fighter-escape-route\ntarget: main\nsource_issue: fighter-escape\nrig: tribal_village\nagent_bead: tv-tribal_village-polecat-nux\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T16:12:28.058535688-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T16:32:14.199713644-08:00","closed_at":"2026-01-25T16:32:14.199715988-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-v9cm","title":"Sync gastown local repo with remote updates","description":"attached_molecule: tv-wisp-wisp-xsuu\nattached_at: 2026-01-25T23:16:29Z\ndispatched_by: mayor\n\nThe remote gastown codebase has received updates today. Sync the local ~/gt/gastown setup.\n\nSteps:\n1. cd to gastown rig directory\n2. git fetch origin\n3. Check for new commits on main/master\n4. git pull or rebase as appropriate\n5. Report what changed\n\nAlso verify the gastown refinery and other services are configured correctly.","status":"closed","priority":1,"issue_type":"task","assignee":"gastown/polecats/rictus","owner":"richard@relh.net","created_at":"2026-01-25T15:15:55.777340702-08:00","created_by":"mayor","updated_at":"2026-01-25T15:19:24.805129972-08:00","closed_at":"2026-01-25T15:19:24.805129972-08:00","close_reason":"Repo already synced with origin/main. Gastown rig operational - witness and refinery running.","dependencies":[{"issue_id":"tv-wisp-v9cm","depends_on_id":"tv-wisp-wisp-xsuu","type":"blocks","created_at":"2026-01-25T15:16:29.603535599-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-vnuu","title":"Merge: tv-jhet","description":"branch: polecat/slit/tv-jhet@mku8dpfp\ntarget: main\nsource_issue: tv-jhet\nrig: tribal_village\nworker: slit\nagent_bead: tv-tribal_village-polecat-slit\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T16:09:54.241928552-08:00","created_by":"tribal_village/polecats/slit","updated_at":"2026-01-25T16:32:14.080528376-08:00","closed_at":"2026-01-25T16:32:14.080535129-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-vut","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-1ep           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-1ep\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T23:17:49.473979557-08:00","updated_at":"2026-01-24T23:20:01.337887399-08:00","closed_at":"2026-01-24T23:20:01.337887399-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-w43u","title":"Add trade cart units for Market-to-Market gold","description":"attached_molecule: tv-wisp-wisp-0t3r\nattached_at: 2026-01-26T01:41:01Z\ndispatched_by: mayor\n\nImplement trade routes between Markets for passive gold generation, like AoE2.\n\n**Current:** Market is conversion-only\n**Desired:** Trade carts travel between allied Markets generating gold\n\nImplementation:\n- Add Trade Cart unit trainable at Market\n- Carts path between two Markets\n- Gold generated based on distance traveled\n- Longer routes = more gold per trip\n\nReference: docs/aoe2_design_investigation.md section 2.2","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:14:43.836244466-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:24.383179704-08:00","dependencies":[{"issue_id":"tv-wisp-w43u","depends_on_id":"tv-wisp-wisp-0t3r","type":"blocks","created_at":"2026-01-25T17:41:00.88301651-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-wdia","title":"Add Blacksmith upgrade system for unit stats","description":"attached_molecule: tv-wisp-wisp-08mh\nattached_at: 2026-01-26T01:37:29Z\ndispatched_by: mayor\n\nImplement Blacksmith upgrades that provide +attack/+armor for unit types, like AoE2.\n\n**Current:** No upgrade system exists\n**Desired:** Blacksmith can research upgrades that boost all units of a type\n\nImplementation:\n- Add team-level upgrade counters in TeamStockpile or similar\n- Upgrades: Infantry Attack/Armor, Cavalry Attack/Armor, Archer Attack/Armor\n- Each upgrade costs resources and takes time\n- Apply bonuses to all existing and future units\n\nReference: docs/aoe2_design_investigation.md section 2.1","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T15:14:19.180587674-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:11.983300261-08:00","dependencies":[{"issue_id":"tv-wisp-wdia","depends_on_id":"tv-wisp-wisp-08mh","type":"blocks","created_at":"2026-01-25T17:37:29.216471083-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-wisp-02k","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-02pb\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:11.986448599-08:00","updated_at":"2026-01-25T14:40:34.079072975-08:00","closed_at":"2026-01-25T14:40:34.079072975-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-02k","depends_on_id":"tv-wisp-wisp-jdo","type":"parent-child","created_at":"2026-01-25T14:38:11.990834014-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-02k","depends_on_id":"tv-wisp-wisp-p1k","type":"blocks","created_at":"2026-01-25T14:38:12.007337521-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-039","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:45.57104586-08:00","updated_at":"2026-01-25T13:53:21.903028268-08:00","closed_at":"2026-01-25T13:53:21.903028268-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-039","depends_on_id":"tv-wisp-wisp-45i","type":"parent-child","created_at":"2026-01-25T13:44:45.577146142-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-039","depends_on_id":"tv-wisp-wisp-49w","type":"blocks","created_at":"2026-01-25T13:44:45.584397838-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-03bt","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-ilh\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:26:18.775472585-08:00","updated_at":"2026-01-25T17:26:18.775472645-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-03bt","depends_on_id":"tv-wisp-wisp-exo0","type":"parent-child","created_at":"2026-01-25T17:26:18.9906952-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-03bt","depends_on_id":"tv-wisp-wisp-loco","type":"blocks","created_at":"2026-01-25T17:26:19.189947753-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-03vmt","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:07:30.664964667-08:00","updated_at":"2026-01-25T22:07:30.664964707-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-03vmt","depends_on_id":"tv-wisp-wisp-mrf18","type":"parent-child","created_at":"2026-01-25T22:07:30.904679525-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-03vmt","depends_on_id":"tv-wisp-wisp-d9bde","type":"blocks","created_at":"2026-01-25T22:07:31.967557821-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-06fh","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-wx7d           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-wx7d\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:22:12.956381025-08:00","updated_at":"2026-01-25T19:22:12.956381085-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-06fh","depends_on_id":"tv-wisp-wisp-zver","type":"parent-child","created_at":"2026-01-25T19:22:12.960928626-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-06xa","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-k0or should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:23:52.354263058-08:00","updated_at":"2026-01-25T19:23:52.354263108-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-06xa","depends_on_id":"tv-wisp-wisp-hd5u","type":"parent-child","created_at":"2026-01-25T19:23:52.623408213-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-06xa","depends_on_id":"tv-wisp-wisp-fkco","type":"blocks","created_at":"2026-01-25T19:23:53.145838182-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-07f2","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:16:44.684850986-08:00","updated_at":"2026-01-25T19:16:44.684851046-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-07rz","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:41.762779502-08:00","updated_at":"2026-01-25T21:58:36.537143363-08:00","closed_at":"2026-01-25T21:58:36.537143363-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-07rz","depends_on_id":"tv-wisp-wisp-lanr","type":"parent-child","created_at":"2026-01-25T21:00:42.5714806-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-07rz","depends_on_id":"tv-wisp-wisp-h527","type":"blocks","created_at":"2026-01-25T21:00:43.459839261-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-08co","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-8b8)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-8b8\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:54.804558416-08:00","updated_at":"2026-01-25T15:09:54.804558496-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-08co","depends_on_id":"tv-wisp-wisp-mt9u","type":"parent-child","created_at":"2026-01-25T15:09:54.833631606-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-08co","depends_on_id":"tv-wisp-wisp-1y1l","type":"blocks","created_at":"2026-01-25T15:09:54.903754899-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-08mh","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:37:28.48767485-08:00","updated_at":"2026-01-25T17:37:28.487674911-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-08wb","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-96g\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-96g --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:22.637944296-08:00","updated_at":"2026-01-25T21:59:49.625851968-08:00","closed_at":"2026-01-25T21:59:49.625851968-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-08wb","depends_on_id":"tv-wisp-wisp-m1vl","type":"parent-child","created_at":"2026-01-25T19:11:23.009451764-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-08wb","depends_on_id":"tv-wisp-wisp-ytfz","type":"blocks","created_at":"2026-01-25T19:11:23.451015413-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-09o","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-agd\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:31:40.705337636-08:00","updated_at":"2026-01-25T14:31:40.705337676-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-09o","depends_on_id":"tv-wisp-wisp-8rd","type":"parent-child","created_at":"2026-01-25T14:31:40.708068453-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-09o","depends_on_id":"tv-wisp-wisp-lak","type":"blocks","created_at":"2026-01-25T14:31:40.717788717-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-09wt","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-l0oc\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:28:18.596376862-08:00","updated_at":"2026-01-25T17:28:18.596376912-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-09wt","depends_on_id":"tv-wisp-wisp-p9hy","type":"parent-child","created_at":"2026-01-25T17:28:18.816081075-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-09wt","depends_on_id":"tv-wisp-wisp-kv3r","type":"blocks","created_at":"2026-01-25T17:28:19.046419344-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-09yn","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-jnik\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:58.603466537-08:00","updated_at":"2026-01-25T17:44:58.603466587-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-09yn","depends_on_id":"tv-wisp-wisp-do23","type":"parent-child","created_at":"2026-01-25T17:44:59.014444412-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-09yn","depends_on_id":"tv-wisp-wisp-mro8","type":"blocks","created_at":"2026-01-25T17:44:59.390315702-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0ar","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-3ns\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-3ns --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:20.303741968-08:00","updated_at":"2026-01-25T13:51:38.20414529-08:00","closed_at":"2026-01-25T13:51:38.20414529-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-0ar","depends_on_id":"tv-wisp-wisp-735","type":"parent-child","created_at":"2026-01-25T13:45:20.314821914-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0ar","depends_on_id":"tv-wisp-wisp-mf7","type":"blocks","created_at":"2026-01-25T13:45:20.330665715-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0cjv","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-gvv3\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:48:28.899827279-08:00","updated_at":"2026-01-25T17:48:28.899827319-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0cjv","depends_on_id":"tv-wisp-wisp-kic6","type":"parent-child","created_at":"2026-01-25T17:48:28.949429133-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0cjv","depends_on_id":"tv-wisp-wisp-dhzt","type":"blocks","created_at":"2026-01-25T17:48:29.367856586-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0cy","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-2bk\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-2bk --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:47.969697915-08:00","updated_at":"2026-01-25T14:53:22.793415504-08:00","closed_at":"2026-01-25T14:53:22.793415504-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-0cy","depends_on_id":"tv-wisp-wisp-7ym","type":"parent-child","created_at":"2026-01-25T14:38:47.990080088-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0cy","depends_on_id":"tv-wisp-wisp-ao3","type":"blocks","created_at":"2026-01-25T14:38:48.012493013-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0e1o5","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:59:15.397485939-08:00","updated_at":"2026-01-25T21:59:15.39748598-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0e1o5","depends_on_id":"tv-wisp-wisp-9y6rc","type":"parent-child","created_at":"2026-01-25T21:59:15.404030272-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0g1x","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-gvv3\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-gvv3 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:48:28.901946467-08:00","updated_at":"2026-01-25T17:48:28.901946497-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0g1x","depends_on_id":"tv-wisp-wisp-kic6","type":"parent-child","created_at":"2026-01-25T17:48:29.271174037-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0g1x","depends_on_id":"tv-wisp-wisp-i794","type":"blocks","created_at":"2026-01-25T17:48:29.65692213-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0hx","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-8b8).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-8b8\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:56:39.841095634-08:00","updated_at":"2026-01-25T14:56:39.841095664-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0hx","depends_on_id":"tv-wisp-wisp-g5f","type":"parent-child","created_at":"2026-01-25T14:56:39.848825737-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0hx","depends_on_id":"tv-wisp-wisp-6rl","type":"blocks","created_at":"2026-01-25T14:56:39.880070677-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0ins","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:29.793893836-08:00","updated_at":"2026-01-25T15:29:29.793893866-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0ins","depends_on_id":"tv-wisp-wisp-87al","type":"parent-child","created_at":"2026-01-25T15:29:29.842300032-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0ins","depends_on_id":"tv-wisp-wisp-0n9d","type":"blocks","created_at":"2026-01-25T15:29:29.918569878-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0jab8","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (hq-cv-bsv3u)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: hq-cv-bsv3u\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:17.684966502-08:00","updated_at":"2026-01-25T21:54:17.684966532-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0jab8","depends_on_id":"tv-wisp-wisp-zyr6q","type":"parent-child","created_at":"2026-01-25T21:54:18.025489966-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0jab8","depends_on_id":"tv-wisp-wisp-4tik8","type":"blocks","created_at":"2026-01-25T21:54:18.893133951-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0mnz","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-jd9).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-jd9\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:25:31.735105113-08:00","updated_at":"2026-01-25T17:29:00.930498262-08:00","closed_at":"2026-01-25T17:29:00.930498262-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-0mnz","depends_on_id":"tv-wisp-wisp-mdl6","type":"parent-child","created_at":"2026-01-25T17:25:31.794366448-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0mnz","depends_on_id":"tv-wisp-wisp-jk4k","type":"blocks","created_at":"2026-01-25T17:25:31.984708913-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0mqb","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-8z2q should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:54.758996942-08:00","updated_at":"2026-01-25T17:47:02.098386789-08:00","closed_at":"2026-01-25T17:47:02.098386789-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-0mqb","depends_on_id":"tv-wisp-wisp-kdbr","type":"parent-child","created_at":"2026-01-25T17:41:54.940622581-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0mqb","depends_on_id":"tv-wisp-wisp-wl5t","type":"blocks","created_at":"2026-01-25T17:41:55.281607313-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0mut","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-318k\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:20:52.495094869-08:00","updated_at":"2026-01-25T19:20:52.495094919-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0mut","depends_on_id":"tv-wisp-wisp-wkqr","type":"parent-child","created_at":"2026-01-25T19:20:53.024818704-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0mut","depends_on_id":"tv-wisp-wisp-gd42","type":"blocks","created_at":"2026-01-25T19:20:53.521228078-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0n6e","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:28.160913201-08:00","updated_at":"2026-01-25T16:11:55.377006298-08:00","closed_at":"2026-01-25T16:11:55.377006298-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-0n6e","depends_on_id":"tv-wisp-wisp-59hk","type":"parent-child","created_at":"2026-01-25T16:07:28.264016226-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0n6e","depends_on_id":"tv-wisp-wisp-bm7s","type":"blocks","created_at":"2026-01-25T16:07:28.38396355-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0n9d","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-h2uu should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:29.793674788-08:00","updated_at":"2026-01-25T15:29:29.793674828-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0n9d","depends_on_id":"tv-wisp-wisp-87al","type":"parent-child","created_at":"2026-01-25T15:29:29.833098259-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0n9d","depends_on_id":"tv-wisp-wisp-u098","type":"blocks","created_at":"2026-01-25T15:29:29.908804884-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0oesx","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:12:14.189644281-08:00","updated_at":"2026-01-25T22:12:14.189644311-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0oesx","depends_on_id":"tv-wisp-wisp-dbfyj","type":"parent-child","created_at":"2026-01-25T22:12:14.556716088-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-0oesx","depends_on_id":"tv-wisp-wisp-7jm4l","type":"blocks","created_at":"2026-01-25T22:12:15.650675088-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0ohr","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:56:36.37555268-08:00","updated_at":"2026-01-25T19:56:36.37555271-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0ohr","depends_on_id":"tv-wisp-wisp-vlrj","type":"parent-child","created_at":"2026-01-25T19:56:36.752636828-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0ohr","depends_on_id":"tv-wisp-wisp-c8we","type":"blocks","created_at":"2026-01-25T19:56:37.362795828-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0os","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-agd should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:35:55.222188129-08:00","updated_at":"2026-01-25T14:35:55.222188159-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0os","depends_on_id":"tv-wisp-wisp-9yt","type":"parent-child","created_at":"2026-01-25T14:35:55.22810532-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0os","depends_on_id":"tv-wisp-wisp-5us","type":"blocks","created_at":"2026-01-25T14:35:55.237947591-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0ozn","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:36.716695724-08:00","updated_at":"2026-01-25T15:09:36.716695784-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0ozn","depends_on_id":"tv-wisp-wisp-f3bu","type":"parent-child","created_at":"2026-01-25T15:09:36.765607159-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0ozn","depends_on_id":"tv-wisp-wisp-p7va","type":"blocks","created_at":"2026-01-25T15:09:36.826782133-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0pa2","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-1rmd\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:12.27515493-08:00","updated_at":"2026-01-25T19:10:12.27515497-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0pa2","depends_on_id":"tv-wisp-wisp-ud7x","type":"parent-child","created_at":"2026-01-25T19:10:12.327119403-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0pa2","depends_on_id":"tv-wisp-wisp-xcql","type":"blocks","created_at":"2026-01-25T19:10:12.723798303-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0qec","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:28:18.595788082-08:00","updated_at":"2026-01-25T17:28:18.595788122-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0qec","depends_on_id":"tv-wisp-wisp-p9hy","type":"parent-child","created_at":"2026-01-25T17:28:18.760781634-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0qec","depends_on_id":"tv-wisp-wisp-5j0s","type":"blocks","created_at":"2026-01-25T17:28:18.991406739-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0r9j","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:16.692432297-08:00","updated_at":"2026-01-25T19:20:35.055108383-08:00","closed_at":"2026-01-25T19:20:35.055108383-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-0r9j","depends_on_id":"tv-wisp-wisp-2pyz","type":"parent-child","created_at":"2026-01-25T19:16:17.053110993-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0r9j","depends_on_id":"tv-wisp-wisp-5nd5","type":"blocks","created_at":"2026-01-25T19:16:17.518332911-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0t0df","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:19:52.886737548-08:00","updated_at":"2026-01-25T22:19:52.886737589-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0t0df","depends_on_id":"tv-wisp-wisp-ep1u6","type":"parent-child","created_at":"2026-01-25T22:19:53.739895762-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-0t0df","depends_on_id":"tv-wisp-wisp-6sss8","type":"blocks","created_at":"2026-01-25T22:19:54.865023988-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0t3r","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:41:00.016433452-08:00","updated_at":"2026-01-25T17:41:00.016433492-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-0tcz","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-jnik\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:58.599907359-08:00","updated_at":"2026-01-25T17:44:58.59990742-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0tcz","depends_on_id":"tv-wisp-wisp-do23","type":"parent-child","created_at":"2026-01-25T17:44:58.653772597-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0tcz","depends_on_id":"tv-wisp-wisp-3x9u","type":"blocks","created_at":"2026-01-25T17:44:59.060300742-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0tgo","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-b3n           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-b3n\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:18.803415885-08:00","updated_at":"2026-01-25T15:09:18.803415925-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0tgo","depends_on_id":"tv-wisp-wisp-86en","type":"parent-child","created_at":"2026-01-25T15:09:18.805701281-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0u79m","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T22:04:38.989329195-08:00","updated_at":"2026-01-25T22:04:38.989329235-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-0utl","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-5o2p).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-5o2p\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:55.298077558-08:00","updated_at":"2026-01-25T17:34:55.298077628-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0utl","depends_on_id":"tv-wisp-wisp-2t2z","type":"parent-child","created_at":"2026-01-25T17:34:55.376472676-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0utl","depends_on_id":"tv-wisp-wisp-fudf","type":"blocks","created_at":"2026-01-25T17:34:55.669808652-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0vwt","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:41.757520641-08:00","updated_at":"2026-01-25T21:56:07.487346669-08:00","closed_at":"2026-01-25T21:56:07.487346669-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-0vwt","depends_on_id":"tv-wisp-wisp-lanr","type":"parent-child","created_at":"2026-01-25T21:00:41.764365845-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0w17","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-0pkq should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:28.757751656-08:00","updated_at":"2026-01-25T20:20:28.757751716-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0w17","depends_on_id":"tv-wisp-wisp-tcnq","type":"parent-child","created_at":"2026-01-25T20:20:29.12177361-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0w17","depends_on_id":"tv-wisp-wisp-5cw1","type":"blocks","created_at":"2026-01-25T20:20:29.790668023-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0w6e","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:40.890706579-08:00","updated_at":"2026-01-25T20:16:58.707322976-08:00","closed_at":"2026-01-25T20:16:58.707322976-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-0w6e","depends_on_id":"tv-wisp-wisp-oa0y","type":"parent-child","created_at":"2026-01-25T20:07:41.387334007-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0w6e","depends_on_id":"tv-wisp-wisp-igqi","type":"blocks","created_at":"2026-01-25T20:07:42.094427991-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0xf4","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-i8sz)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-i8sz\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:33:12.903194868-08:00","updated_at":"2026-01-25T17:41:00.797001284-08:00","closed_at":"2026-01-25T17:41:00.797001284-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-0xf4","depends_on_id":"tv-wisp-wisp-bs1f","type":"parent-child","created_at":"2026-01-25T17:33:13.002326706-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0xf4","depends_on_id":"tv-wisp-wisp-cf1p","type":"blocks","created_at":"2026-01-25T17:33:13.265534538-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0yvm","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-h2uu\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:29.79295761-08:00","updated_at":"2026-01-25T15:29:29.79295764-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0yvm","depends_on_id":"tv-wisp-wisp-87al","type":"parent-child","created_at":"2026-01-25T15:29:29.804255773-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0yvm","depends_on_id":"tv-wisp-wisp-a5gf","type":"blocks","created_at":"2026-01-25T15:29:29.879109257-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-0zi3","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-2mu6\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:27:41.558265927-08:00","updated_at":"2026-01-25T19:27:41.558265977-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-0zi3","depends_on_id":"tv-wisp-wisp-dreg","type":"parent-child","created_at":"2026-01-25T19:27:41.6293931-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-0zi3","depends_on_id":"tv-wisp-wisp-hv5t","type":"blocks","created_at":"2026-01-25T19:27:42.163883999-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-10bpg","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:04:38.996620331-08:00","updated_at":"2026-01-25T22:04:38.996620381-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-10bpg","depends_on_id":"tv-wisp-wisp-0u79m","type":"parent-child","created_at":"2026-01-25T22:04:40.052412275-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-10bpg","depends_on_id":"tv-wisp-wisp-dhhpl","type":"blocks","created_at":"2026-01-25T22:04:41.100134617-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-10kn","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-5d7t\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-5d7t --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:56:36.376491974-08:00","updated_at":"2026-01-25T19:56:36.376492004-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-10kn","depends_on_id":"tv-wisp-wisp-vlrj","type":"parent-child","created_at":"2026-01-25T19:56:36.899733867-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-10kn","depends_on_id":"tv-wisp-wisp-5qy3","type":"blocks","created_at":"2026-01-25T19:56:37.520622958-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-116p","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-v9cm should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:16:29.3758094-08:00","updated_at":"2026-01-25T15:16:29.375809441-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-116p","depends_on_id":"tv-wisp-wisp-xsuu","type":"parent-child","created_at":"2026-01-25T15:16:29.411835986-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-116p","depends_on_id":"tv-wisp-wisp-5lqs","type":"blocks","created_at":"2026-01-25T15:16:29.481606051-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-167p","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-puj\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:52.560289553-08:00","updated_at":"2026-01-25T19:12:36.35231784-08:00","closed_at":"2026-01-25T19:12:36.35231784-08:00","close_reason":"Work already completed and merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-167p","depends_on_id":"tv-wisp-wisp-kls4","type":"parent-child","created_at":"2026-01-25T19:10:53.015798849-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-167p","depends_on_id":"tv-wisp-wisp-wws1","type":"blocks","created_at":"2026-01-25T19:10:53.490936743-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-16uj","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:06.921713875-08:00","updated_at":"2026-01-25T21:00:06.921713935-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-16uj","depends_on_id":"tv-wisp-wisp-6imy","type":"parent-child","created_at":"2026-01-25T21:00:07.570941001-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-16uj","depends_on_id":"tv-wisp-wisp-nnxc","type":"blocks","created_at":"2026-01-25T21:00:08.463964517-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-16um","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:47.70655714-08:00","updated_at":"2026-01-25T17:37:47.70655719-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-16um","depends_on_id":"tv-wisp-wisp-9ksa","type":"parent-child","created_at":"2026-01-25T17:37:47.931670047-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-16um","depends_on_id":"tv-wisp-wisp-7uw6","type":"blocks","created_at":"2026-01-25T17:37:48.226195588-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-17n","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:52:53.985075657-08:00","updated_at":"2026-01-25T14:52:53.985075697-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-17n","depends_on_id":"tv-wisp-wisp-7h8","type":"parent-child","created_at":"2026-01-25T14:52:54.011696506-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-17n","depends_on_id":"tv-wisp-wisp-gho","type":"blocks","created_at":"2026-01-25T14:52:54.042141235-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-19n1","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:32:03.798101253-08:00","updated_at":"2026-01-25T17:32:03.798101283-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-19x","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-cbg)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-cbg\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:54.025232402-08:00","updated_at":"2026-01-25T14:37:54.025232432-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-19x","depends_on_id":"tv-wisp-wisp-c1i","type":"parent-child","created_at":"2026-01-25T14:37:54.031468879-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-19x","depends_on_id":"tv-wisp-wisp-bko","type":"blocks","created_at":"2026-01-25T14:37:54.044687691-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-1bji","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-v9cm           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-v9cm\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:16:29.374751608-08:00","updated_at":"2026-01-25T15:16:29.374751648-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-1bji","depends_on_id":"tv-wisp-wisp-xsuu","type":"parent-child","created_at":"2026-01-25T15:16:29.37728981-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-1did","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-wdia should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:28.490808293-08:00","updated_at":"2026-01-25T17:37:28.490808353-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-1did","depends_on_id":"tv-wisp-wisp-08mh","type":"parent-child","created_at":"2026-01-25T17:37:28.648235935-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-1did","depends_on_id":"tv-wisp-wisp-nohd","type":"blocks","created_at":"2026-01-25T17:37:28.944880887-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-1f6q","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-1rmd\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:12.278053392-08:00","updated_at":"2026-01-25T19:13:43.357019007-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-1f6q","depends_on_id":"tv-wisp-wisp-ud7x","type":"parent-child","created_at":"2026-01-25T19:10:12.674609984-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-1f6q","depends_on_id":"tv-wisp-wisp-cwx1","type":"blocks","created_at":"2026-01-25T19:10:13.07950822-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-1gtx","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:23:28.579469754-08:00","updated_at":"2026-01-25T17:23:28.579469814-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-1im4","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:41.761456812-08:00","updated_at":"2026-01-25T21:58:07.663598454-08:00","closed_at":"2026-01-25T21:58:07.663598454-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-1im4","depends_on_id":"tv-wisp-wisp-lanr","type":"parent-child","created_at":"2026-01-25T21:00:42.35675198-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-1im4","depends_on_id":"tv-wisp-wisp-j6z2","type":"blocks","created_at":"2026-01-25T21:00:43.270898975-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-1k5c","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T20:07:26.375529614-08:00","updated_at":"2026-01-25T20:07:26.375529814-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-1kzg","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:38.836585684-08:00","updated_at":"2026-01-25T16:54:38.836585744-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-1kzg","depends_on_id":"tv-wisp-wisp-i7i6","type":"parent-child","created_at":"2026-01-25T16:54:38.940608866-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-1kzg","depends_on_id":"tv-wisp-wisp-q452","type":"blocks","created_at":"2026-01-25T16:54:39.081901511-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-1m40x","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:25:19.47512764-08:00","updated_at":"2026-01-25T22:25:19.47512769-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-1m40x","depends_on_id":"tv-wisp-wisp-fl6o4","type":"parent-child","created_at":"2026-01-25T22:25:20.67759067-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-1m40x","depends_on_id":"tv-wisp-wisp-x4j7a","type":"blocks","created_at":"2026-01-25T22:25:21.888115061-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-1o3d","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-o168\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:47.704083189-08:00","updated_at":"2026-01-25T17:37:47.704083249-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-1o3d","depends_on_id":"tv-wisp-wisp-9ksa","type":"parent-child","created_at":"2026-01-25T17:37:47.749426998-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-1o3d","depends_on_id":"tv-wisp-wisp-3729","type":"blocks","created_at":"2026-01-25T17:37:48.036582754-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-1tuo","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-02f7\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:45.030229779-08:00","updated_at":"2026-01-25T16:54:45.030229829-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-1tuo","depends_on_id":"tv-wisp-wisp-mylm","type":"parent-child","created_at":"2026-01-25T16:54:45.056874766-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-1tuo","depends_on_id":"tv-wisp-wisp-ldf5","type":"blocks","created_at":"2026-01-25T16:54:45.220081068-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-1u2","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-c035)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-c035\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:45.570542484-08:00","updated_at":"2026-01-25T13:51:27.678785572-08:00","closed_at":"2026-01-25T13:51:27.678785572-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-1u2","depends_on_id":"tv-wisp-wisp-45i","type":"parent-child","created_at":"2026-01-25T13:44:45.5745656-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-1u2","depends_on_id":"tv-wisp-wisp-5k5","type":"blocks","created_at":"2026-01-25T13:44:45.581593739-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-1ufq","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:42:26.528206309-08:00","updated_at":"2026-01-25T16:43:41.884314028-08:00","closed_at":"2026-01-25T16:43:41.884314028-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-1ufq","depends_on_id":"tv-wisp-wisp-pij2","type":"parent-child","created_at":"2026-01-25T16:42:26.647402387-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-1ufq","depends_on_id":"tv-wisp-wisp-ioh3","type":"blocks","created_at":"2026-01-25T16:42:26.793688542-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-1v4","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-agd\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:31:40.70650991-08:00","updated_at":"2026-01-25T14:31:40.70650994-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-1v4","depends_on_id":"tv-wisp-wisp-8rd","type":"parent-child","created_at":"2026-01-25T14:31:40.716825493-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-1v4","depends_on_id":"tv-wisp-wisp-zxw","type":"blocks","created_at":"2026-01-25T14:31:40.725348668-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-1x88","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-jnik).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-jnik\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:58.600458389-08:00","updated_at":"2026-01-25T17:44:58.600458439-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-1x88","depends_on_id":"tv-wisp-wisp-do23","type":"parent-child","created_at":"2026-01-25T17:44:58.710990166-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-1x88","depends_on_id":"tv-wisp-wisp-0tcz","type":"blocks","created_at":"2026-01-25T17:44:59.108282672-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-1y1l","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-8b8).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-8b8\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:54.804124827-08:00","updated_at":"2026-01-25T15:09:54.804124877-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-1y1l","depends_on_id":"tv-wisp-wisp-mt9u","type":"parent-child","created_at":"2026-01-25T15:09:54.825452271-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-1y1l","depends_on_id":"tv-wisp-wisp-p4yy","type":"blocks","created_at":"2026-01-25T15:09:54.895087803-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-1zh2","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-p5yr\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:57.545649037-08:00","updated_at":"2026-01-25T19:49:14.603728673-08:00","closed_at":"2026-01-25T19:49:14.603728673-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-1zh2","depends_on_id":"tv-wisp-wisp-hhw1","type":"parent-child","created_at":"2026-01-25T19:47:57.634104206-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-1zh2","depends_on_id":"tv-wisp-wisp-yvsl","type":"blocks","created_at":"2026-01-25T19:47:58.231562638-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-1zwzi","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:04:38.995301179-08:00","updated_at":"2026-01-25T22:04:38.995301239-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-1zwzi","depends_on_id":"tv-wisp-wisp-0u79m","type":"parent-child","created_at":"2026-01-25T22:04:39.818985521-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-1zwzi","depends_on_id":"tv-wisp-wisp-dn4a3","type":"blocks","created_at":"2026-01-25T22:04:40.866095722-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-212e","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-746p).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-746p\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:38.427487163-08:00","updated_at":"2026-01-25T17:44:38.427487203-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-212e","depends_on_id":"tv-wisp-wisp-7urn","type":"parent-child","created_at":"2026-01-25T17:44:38.521804279-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-212e","depends_on_id":"tv-wisp-wisp-f5xx","type":"blocks","created_at":"2026-01-25T17:44:38.866939569-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-222","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:54.025586582-08:00","updated_at":"2026-01-25T14:37:54.025586612-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-222","depends_on_id":"tv-wisp-wisp-c1i","type":"parent-child","created_at":"2026-01-25T14:37:54.034789845-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-222","depends_on_id":"tv-wisp-wisp-xgi","type":"blocks","created_at":"2026-01-25T14:37:54.04812634-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-223d","title":"Burn and respawn or loop","description":"End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:10.492673889-08:00","updated_at":"2026-01-25T21:00:10.492673949-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-223d","depends_on_id":"tv-wisp-wisp-u7fv","type":"parent-child","created_at":"2026-01-25T21:00:11.51062127-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-223d","depends_on_id":"tv-wisp-wisp-62pp","type":"blocks","created_at":"2026-01-25T21:00:12.576849243-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-22vo","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:10:21.054627756-08:00","updated_at":"2026-01-25T19:13:17.045470477-08:00","closed_at":"2026-01-25T19:13:17.045470477-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-wisp-248j","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:24:16.63361756-08:00","updated_at":"2026-01-25T17:24:16.6336176-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-248j","depends_on_id":"tv-wisp-wisp-d08y","type":"parent-child","created_at":"2026-01-25T17:24:16.787566165-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-248j","depends_on_id":"tv-wisp-wisp-pi1d","type":"blocks","created_at":"2026-01-25T17:24:16.963867311-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-24r5","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-uor5           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-uor5\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:15.596530173-08:00","updated_at":"2026-01-25T17:34:15.220590297-08:00","closed_at":"2026-01-25T17:34:15.220590297-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-24r5","depends_on_id":"tv-wisp-wisp-ce9t","type":"parent-child","created_at":"2026-01-25T17:31:15.60101492-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-25mh","title":"Merge and push to main","description":"Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send \u003crig\u003e/witness -s \"MERGED \u003cpolecat-name\u003e\" -m \"Branch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"\u003cissue-id\u003e\"\n# OR verify the commit SHA is on main:\ngit branch --contains \u003ccommit-sha\u003e | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close \u003cmr-bead-id\u003e --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep \u003cpolecat-name\u003e\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive \u003cmerge-ready-message-id\u003e\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete \u003cpolecat-branch\u003e\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:41.22339036-08:00","updated_at":"2026-01-25T21:11:41.22339039-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-25mh","depends_on_id":"tv-wisp-wisp-jva9","type":"parent-child","created_at":"2026-01-25T21:11:41.795636295-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-25mh","depends_on_id":"tv-wisp-wisp-9gn9","type":"blocks","created_at":"2026-01-25T21:11:42.811457266-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-26sx","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-rmos).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-rmos\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:42:26.526877638-08:00","updated_at":"2026-01-25T16:43:16.96181012-08:00","closed_at":"2026-01-25T16:43:16.96181012-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-26sx","depends_on_id":"tv-wisp-wisp-pij2","type":"parent-child","created_at":"2026-01-25T16:42:26.563911703-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-26sx","depends_on_id":"tv-wisp-wisp-2yva","type":"blocks","created_at":"2026-01-25T16:42:26.718962444-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-295","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-1rmd)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-1rmd\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:41:43.85149151-08:00","updated_at":"2026-01-25T14:45:54.969993537-08:00","closed_at":"2026-01-25T14:45:54.969993537-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-295","depends_on_id":"tv-wisp-wisp-mni","type":"parent-child","created_at":"2026-01-25T14:41:43.861032228-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-295","depends_on_id":"tv-wisp-wisp-bp9","type":"blocks","created_at":"2026-01-25T14:41:43.883579524-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-29ar","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:37:56.127921856-08:00","updated_at":"2026-01-25T21:37:56.127921896-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-29ar","depends_on_id":"tv-wisp-wisp-rfc8","type":"parent-child","created_at":"2026-01-25T21:37:56.667079084-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-29ar","depends_on_id":"tv-wisp-wisp-vvq1","type":"blocks","created_at":"2026-01-25T21:37:57.577727344-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2bj","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:41:43.851872897-08:00","updated_at":"2026-01-25T14:46:47.115879169-08:00","closed_at":"2026-01-25T14:46:47.115879169-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-2bj","depends_on_id":"tv-wisp-wisp-mni","type":"parent-child","created_at":"2026-01-25T14:41:43.866313724-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2bj","depends_on_id":"tv-wisp-wisp-67n","type":"blocks","created_at":"2026-01-25T14:41:43.889258588-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2bsy","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-zngh\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:50.537295195-08:00","updated_at":"2026-01-25T16:34:50.537295225-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2bsy","depends_on_id":"tv-wisp-wisp-58fz","type":"parent-child","created_at":"2026-01-25T16:34:50.557428591-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2bsy","depends_on_id":"tv-wisp-wisp-96p8","type":"blocks","created_at":"2026-01-25T16:34:50.724632614-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2c1k","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:41.760208961-08:00","updated_at":"2026-01-25T21:57:33.099693867-08:00","closed_at":"2026-01-25T21:57:33.099693867-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-2c1k","depends_on_id":"tv-wisp-wisp-lanr","type":"parent-child","created_at":"2026-01-25T21:00:42.173268246-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-2c1k","depends_on_id":"tv-wisp-wisp-qycs","type":"blocks","created_at":"2026-01-25T21:00:43.06026361-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2csf","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-433\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-433 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:57:16.179565687-08:00","updated_at":"2026-01-25T14:57:16.179565727-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2csf","depends_on_id":"tv-wisp-wisp-l8h","type":"parent-child","created_at":"2026-01-25T14:57:16.211975216-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2csf","depends_on_id":"tv-wisp-wisp-tf7g","type":"blocks","created_at":"2026-01-25T14:57:16.247144251-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2dv8","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-k0or           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-k0or\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:23:52.351924291-08:00","updated_at":"2026-01-25T19:23:52.351924371-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2dv8","depends_on_id":"tv-wisp-wisp-hd5u","type":"parent-child","created_at":"2026-01-25T19:23:52.357374777-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2efs","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-z20).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-z20\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:15:52.545453771-08:00","updated_at":"2026-01-25T19:15:52.545453801-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2efs","depends_on_id":"tv-wisp-wisp-zkv0","type":"parent-child","created_at":"2026-01-25T19:15:52.671460308-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2efs","depends_on_id":"tv-wisp-wisp-n2f8","type":"blocks","created_at":"2026-01-25T19:15:53.206863302-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2et5","title":"Check refinery mail","description":"Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: \u003cbranch\u003e\n# Issue: \u003cissue-id\u003e\n# Polecat: \u003cpolecat-name\u003e\n# MR: \u003cmr-bead-id\u003e\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:10.483999869-08:00","updated_at":"2026-01-25T21:00:10.483999919-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2et5","depends_on_id":"tv-wisp-wisp-u7fv","type":"parent-child","created_at":"2026-01-25T21:00:10.493861908-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2frvc","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:59:15.401250703-08:00","updated_at":"2026-01-25T21:59:15.401250743-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2frvc","depends_on_id":"tv-wisp-wisp-9y6rc","type":"parent-child","created_at":"2026-01-25T21:59:16.09254606-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-2frvc","depends_on_id":"tv-wisp-wisp-yegom","type":"blocks","created_at":"2026-01-25T21:59:17.127408936-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2fzmm","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:55:16.254911276-08:00","updated_at":"2026-01-25T21:55:16.254911316-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2fzmm","depends_on_id":"tv-wisp-wisp-y04mr","type":"parent-child","created_at":"2026-01-25T21:55:16.965990348-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2fzmm","depends_on_id":"tv-wisp-wisp-huy2y","type":"blocks","created_at":"2026-01-25T21:55:17.909840171-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2h7f","title":"Generate handoff summary","description":"Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:10.490360038-08:00","updated_at":"2026-01-25T21:00:10.490360108-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2h7f","depends_on_id":"tv-wisp-wisp-u7fv","type":"parent-child","created_at":"2026-01-25T21:00:11.239737591-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-2h7f","depends_on_id":"tv-wisp-wisp-5mge","type":"blocks","created_at":"2026-01-25T21:00:12.285998913-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2ij5","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-p5yr).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-p5yr\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:57.546034357-08:00","updated_at":"2026-01-25T19:50:10.29451008-08:00","closed_at":"2026-01-25T19:50:10.29451008-08:00","close_reason":"Pre-existing compile errors in renderer.nim (boxy API change). Proceeding with spawn.nim audit.","dependencies":[{"issue_id":"tv-wisp-wisp-2ij5","depends_on_id":"tv-wisp-wisp-hhw1","type":"parent-child","created_at":"2026-01-25T19:47:57.707734494-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2ij5","depends_on_id":"tv-wisp-wisp-1zh2","type":"blocks","created_at":"2026-01-25T19:47:58.303407434-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2in3","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-02f7)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-02f7\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:45.031077554-08:00","updated_at":"2026-01-25T16:54:45.031077614-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2in3","depends_on_id":"tv-wisp-wisp-mylm","type":"parent-child","created_at":"2026-01-25T16:54:45.0954559-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2in3","depends_on_id":"tv-wisp-wisp-4xfn","type":"blocks","created_at":"2026-01-25T16:54:45.257818244-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2l81","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:18.80489156-08:00","updated_at":"2026-01-25T15:09:18.80489159-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2l81","depends_on_id":"tv-wisp-wisp-86en","type":"parent-child","created_at":"2026-01-25T15:09:18.845505941-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2l81","depends_on_id":"tv-wisp-wisp-nitf","type":"blocks","created_at":"2026-01-25T15:09:18.899767242-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2mo1","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-0pkq).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-0pkq\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:28.756121995-08:00","updated_at":"2026-01-25T20:20:28.756122036-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2mo1","depends_on_id":"tv-wisp-wisp-tcnq","type":"parent-child","created_at":"2026-01-25T20:20:28.955160398-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2mo1","depends_on_id":"tv-wisp-wisp-p8w0","type":"blocks","created_at":"2026-01-25T20:20:29.620094309-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2n1","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-b3n\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:56:57.644293456-08:00","updated_at":"2026-01-25T14:56:57.644293497-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2n1","depends_on_id":"tv-wisp-wisp-d0l","type":"parent-child","created_at":"2026-01-25T14:56:57.68453414-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2nea","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-8ro\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:06:21.219485061-08:00","updated_at":"2026-01-25T16:06:21.219485101-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2nea","depends_on_id":"tv-wisp-wisp-pysf","type":"parent-child","created_at":"2026-01-25T16:06:21.237943685-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2nea","depends_on_id":"tv-wisp-wisp-mlwr","type":"blocks","created_at":"2026-01-25T16:06:21.336270913-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2nyx","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:00.021831163-08:00","updated_at":"2026-01-25T17:41:00.021831223-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2nyx","depends_on_id":"tv-wisp-wisp-0t3r","type":"parent-child","created_at":"2026-01-25T17:41:00.23619091-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2nyx","depends_on_id":"tv-wisp-wisp-hu8z","type":"blocks","created_at":"2026-01-25T17:41:00.573388786-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2owzn","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T22:11:15.47762028-08:00","updated_at":"2026-01-25T22:11:15.47762032-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-2p7w","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-zngh)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-zngh\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:50.537977249-08:00","updated_at":"2026-01-25T16:34:50.537977289-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2p7w","depends_on_id":"tv-wisp-wisp-58fz","type":"parent-child","created_at":"2026-01-25T16:34:50.592129455-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2p7w","depends_on_id":"tv-wisp-wisp-snk1","type":"blocks","created_at":"2026-01-25T16:34:50.761522818-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2poqt","title":"mol-refinery-patrol","description":"Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to main one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────\u003e│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch \u0026 rebase            │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge \u0026 push              │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │\u003c─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).","status":"hooked","priority":2,"issue_type":"epic","assignee":"tribal_village/refinery","created_at":"2026-01-25T22:46:20.513366424-08:00","updated_at":"2026-01-25T22:46:27.873019263-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-2pyz","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:16:16.686739929-08:00","updated_at":"2026-01-25T19:16:16.686739989-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-2s9s","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-h2uu\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:09.953734216-08:00","updated_at":"2026-01-25T16:08:01.871190494-08:00","closed_at":"2026-01-25T16:08:01.871190494-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-2s9s","depends_on_id":"tv-wisp-wisp-jocg","type":"parent-child","created_at":"2026-01-25T16:07:09.969934463-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2s9s","depends_on_id":"tv-wisp-wisp-ra0f","type":"blocks","created_at":"2026-01-25T16:07:10.095771767-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2stk","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-3ns should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:53.466774916-08:00","updated_at":"2026-01-25T22:20:11.530436053-08:00","closed_at":"2026-01-25T22:20:11.530436053-08:00","close_reason":"No new changes to review - feature already merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-2stk","depends_on_id":"tv-wisp-wisp-v9eo","type":"parent-child","created_at":"2026-01-25T19:11:53.696913496-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2stk","depends_on_id":"tv-wisp-wisp-8wo7","type":"blocks","created_at":"2026-01-25T19:11:54.143063509-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2t2z","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:34:55.296016899-08:00","updated_at":"2026-01-25T17:34:55.296016949-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-2ths","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-5o2p)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-5o2p\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:55.298561282-08:00","updated_at":"2026-01-25T17:34:55.298561362-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2ths","depends_on_id":"tv-wisp-wisp-2t2z","type":"parent-child","created_at":"2026-01-25T17:34:55.414798982-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2ths","depends_on_id":"tv-wisp-wisp-0utl","type":"blocks","created_at":"2026-01-25T17:34:55.705642133-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2ti0a","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:22:18.711669288-08:00","updated_at":"2026-01-25T22:22:18.711669348-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2ti0a","depends_on_id":"tv-wisp-wisp-7vv82","type":"parent-child","created_at":"2026-01-25T22:22:18.969576948-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-2ti0a","depends_on_id":"tv-wisp-wisp-ujddb","type":"blocks","created_at":"2026-01-25T22:22:20.101859064-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2v11","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-zngh\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-zngh --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:50.53925735-08:00","updated_at":"2026-01-25T16:34:50.5392574-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2v11","depends_on_id":"tv-wisp-wisp-58fz","type":"parent-child","created_at":"2026-01-25T16:34:50.679295093-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2v11","depends_on_id":"tv-wisp-wisp-7ngx","type":"blocks","created_at":"2026-01-25T16:34:50.833733964-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2v9u","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-6e991           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-6e991\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:34.705387403-08:00","updated_at":"2026-01-25T20:08:58.058109334-08:00","closed_at":"2026-01-25T20:08:58.058109334-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-2v9u","depends_on_id":"tv-wisp-wisp-cj2u","type":"parent-child","created_at":"2026-01-25T20:07:34.711835731-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2w49","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T16:54:41.920994275-08:00","updated_at":"2026-01-25T16:54:41.920994335-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-2wm1","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:16.035273842-08:00","updated_at":"2026-01-25T19:18:09.359339072-08:00","closed_at":"2026-01-25T19:18:09.359339072-08:00","close_reason":"N/A - work already merged","dependencies":[{"issue_id":"tv-wisp-wisp-2wm1","depends_on_id":"tv-wisp-wisp-qesx","type":"parent-child","created_at":"2026-01-25T19:13:16.314370974-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2wm1","depends_on_id":"tv-wisp-wisp-fkhr","type":"blocks","created_at":"2026-01-25T19:13:16.756817074-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2yj6","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-7xtw\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-7xtw --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:07.790726333-08:00","updated_at":"2026-01-25T20:20:07.790726374-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2yj6","depends_on_id":"tv-wisp-wisp-hl8l","type":"parent-child","created_at":"2026-01-25T20:20:08.372826996-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2yj6","depends_on_id":"tv-wisp-wisp-krau","type":"blocks","created_at":"2026-01-25T20:20:09.079955824-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2yk7","title":"Generate handoff summary","description":"Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:38:02.237332178-08:00","updated_at":"2026-01-25T21:38:02.237332218-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2yk7","depends_on_id":"tv-wisp-wisp-chaw","type":"parent-child","created_at":"2026-01-25T21:38:03.001685413-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-2yk7","depends_on_id":"tv-wisp-wisp-x5j8","type":"blocks","created_at":"2026-01-25T21:38:04.033381668-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2yva","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-rmos\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:42:26.526539216-08:00","updated_at":"2026-01-25T16:43:11.474471593-08:00","closed_at":"2026-01-25T16:43:11.474471593-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-2yva","depends_on_id":"tv-wisp-wisp-pij2","type":"parent-child","created_at":"2026-01-25T16:42:26.546599986-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2yva","depends_on_id":"tv-wisp-wisp-v0eu","type":"blocks","created_at":"2026-01-25T16:42:26.701456444-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2zfj","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-jd9 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:25:31.735950712-08:00","updated_at":"2026-01-25T17:30:32.124444353-08:00","closed_at":"2026-01-25T17:30:32.124444353-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-2zfj","depends_on_id":"tv-wisp-wisp-mdl6","type":"parent-child","created_at":"2026-01-25T17:25:31.841794916-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2zfj","depends_on_id":"tv-wisp-wisp-77hr","type":"blocks","created_at":"2026-01-25T17:25:32.030709014-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-2zm6","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:10.042195213-08:00","updated_at":"2026-01-25T17:41:10.042195263-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-2zm6","depends_on_id":"tv-wisp-wisp-wv5q","type":"parent-child","created_at":"2026-01-25T17:41:10.30420345-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-2zm6","depends_on_id":"tv-wisp-wisp-5yt0","type":"blocks","created_at":"2026-01-25T17:41:10.639220651-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-324k","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:57:16.179120345-08:00","updated_at":"2026-01-25T14:57:16.179120375-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-324k","depends_on_id":"tv-wisp-wisp-l8h","type":"parent-child","created_at":"2026-01-25T14:57:16.203375911-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-324k","depends_on_id":"tv-wisp-wisp-8n6r","type":"blocks","created_at":"2026-01-25T14:57:16.237421296-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3729","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-o168           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-o168\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:47.703459494-08:00","updated_at":"2026-01-25T17:37:47.703459554-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3729","depends_on_id":"tv-wisp-wisp-9ksa","type":"parent-child","created_at":"2026-01-25T17:37:47.708202693-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3ctz","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-gddu           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-gddu\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:46:56.901030671-08:00","updated_at":"2026-01-25T17:46:56.901030722-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3ctz","depends_on_id":"tv-wisp-wisp-l96l","type":"parent-child","created_at":"2026-01-25T17:46:56.904199439-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3gnb","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-z9d7           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-z9d7\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T15:07:58.871920895-08:00","updated_at":"2026-01-25T20:07:21.336931842-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3gnb","depends_on_id":"tv-wisp-wisp-hroa","type":"parent-child","created_at":"2026-01-25T15:07:58.874554641-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3i2i","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-c85p)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-c85p\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:15:24.71168661-08:00","updated_at":"2026-01-25T20:15:24.71168665-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3i2i","depends_on_id":"tv-wisp-wisp-40l7","type":"parent-child","created_at":"2026-01-25T20:15:24.963913477-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-3i2i","depends_on_id":"tv-wisp-wisp-ndm0","type":"blocks","created_at":"2026-01-25T20:15:25.623402446-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3i6b","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-z20\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-z20 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:15:52.548952002-08:00","updated_at":"2026-01-25T19:15:52.548952052-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3i6b","depends_on_id":"tv-wisp-wisp-zkv0","type":"parent-child","created_at":"2026-01-25T19:15:52.966838841-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-3i6b","depends_on_id":"tv-wisp-wisp-sh19","type":"blocks","created_at":"2026-01-25T19:15:53.500585282-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3ipw","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-b3n).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-b3n\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:39.645928809-08:00","updated_at":"2026-01-25T15:04:39.64592889-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3ipw","depends_on_id":"tv-wisp-wisp-p4e1","type":"parent-child","created_at":"2026-01-25T15:04:39.659344003-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3jx7","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-rmos\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T16:42:26.528748421-08:00","updated_at":"2026-01-25T16:43:54.949765385-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3jx7","depends_on_id":"tv-wisp-wisp-pij2","type":"parent-child","created_at":"2026-01-25T16:42:26.682293952-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-3jx7","depends_on_id":"tv-wisp-wisp-l9nk","type":"blocks","created_at":"2026-01-25T16:42:26.828819153-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3ly8y","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:04:38.990172205-08:00","updated_at":"2026-01-25T22:04:38.990172235-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3ly8y","depends_on_id":"tv-wisp-wisp-0u79m","type":"parent-child","created_at":"2026-01-25T22:04:38.997543371-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3mcf","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:47.994426808-08:00","updated_at":"2026-01-25T15:29:47.994426879-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3mcf","depends_on_id":"tv-wisp-wisp-9umu","type":"parent-child","created_at":"2026-01-25T15:29:48.055622309-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-3mcf","depends_on_id":"tv-wisp-wisp-8t8w","type":"blocks","created_at":"2026-01-25T15:29:48.150883187-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3om","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-puj\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-puj --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:40.048615246-08:00","updated_at":"2026-01-25T13:51:29.952905635-08:00","closed_at":"2026-01-25T13:51:29.952905635-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-3om","depends_on_id":"tv-wisp-wisp-c60","type":"parent-child","created_at":"2026-01-25T13:45:40.070159391-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-3om","depends_on_id":"tv-wisp-wisp-ugj","type":"blocks","created_at":"2026-01-25T13:45:40.094287864-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3px2","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:41.758916197-08:00","updated_at":"2026-01-25T21:56:48.075306142-08:00","closed_at":"2026-01-25T21:56:48.075306142-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-3px2","depends_on_id":"tv-wisp-wisp-lanr","type":"parent-child","created_at":"2026-01-25T21:00:41.987833346-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-3px2","depends_on_id":"tv-wisp-wisp-z407","type":"blocks","created_at":"2026-01-25T21:00:42.867685069-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3r4wk","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:07:30.666773048-08:00","updated_at":"2026-01-25T22:07:30.666773078-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3r4wk","depends_on_id":"tv-wisp-wisp-mrf18","type":"parent-child","created_at":"2026-01-25T22:07:31.377987847-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-3r4wk","depends_on_id":"tv-wisp-wisp-5p3cm","type":"blocks","created_at":"2026-01-25T22:07:32.440083906-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3res","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-l0oc           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-l0oc\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:28:18.593819034-08:00","updated_at":"2026-01-25T17:31:48.973774-08:00","closed_at":"2026-01-25T17:31:48.973774-08:00","close_reason":"Context loaded. Feature already implemented in commit 152ec03d - this bead is a duplicate.","dependencies":[{"issue_id":"tv-wisp-wisp-3res","depends_on_id":"tv-wisp-wisp-p9hy","type":"parent-child","created_at":"2026-01-25T17:28:18.596814029-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3rjt","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-8b8\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-8b8 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:54.806101596-08:00","updated_at":"2026-01-25T15:09:54.806101656-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3rjt","depends_on_id":"tv-wisp-wisp-mt9u","type":"parent-child","created_at":"2026-01-25T15:09:54.870170008-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-3rjt","depends_on_id":"tv-wisp-wisp-rkp7","type":"blocks","created_at":"2026-01-25T15:09:54.937308931-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3tdd","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-rmos\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:43.852500422-08:00","updated_at":"2026-01-25T16:35:19.838200096-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3tdd","depends_on_id":"tv-wisp-wisp-zble","type":"parent-child","created_at":"2026-01-25T16:34:43.984629184-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-3tdd","depends_on_id":"tv-wisp-wisp-hpr1","type":"blocks","created_at":"2026-01-25T16:34:44.102968409-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3ur9","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-395fz\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:26.39023085-08:00","updated_at":"2026-01-25T20:18:36.821394795-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3ur9","depends_on_id":"tv-wisp-wisp-1k5c","type":"parent-child","created_at":"2026-01-25T20:07:27.905108246-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-3ur9","depends_on_id":"tv-wisp-wisp-sjb5","type":"blocks","created_at":"2026-01-25T20:07:29.162143429-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3wkk","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-wdia\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:28.492657106-08:00","updated_at":"2026-01-25T17:37:28.492657166-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3wkk","depends_on_id":"tv-wisp-wisp-08mh","type":"parent-child","created_at":"2026-01-25T17:37:28.797772258-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-3wkk","depends_on_id":"tv-wisp-wisp-jys9","type":"blocks","created_at":"2026-01-25T17:37:29.089142207-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3wko","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-wx7d should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:22:12.958745289-08:00","updated_at":"2026-01-25T19:22:12.958745319-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3wko","depends_on_id":"tv-wisp-wisp-zver","type":"parent-child","created_at":"2026-01-25T19:22:13.207194403-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-3wko","depends_on_id":"tv-wisp-wisp-6bho","type":"blocks","created_at":"2026-01-25T19:22:13.734742878-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3x9u","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-jnik           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-jnik\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:58.599124147-08:00","updated_at":"2026-01-25T17:44:58.599124207-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3x9u","depends_on_id":"tv-wisp-wisp-do23","type":"parent-child","created_at":"2026-01-25T17:44:58.604197712-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3y13","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-l0oc should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:28:18.595199302-08:00","updated_at":"2026-01-25T17:28:18.595199342-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3y13","depends_on_id":"tv-wisp-wisp-p9hy","type":"parent-child","created_at":"2026-01-25T17:28:18.70234879-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-3y13","depends_on_id":"tv-wisp-wisp-n658","type":"blocks","created_at":"2026-01-25T17:28:18.926505661-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3z15","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-jfi6\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-jfi6 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:41.92477331-08:00","updated_at":"2026-01-25T16:54:41.92477337-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3z15","depends_on_id":"tv-wisp-wisp-2w49","type":"parent-child","created_at":"2026-01-25T16:54:42.055463339-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-3z15","depends_on_id":"tv-wisp-wisp-jmiw","type":"blocks","created_at":"2026-01-25T16:54:42.207986489-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3zci","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-7xtw           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-7xtw\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:07.787566018-08:00","updated_at":"2026-01-25T20:20:07.787566058-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3zci","depends_on_id":"tv-wisp-wisp-hl8l","type":"parent-child","created_at":"2026-01-25T20:20:07.791712499-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-3zd8","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-z9d7)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-z9d7\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:07:58.87276495-08:00","updated_at":"2026-01-25T15:07:58.87276498-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-3zd8","depends_on_id":"tv-wisp-wisp-hroa","type":"parent-child","created_at":"2026-01-25T15:07:58.893317681-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-3zd8","depends_on_id":"tv-wisp-wisp-nc70","type":"blocks","created_at":"2026-01-25T15:07:58.959597631-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-40d","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-c035\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:45.57137374-08:00","updated_at":"2026-01-25T14:31:52.747287349-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-40d","depends_on_id":"tv-wisp-wisp-45i","type":"parent-child","created_at":"2026-01-25T13:44:45.578847258-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-40d","depends_on_id":"tv-wisp-wisp-q0p","type":"blocks","created_at":"2026-01-25T13:44:45.586353838-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-40l7","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T20:15:24.70951185-08:00","updated_at":"2026-01-25T20:15:24.70951189-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-41nc","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:41.66498343-08:00","updated_at":"2026-01-25T17:49:01.397111909-08:00","closed_at":"2026-01-25T17:49:01.397111909-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-41nc","depends_on_id":"tv-wisp-wisp-kb77","type":"parent-child","created_at":"2026-01-25T17:34:41.854330036-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-41nc","depends_on_id":"tv-wisp-wisp-jgx1","type":"blocks","created_at":"2026-01-25T17:34:42.11574381-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-45i","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T13:44:45.569369811-08:00","updated_at":"2026-01-25T13:44:45.569369851-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-45w","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-j1jx\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:52:53.985476407-08:00","updated_at":"2026-01-25T14:52:53.985476447-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-45w","depends_on_id":"tv-wisp-wisp-7h8","type":"parent-child","created_at":"2026-01-25T14:52:54.020791433-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-45w","depends_on_id":"tv-wisp-wisp-5zm","type":"blocks","created_at":"2026-01-25T14:52:54.048493233-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-46s2","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-gc5x)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-gc5x\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:47.992750131-08:00","updated_at":"2026-01-25T15:29:47.992750201-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-46s2","depends_on_id":"tv-wisp-wisp-9umu","type":"parent-child","created_at":"2026-01-25T15:29:48.032233635-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-46s2","depends_on_id":"tv-wisp-wisp-f1bg","type":"blocks","created_at":"2026-01-25T15:29:48.12814193-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-485","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-nz3n\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-nz3n --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:43:48.14635026-08:00","updated_at":"2026-01-25T14:43:48.14635031-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-485","depends_on_id":"tv-wisp-wisp-uuf","type":"parent-child","created_at":"2026-01-25T14:43:48.169584651-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-485","depends_on_id":"tv-wisp-wisp-pj6","type":"blocks","created_at":"2026-01-25T14:43:48.198061647-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-48a3","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-upwa should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:38.835826445-08:00","updated_at":"2026-01-25T16:54:38.835826495-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-48a3","depends_on_id":"tv-wisp-wisp-i7i6","type":"parent-child","created_at":"2026-01-25T16:54:38.908171538-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-48a3","depends_on_id":"tv-wisp-wisp-k1l4","type":"blocks","created_at":"2026-01-25T16:54:39.043009034-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-49aa","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-cbg           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-cbg\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:51.064495747-08:00","updated_at":"2026-01-25T19:15:21.018756762-08:00","closed_at":"2026-01-25T19:15:21.018756762-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-49aa","depends_on_id":"tv-wisp-wisp-v2zi","type":"parent-child","created_at":"2026-01-25T19:13:51.070497522-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-49ng","title":"Mechanical rebase","description":"Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/\u003cpolecat-branch\u003e\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2\u003e/dev/null \u0026\u0026 echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/\u003cpolecat-branch\u003e)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: \u003coriginal-issue-title\u003e\" --description=\"## Conflict Resolution Required\n\nOriginal MR: \u003cmr-bead-id\u003e\nBranch: \u003cpolecat-branch\u003e\nOriginal Issue: \u003cissue-id\u003e\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin \u003cbranch\u003e\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:41.222070575-08:00","updated_at":"2026-01-25T21:11:41.222070615-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-49ng","depends_on_id":"tv-wisp-wisp-jva9","type":"parent-child","created_at":"2026-01-25T21:11:41.470874069-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-49ng","depends_on_id":"tv-wisp-wisp-ymb9","type":"blocks","created_at":"2026-01-25T21:11:42.499036048-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-49w","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:45.570887295-08:00","updated_at":"2026-01-25T13:52:36.853119658-08:00","closed_at":"2026-01-25T13:52:36.853119658-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-49w","depends_on_id":"tv-wisp-wisp-45i","type":"parent-child","created_at":"2026-01-25T13:44:45.576296642-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-49w","depends_on_id":"tv-wisp-wisp-aky","type":"blocks","created_at":"2026-01-25T13:44:45.583462798-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-49yl","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:30:52.063215383-08:00","updated_at":"2026-01-25T17:33:14.210183636-08:00","closed_at":"2026-01-25T17:33:14.210183636-08:00","close_reason":"Not needed - feature already implemented","dependencies":[{"issue_id":"tv-wisp-wisp-49yl","depends_on_id":"tv-wisp-wisp-xx0i","type":"parent-child","created_at":"2026-01-25T17:30:52.206600188-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-49yl","depends_on_id":"tv-wisp-wisp-526y","type":"blocks","created_at":"2026-01-25T17:30:52.443259491-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4g93","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-wx7d).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-wx7d\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:22:12.957843275-08:00","updated_at":"2026-01-25T19:22:12.957843315-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4g93","depends_on_id":"tv-wisp-wisp-zver","type":"parent-child","created_at":"2026-01-25T19:22:13.083092881-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-4g93","depends_on_id":"tv-wisp-wisp-bf55","type":"blocks","created_at":"2026-01-25T19:22:13.603113711-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4ha7k","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:57.671264705-08:00","updated_at":"2026-01-25T21:54:57.671264745-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4ha7k","depends_on_id":"tv-wisp-wisp-i45n5","type":"parent-child","created_at":"2026-01-25T21:54:58.279263618-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-4ha7k","depends_on_id":"tv-wisp-wisp-xvauu","type":"blocks","created_at":"2026-01-25T21:54:59.172197592-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4hq","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-3ns\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:20.30179227-08:00","updated_at":"2026-01-25T13:47:33.187610934-08:00","closed_at":"2026-01-25T13:47:33.187610934-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-4hq","depends_on_id":"tv-wisp-wisp-735","type":"parent-child","created_at":"2026-01-25T13:45:20.30651652-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-4hq","depends_on_id":"tv-wisp-wisp-v26","type":"blocks","created_at":"2026-01-25T13:45:20.3183775-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4hwy","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:57.565450482-08:00","updated_at":"2026-01-25T15:04:57.565450522-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4hwy","depends_on_id":"tv-wisp-wisp-hl2y","type":"parent-child","created_at":"2026-01-25T15:04:57.599281767-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-4hwy","depends_on_id":"tv-wisp-wisp-4sy9","type":"blocks","created_at":"2026-01-25T15:04:57.644987981-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4jxc","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-318k should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:20:52.492817938-08:00","updated_at":"2026-01-25T19:20:52.492817998-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4jxc","depends_on_id":"tv-wisp-wisp-wkqr","type":"parent-child","created_at":"2026-01-25T19:20:52.754118426-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-4jxc","depends_on_id":"tv-wisp-wisp-ode8","type":"blocks","created_at":"2026-01-25T19:20:53.271274906-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4nh4e","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"hooked","priority":2,"issue_type":"epic","assignee":"tribal_village/witness","created_at":"2026-01-25T22:31:06.897751026-08:00","updated_at":"2026-01-25T22:31:15.473233992-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-4nu","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-puj)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-puj\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:40.047140152-08:00","updated_at":"2026-01-25T13:50:12.014017368-08:00","closed_at":"2026-01-25T13:50:12.014017368-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-4nu","depends_on_id":"tv-wisp-wisp-c60","type":"parent-child","created_at":"2026-01-25T13:45:40.058784477-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-4nu","depends_on_id":"tv-wisp-wisp-76l","type":"blocks","created_at":"2026-01-25T13:45:40.082086392-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4o0oi","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:12:14.192606866-08:00","updated_at":"2026-01-25T22:12:14.192606906-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4o0oi","depends_on_id":"tv-wisp-wisp-dbfyj","type":"parent-child","created_at":"2026-01-25T22:12:15.279948988-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-4o0oi","depends_on_id":"tv-wisp-wisp-shk6t","type":"blocks","created_at":"2026-01-25T22:12:16.386063048-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4pg","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-8b8           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-8b8\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:56:39.840635013-08:00","updated_at":"2026-01-25T14:56:39.840635044-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4pg","depends_on_id":"tv-wisp-wisp-g5f","type":"parent-child","created_at":"2026-01-25T14:56:39.842572484-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4pyr","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-z9d7\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:07:58.874169271-08:00","updated_at":"2026-01-25T15:07:58.874169312-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4pyr","depends_on_id":"tv-wisp-wisp-hroa","type":"parent-child","created_at":"2026-01-25T15:07:58.933987019-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-4pyr","depends_on_id":"tv-wisp-wisp-hioq","type":"blocks","created_at":"2026-01-25T15:07:58.992805432-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4qef","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:00.022494201-08:00","updated_at":"2026-01-25T17:41:00.022494261-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4qef","depends_on_id":"tv-wisp-wisp-0t3r","type":"parent-child","created_at":"2026-01-25T17:41:00.277465045-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-4qef","depends_on_id":"tv-wisp-wisp-2nyx","type":"blocks","created_at":"2026-01-25T17:41:00.618953033-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4rj","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-2bk\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:47.969876422-08:00","updated_at":"2026-01-25T14:38:47.969876452-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4rj","depends_on_id":"tv-wisp-wisp-7ym","type":"parent-child","created_at":"2026-01-25T14:38:47.992865255-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-4rj","depends_on_id":"tv-wisp-wisp-0cy","type":"blocks","created_at":"2026-01-25T14:38:48.01550088-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4rt5","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-uor5\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-uor5 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:15.599825919-08:00","updated_at":"2026-01-25T17:36:19.950828105-08:00","closed_at":"2026-01-25T17:36:19.950828105-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-4rt5","depends_on_id":"tv-wisp-wisp-ce9t","type":"parent-child","created_at":"2026-01-25T17:31:15.823908293-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-4rt5","depends_on_id":"tv-wisp-wisp-ocdc","type":"blocks","created_at":"2026-01-25T17:31:16.062329201-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4serm","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T22:08:35.668237513-08:00","updated_at":"2026-01-25T22:08:35.668237543-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-4suf","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-dtqk\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:40:01.325972009-08:00","updated_at":"2026-01-25T17:40:01.325972079-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4suf","depends_on_id":"tv-wisp-wisp-f2ka","type":"parent-child","created_at":"2026-01-25T17:40:01.806179935-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-4suf","depends_on_id":"tv-wisp-wisp-jooa","type":"blocks","created_at":"2026-01-25T17:40:02.307579531-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4sy9","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:57.565217718-08:00","updated_at":"2026-01-25T15:04:57.565217748-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4sy9","depends_on_id":"tv-wisp-wisp-hl2y","type":"parent-child","created_at":"2026-01-25T15:04:57.593794133-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-4sy9","depends_on_id":"tv-wisp-wisp-uzzy","type":"blocks","created_at":"2026-01-25T15:04:57.639129945-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4tik8","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (hq-cv-bsv3u).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: hq-cv-bsv3u\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:17.68389277-08:00","updated_at":"2026-01-25T21:54:17.68389281-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4tik8","depends_on_id":"tv-wisp-wisp-zyr6q","type":"parent-child","created_at":"2026-01-25T21:54:17.917721119-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-4tik8","depends_on_id":"tv-wisp-wisp-addnw","type":"blocks","created_at":"2026-01-25T21:54:18.783517816-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4ut","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-8b8 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:56:39.841499088-08:00","updated_at":"2026-01-25T14:56:39.841499128-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4ut","depends_on_id":"tv-wisp-wisp-g5f","type":"parent-child","created_at":"2026-01-25T14:56:39.854873858-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4xfn","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-02f7).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-02f7\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:45.030664011-08:00","updated_at":"2026-01-25T16:54:45.030664061-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4xfn","depends_on_id":"tv-wisp-wisp-mylm","type":"parent-child","created_at":"2026-01-25T16:54:45.076886341-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-4xfn","depends_on_id":"tv-wisp-wisp-1tuo","type":"blocks","created_at":"2026-01-25T16:54:45.238986294-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4z9uz","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:19:52.885608849-08:00","updated_at":"2026-01-25T22:19:52.885608899-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4z9uz","depends_on_id":"tv-wisp-wisp-ep1u6","type":"parent-child","created_at":"2026-01-25T22:19:53.491495992-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-4z9uz","depends_on_id":"tv-wisp-wisp-8k108","type":"blocks","created_at":"2026-01-25T22:19:54.602005215-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4zf","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-c035           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-c035\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:45.569909596-08:00","updated_at":"2026-01-25T13:45:24.937475713-08:00","closed_at":"2026-01-25T13:45:24.937475713-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-4zf","depends_on_id":"tv-wisp-wisp-45i","type":"parent-child","created_at":"2026-01-25T13:44:45.571690219-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-4zro","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-b3n\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:18.803695768-08:00","updated_at":"2026-01-25T15:09:18.803695808-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-4zro","depends_on_id":"tv-wisp-wisp-86en","type":"parent-child","created_at":"2026-01-25T15:09:18.812497084-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-4zro","depends_on_id":"tv-wisp-wisp-0tgo","type":"blocks","created_at":"2026-01-25T15:09:18.865264528-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-526y","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-z7q5 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:30:52.062921624-08:00","updated_at":"2026-01-25T17:33:14.062142672-08:00","closed_at":"2026-01-25T17:33:14.062142672-08:00","close_reason":"Not needed - feature already implemented","dependencies":[{"issue_id":"tv-wisp-wisp-526y","depends_on_id":"tv-wisp-wisp-xx0i","type":"parent-child","created_at":"2026-01-25T17:30:52.179593088-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-526y","depends_on_id":"tv-wisp-wisp-hpak","type":"blocks","created_at":"2026-01-25T17:30:52.407367665-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-548","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T13:44:44.985878608-08:00","updated_at":"2026-01-25T13:44:44.985878648-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-54yd","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-8ro should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:06:21.221212707-08:00","updated_at":"2026-01-25T16:06:21.221212737-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-54yd","depends_on_id":"tv-wisp-wisp-pysf","type":"parent-child","created_at":"2026-01-25T16:06:21.273536791-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-54yd","depends_on_id":"tv-wisp-wisp-oqjr","type":"blocks","created_at":"2026-01-25T16:06:21.373553854-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-57df","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-433           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-433\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:57.563162862-08:00","updated_at":"2026-01-25T15:04:57.563162932-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-57df","depends_on_id":"tv-wisp-wisp-hl2y","type":"parent-child","created_at":"2026-01-25T15:04:57.566364158-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-58fu","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-cx6z\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:21:13.448059559-08:00","updated_at":"2026-01-25T20:21:13.448059619-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-58fu","depends_on_id":"tv-wisp-wisp-5nrw","type":"parent-child","created_at":"2026-01-25T20:21:14.131760114-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-58fu","depends_on_id":"tv-wisp-wisp-9vkn","type":"blocks","created_at":"2026-01-25T20:21:14.833979151-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-58fz","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T16:34:50.536057925-08:00","updated_at":"2026-01-25T16:34:50.536057965-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-590","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-nz3n).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-nz3n\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:43:48.144718506-08:00","updated_at":"2026-01-25T14:43:48.144718546-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-590","depends_on_id":"tv-wisp-wisp-uuf","type":"parent-child","created_at":"2026-01-25T14:43:48.15398124-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-590","depends_on_id":"tv-wisp-wisp-ziu","type":"blocks","created_at":"2026-01-25T14:43:48.179894792-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-59hk","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T16:07:28.15777963-08:00","updated_at":"2026-01-25T16:07:28.15777967-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-5cw1","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-0pkq)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-0pkq\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:28.756550257-08:00","updated_at":"2026-01-25T20:20:28.756550297-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5cw1","depends_on_id":"tv-wisp-wisp-tcnq","type":"parent-child","created_at":"2026-01-25T20:20:29.03901498-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5cw1","depends_on_id":"tv-wisp-wisp-2mo1","type":"blocks","created_at":"2026-01-25T20:20:29.706338293-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5d99","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:12.276858481-08:00","updated_at":"2026-01-25T19:10:12.276858511-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5d99","depends_on_id":"tv-wisp-wisp-ud7x","type":"parent-child","created_at":"2026-01-25T19:10:12.521267277-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5d99","depends_on_id":"tv-wisp-wisp-kd72","type":"blocks","created_at":"2026-01-25T19:10:12.936455626-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5exa","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-376f\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-376f --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:25:24.606974147-08:00","updated_at":"2026-01-25T19:25:24.606974197-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5exa","depends_on_id":"tv-wisp-wisp-y86p","type":"parent-child","created_at":"2026-01-25T19:25:25.103003594-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5exa","depends_on_id":"tv-wisp-wisp-tltx","type":"blocks","created_at":"2026-01-25T19:25:25.645452521-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5fc4","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:45.032244266-08:00","updated_at":"2026-01-25T16:54:45.032244326-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5fc4","depends_on_id":"tv-wisp-wisp-mylm","type":"parent-child","created_at":"2026-01-25T16:54:45.158232291-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5fc4","depends_on_id":"tv-wisp-wisp-leb9","type":"blocks","created_at":"2026-01-25T16:54:45.31497057-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5g1z","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-gvv3 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:48:28.900948032-08:00","updated_at":"2026-01-25T17:48:28.900948072-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5g1z","depends_on_id":"tv-wisp-wisp-kic6","type":"parent-child","created_at":"2026-01-25T17:48:29.110891912-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5g1z","depends_on_id":"tv-wisp-wisp-626k","type":"blocks","created_at":"2026-01-25T17:48:29.51070404-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5g39","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:40:01.324879568-08:00","updated_at":"2026-01-25T17:40:01.324879649-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5g39","depends_on_id":"tv-wisp-wisp-f2ka","type":"parent-child","created_at":"2026-01-25T17:40:01.681389679-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5g39","depends_on_id":"tv-wisp-wisp-79nh","type":"blocks","created_at":"2026-01-25T17:40:02.181755263-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5idx","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-puj\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:52.55674757-08:00","updated_at":"2026-01-25T19:12:19.324387489-08:00","closed_at":"2026-01-25T19:12:19.324387489-08:00","close_reason":"Work already completed and merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-5idx","depends_on_id":"tv-wisp-wisp-kls4","type":"parent-child","created_at":"2026-01-25T19:10:52.615531154-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5idx","depends_on_id":"tv-wisp-wisp-d463","type":"blocks","created_at":"2026-01-25T19:10:53.084532731-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5isr","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-8z2q).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-8z2q\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:54.758265385-08:00","updated_at":"2026-01-25T17:44:04.2900368-08:00","closed_at":"2026-01-25T17:44:04.2900368-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-5isr","depends_on_id":"tv-wisp-wisp-kdbr","type":"parent-child","created_at":"2026-01-25T17:41:54.852428607-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5isr","depends_on_id":"tv-wisp-wisp-9u49","type":"blocks","created_at":"2026-01-25T17:41:55.197396128-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5j0s","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:28:18.59549778-08:00","updated_at":"2026-01-25T17:28:18.59549782-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5j0s","depends_on_id":"tv-wisp-wisp-p9hy","type":"parent-child","created_at":"2026-01-25T17:28:18.729870225-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5j0s","depends_on_id":"tv-wisp-wisp-3y13","type":"blocks","created_at":"2026-01-25T17:28:18.962355846-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5jv0g","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"hooked","priority":2,"issue_type":"epic","assignee":"tribal_village/witness","created_at":"2026-01-25T21:59:35.359459655-08:00","updated_at":"2026-01-25T21:59:41.552415246-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-5k5","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-c035).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-c035\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:45.570340007-08:00","updated_at":"2026-01-25T13:46:19.746455438-08:00","closed_at":"2026-01-25T13:46:19.746455438-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-5k5","depends_on_id":"tv-wisp-wisp-45i","type":"parent-child","created_at":"2026-01-25T13:44:45.573665856-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5k5","depends_on_id":"tv-wisp-wisp-9tw","type":"blocks","created_at":"2026-01-25T13:44:45.58063752-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5lqs","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-v9cm)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-v9cm\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:16:29.375557741-08:00","updated_at":"2026-01-25T15:16:29.375557781-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5lqs","depends_on_id":"tv-wisp-wisp-xsuu","type":"parent-child","created_at":"2026-01-25T15:16:29.403333595-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5lqs","depends_on_id":"tv-wisp-wisp-sd3a","type":"blocks","created_at":"2026-01-25T15:16:29.472577539-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5mge","title":"Check for more work","description":"More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:10.489519638-08:00","updated_at":"2026-01-25T21:00:10.489519688-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5mge","depends_on_id":"tv-wisp-wisp-u7fv","type":"parent-child","created_at":"2026-01-25T21:00:11.149266983-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-5mge","depends_on_id":"tv-wisp-wisp-ldd6","type":"blocks","created_at":"2026-01-25T21:00:12.144469494-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5nd5","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:16.691489176-08:00","updated_at":"2026-01-25T19:20:00.600639649-08:00","closed_at":"2026-01-25T19:20:00.600639649-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-5nd5","depends_on_id":"tv-wisp-wisp-2pyz","type":"parent-child","created_at":"2026-01-25T19:16:16.994481244-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5nd5","depends_on_id":"tv-wisp-wisp-ejdf","type":"blocks","created_at":"2026-01-25T19:16:17.459593228-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5nrw","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T20:21:13.441725546-08:00","updated_at":"2026-01-25T20:21:13.441725616-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-5o2b","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-b3n).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-b3n\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:18.803954-08:00","updated_at":"2026-01-25T15:09:18.80395403-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5o2b","depends_on_id":"tv-wisp-wisp-86en","type":"parent-child","created_at":"2026-01-25T15:09:18.819202259-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5o2b","depends_on_id":"tv-wisp-wisp-4zro","type":"blocks","created_at":"2026-01-25T15:09:18.871857773-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5p3cm","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:07:30.666342789-08:00","updated_at":"2026-01-25T22:07:30.666342829-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5p3cm","depends_on_id":"tv-wisp-wisp-mrf18","type":"parent-child","created_at":"2026-01-25T22:07:31.261032403-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-5p3cm","depends_on_id":"tv-wisp-wisp-761e2","type":"blocks","created_at":"2026-01-25T22:07:32.32207627-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5pml","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-1rmd)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-1rmd\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:12.276139949-08:00","updated_at":"2026-01-25T19:10:12.276139989-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5pml","depends_on_id":"tv-wisp-wisp-ud7x","type":"parent-child","created_at":"2026-01-25T19:10:12.425177097-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5pml","depends_on_id":"tv-wisp-wisp-ky0b","type":"blocks","created_at":"2026-01-25T19:10:12.837694118-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5qr1","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-wx7d\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:22:12.960416911-08:00","updated_at":"2026-01-25T19:22:12.960416951-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5qr1","depends_on_id":"tv-wisp-wisp-zver","type":"parent-child","created_at":"2026-01-25T19:22:13.46884231-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5qr1","depends_on_id":"tv-wisp-wisp-z2c9","type":"blocks","created_at":"2026-01-25T19:22:13.992764033-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5qy3","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:56:36.376087429-08:00","updated_at":"2026-01-25T19:56:36.376087459-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5qy3","depends_on_id":"tv-wisp-wisp-vlrj","type":"parent-child","created_at":"2026-01-25T19:56:36.827569211-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5qy3","depends_on_id":"tv-wisp-wisp-0ohr","type":"blocks","created_at":"2026-01-25T19:56:37.436635601-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5snm","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-eov5           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-eov5\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:10.038744097-08:00","updated_at":"2026-01-25T17:41:10.038744178-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5snm","depends_on_id":"tv-wisp-wisp-wv5q","type":"parent-child","created_at":"2026-01-25T17:41:10.043941635-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5us","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-agd)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-agd\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:35:55.222007693-08:00","updated_at":"2026-01-25T14:35:55.222007723-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5us","depends_on_id":"tv-wisp-wisp-9yt","type":"parent-child","created_at":"2026-01-25T14:35:55.226948565-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5us","depends_on_id":"tv-wisp-wisp-iwm","type":"blocks","created_at":"2026-01-25T14:35:55.236681323-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5v5s","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-5d7t)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-5d7t\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:56:36.374794265-08:00","updated_at":"2026-01-25T19:56:36.374794295-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5v5s","depends_on_id":"tv-wisp-wisp-vlrj","type":"parent-child","created_at":"2026-01-25T19:56:36.60007151-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5v5s","depends_on_id":"tv-wisp-wisp-e9na","type":"blocks","created_at":"2026-01-25T19:56:37.189013813-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5vtao","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:06:20.67753979-08:00","updated_at":"2026-01-25T22:06:20.67753983-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5vtao","depends_on_id":"tv-wisp-wisp-6rbz8","type":"parent-child","created_at":"2026-01-25T22:06:21.483655881-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-5vtao","depends_on_id":"tv-wisp-wisp-t97at","type":"blocks","created_at":"2026-01-25T22:06:22.542766029-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5vvt","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-5o2p           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-5o2p\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:55.297036303-08:00","updated_at":"2026-01-25T17:34:55.297036373-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5vvt","depends_on_id":"tv-wisp-wisp-2t2z","type":"parent-child","created_at":"2026-01-25T17:34:55.301866916-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5y9w","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-v0lg).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-v0lg\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:44.687216743-08:00","updated_at":"2026-01-25T19:23:29.905641691-08:00","closed_at":"2026-01-25T19:23:29.905641691-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-5y9w","depends_on_id":"tv-wisp-wisp-07f2","type":"parent-child","created_at":"2026-01-25T19:16:44.812212143-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5y9w","depends_on_id":"tv-wisp-wisp-6tem","type":"blocks","created_at":"2026-01-25T19:16:45.336063109-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5ypiz","title":"Merge and push to main","description":"Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send \u003crig\u003e/witness -s \"MERGED \u003cpolecat-name\u003e\" -m \"Branch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"\u003cissue-id\u003e\"\n# OR verify the commit SHA is on main:\ngit branch --contains \u003ccommit-sha\u003e | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close \u003cmr-bead-id\u003e --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep \u003cpolecat-name\u003e\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive \u003cmerge-ready-message-id\u003e\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete \u003cpolecat-branch\u003e\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:46:06.933201167-08:00","updated_at":"2026-01-25T22:46:06.933201207-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5ypiz","depends_on_id":"tv-wisp-wisp-rqw9g","type":"parent-child","created_at":"2026-01-25T22:46:07.651429994-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-5ypiz","depends_on_id":"tv-wisp-wisp-g0x4z","type":"blocks","created_at":"2026-01-25T22:46:09.004230337-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5yt0","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:10.041425145-08:00","updated_at":"2026-01-25T17:41:10.041425205-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5yt0","depends_on_id":"tv-wisp-wisp-wv5q","type":"parent-child","created_at":"2026-01-25T17:41:10.264188045-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5yt0","depends_on_id":"tv-wisp-wisp-lt2f","type":"blocks","created_at":"2026-01-25T17:41:10.598349118-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5zl01","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:52:19.640171438-08:00","updated_at":"2026-01-25T21:52:19.640171478-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5zl01","depends_on_id":"tv-wisp-wisp-f1fv","type":"parent-child","created_at":"2026-01-25T21:52:19.97013082-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-5zl01","depends_on_id":"tv-wisp-wisp-aaqc","type":"blocks","created_at":"2026-01-25T21:52:20.941413343-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-5zm","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-j1jx\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-j1jx --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:52:53.98526942-08:00","updated_at":"2026-01-25T14:52:53.98526945-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-5zm","depends_on_id":"tv-wisp-wisp-7h8","type":"parent-child","created_at":"2026-01-25T14:52:54.016135276-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-5zm","depends_on_id":"tv-wisp-wisp-17n","type":"blocks","created_at":"2026-01-25T14:52:54.045313317-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-60af","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-2mu6\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-2mu6 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:27:41.562327169-08:00","updated_at":"2026-01-25T19:27:41.562327219-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-60af","depends_on_id":"tv-wisp-wisp-dreg","type":"parent-child","created_at":"2026-01-25T19:27:42.028551507-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-60af","depends_on_id":"tv-wisp-wisp-p9q5","type":"blocks","created_at":"2026-01-25T19:27:42.578982819-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-626k","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-gvv3)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-gvv3\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:48:28.900603088-08:00","updated_at":"2026-01-25T17:48:28.900603128-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-626k","depends_on_id":"tv-wisp-wisp-kic6","type":"parent-child","created_at":"2026-01-25T17:48:29.063181591-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-626k","depends_on_id":"tv-wisp-wisp-yr96","type":"blocks","created_at":"2026-01-25T17:48:29.463414785-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6283","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-cbg should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:51.067380172-08:00","updated_at":"2026-01-25T19:21:57.747423868-08:00","closed_at":"2026-01-25T19:21:57.747423868-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-6283","depends_on_id":"tv-wisp-wisp-v2zi","type":"parent-child","created_at":"2026-01-25T19:13:51.304933337-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6283","depends_on_id":"tv-wisp-wisp-o1gr","type":"blocks","created_at":"2026-01-25T19:13:51.79880242-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-62pp","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/\u003cbranch\u003e`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"\u003csource_issue\u003e\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:10.491958764-08:00","updated_at":"2026-01-25T21:00:10.491958834-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-62pp","depends_on_id":"tv-wisp-wisp-u7fv","type":"parent-child","created_at":"2026-01-25T21:00:11.420721338-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-62pp","depends_on_id":"tv-wisp-wisp-s45m","type":"blocks","created_at":"2026-01-25T21:00:12.483709069-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-65l9","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-upwa\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-upwa --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:38.836956327-08:00","updated_at":"2026-01-25T16:54:38.836956387-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-65l9","depends_on_id":"tv-wisp-wisp-i7i6","type":"parent-child","created_at":"2026-01-25T16:54:38.956662231-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-65l9","depends_on_id":"tv-wisp-wisp-1kzg","type":"blocks","created_at":"2026-01-25T16:54:39.099256369-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-65me","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-32y6\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:28.161591597-08:00","updated_at":"2026-01-25T16:12:33.545079065-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-65me","depends_on_id":"tv-wisp-wisp-59hk","type":"parent-child","created_at":"2026-01-25T16:07:28.292906725-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-65me","depends_on_id":"tv-wisp-wisp-755c","type":"blocks","created_at":"2026-01-25T16:07:28.416420378-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-66jr","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:52:19.638020918-08:00","updated_at":"2026-01-25T21:52:19.638020958-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-66jr","depends_on_id":"tv-wisp-wisp-f1fv","type":"parent-child","created_at":"2026-01-25T21:52:19.644863658-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-66w7","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-746p           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-746p\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:38.426726322-08:00","updated_at":"2026-01-25T17:44:38.426726362-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-66w7","depends_on_id":"tv-wisp-wisp-7urn","type":"parent-child","created_at":"2026-01-25T17:44:38.430118347-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-67n","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-1rmd should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:41:43.85168291-08:00","updated_at":"2026-01-25T14:46:47.036760969-08:00","closed_at":"2026-01-25T14:46:47.036760969-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-67n","depends_on_id":"tv-wisp-wisp-mni","type":"parent-child","created_at":"2026-01-25T14:41:43.863658488-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-67n","depends_on_id":"tv-wisp-wisp-295","type":"blocks","created_at":"2026-01-25T14:41:43.886425899-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6ar2","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-bbok).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-bbok\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:32:03.799522898-08:00","updated_at":"2026-01-25T17:32:03.799522938-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-6ar2","depends_on_id":"tv-wisp-wisp-19n1","type":"parent-child","created_at":"2026-01-25T17:32:03.869874922-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6ar2","depends_on_id":"tv-wisp-wisp-hs54","type":"blocks","created_at":"2026-01-25T17:32:04.146655694-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6bfm","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-d6jo).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-d6jo\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:57:57.423964969-08:00","updated_at":"2026-01-25T19:57:57.423965009-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-6bfm","depends_on_id":"tv-wisp-wisp-rah4","type":"parent-child","created_at":"2026-01-25T19:57:57.585498242-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6bfm","depends_on_id":"tv-wisp-wisp-z61v","type":"blocks","created_at":"2026-01-25T19:57:58.173883941-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6bho","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-wx7d)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-wx7d\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:22:12.958340494-08:00","updated_at":"2026-01-25T19:22:12.958340544-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-6bho","depends_on_id":"tv-wisp-wisp-zver","type":"parent-child","created_at":"2026-01-25T19:22:13.14404713-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6bho","depends_on_id":"tv-wisp-wisp-4g93","type":"blocks","created_at":"2026-01-25T19:22:13.669355983-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6ev","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-puj\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:40.046404383-08:00","updated_at":"2026-01-25T13:48:30.826811983-08:00","closed_at":"2026-01-25T13:48:30.826811983-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-6ev","depends_on_id":"tv-wisp-wisp-c60","type":"parent-child","created_at":"2026-01-25T13:45:40.052876715-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6ev","depends_on_id":"tv-wisp-wisp-dpk","type":"blocks","created_at":"2026-01-25T13:45:40.076284968-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6f77","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-wdia\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:28.489293333-08:00","updated_at":"2026-01-25T17:37:28.489293403-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-6f77","depends_on_id":"tv-wisp-wisp-08mh","type":"parent-child","created_at":"2026-01-25T17:37:28.530413044-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6f77","depends_on_id":"tv-wisp-wisp-thyd","type":"blocks","created_at":"2026-01-25T17:37:28.836131001-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6hqm","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-376f should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:25:24.605771542-08:00","updated_at":"2026-01-25T19:25:24.605771592-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-6hqm","depends_on_id":"tv-wisp-wisp-y86p","type":"parent-child","created_at":"2026-01-25T19:25:24.900661667-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6hqm","depends_on_id":"tv-wisp-wisp-6lwt","type":"blocks","created_at":"2026-01-25T19:25:25.442246501-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6imy","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T21:00:06.915476265-08:00","updated_at":"2026-01-25T21:00:06.915476325-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-6ir1","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-6e991)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-6e991\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:34.707625892-08:00","updated_at":"2026-01-25T20:12:17.394737008-08:00","closed_at":"2026-01-25T20:12:17.394737008-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-6ir1","depends_on_id":"tv-wisp-wisp-cj2u","type":"parent-child","created_at":"2026-01-25T20:07:35.10456565-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6ir1","depends_on_id":"tv-wisp-wisp-8tw3","type":"blocks","created_at":"2026-01-25T20:07:35.979603873-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6lwt","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-376f)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-376f\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:25:24.605302185-08:00","updated_at":"2026-01-25T19:25:24.605302225-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-6lwt","depends_on_id":"tv-wisp-wisp-y86p","type":"parent-child","created_at":"2026-01-25T19:25:24.808685717-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6lwt","depends_on_id":"tv-wisp-wisp-fjqx","type":"blocks","created_at":"2026-01-25T19:25:25.376013586-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6nzu4","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:52:19.643227679-08:00","updated_at":"2026-01-25T21:52:19.643227719-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-6nzu4","depends_on_id":"tv-wisp-wisp-f1fv","type":"parent-child","created_at":"2026-01-25T21:52:20.512651254-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-6nzu4","depends_on_id":"tv-wisp-wisp-hf66w","type":"blocks","created_at":"2026-01-25T21:52:21.485430903-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6oei","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-eov5\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-eov5 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:10.042743206-08:00","updated_at":"2026-01-25T17:41:10.042743277-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-6oei","depends_on_id":"tv-wisp-wisp-wv5q","type":"parent-child","created_at":"2026-01-25T17:41:10.343821232-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6oei","depends_on_id":"tv-wisp-wisp-2zm6","type":"blocks","created_at":"2026-01-25T17:41:10.681941478-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6oh","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-agd\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-agd --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:35:55.222699812-08:00","updated_at":"2026-01-25T14:35:55.222699852-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-6oh","depends_on_id":"tv-wisp-wisp-9yt","type":"parent-child","created_at":"2026-01-25T14:35:55.231837862-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6oh","depends_on_id":"tv-wisp-wisp-ma1","type":"blocks","created_at":"2026-01-25T14:35:55.242436422-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6ouz","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-oyub\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:45:07.968977521-08:00","updated_at":"2026-01-25T17:56:28.579048941-08:00","closed_at":"2026-01-25T17:56:28.579048941-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-6ouz","depends_on_id":"tv-wisp-wisp-n3rx","type":"parent-child","created_at":"2026-01-25T17:45:08.330098343-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6ouz","depends_on_id":"tv-wisp-wisp-a1ju","type":"blocks","created_at":"2026-01-25T17:45:08.712750967-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6pbk","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:23:52.920478305-08:00","updated_at":"2026-01-25T17:26:54.205761853-08:00","closed_at":"2026-01-25T17:26:54.205761853-08:00","close_reason":"Duplicate issue - feature implemented as tv-r0vv","ephemeral":true}
{"id":"tv-wisp-wisp-6pcx","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:57.547771289-08:00","updated_at":"2026-01-25T19:54:54.377724894-08:00","closed_at":"2026-01-25T19:54:54.377724894-08:00","close_reason":"Workspace clean, branch pushed to origin","dependencies":[{"issue_id":"tv-wisp-wisp-6pcx","depends_on_id":"tv-wisp-wisp-hhw1","type":"parent-child","created_at":"2026-01-25T19:47:58.012834541-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6pcx","depends_on_id":"tv-wisp-wisp-am1t","type":"blocks","created_at":"2026-01-25T19:47:58.600065576-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6pl46","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:25:19.470603488-08:00","updated_at":"2026-01-25T22:25:19.470603548-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-6pl46","depends_on_id":"tv-wisp-wisp-fl6o4","type":"parent-child","created_at":"2026-01-25T22:25:19.912561386-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-6pl46","depends_on_id":"tv-wisp-wisp-svrwl","type":"blocks","created_at":"2026-01-25T22:25:21.094511941-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6px","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-96g)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-96g\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:36.495493179-08:00","updated_at":"2026-01-25T14:43:00.271198756-08:00","closed_at":"2026-01-25T14:43:00.271198756-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-6px","depends_on_id":"tv-wisp-wisp-lw5","type":"parent-child","created_at":"2026-01-25T14:37:36.501377896-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6px","depends_on_id":"tv-wisp-wisp-763","type":"blocks","created_at":"2026-01-25T14:37:36.513312341-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6pxe","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-z7q5).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-z7q5\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:30:52.062318778-08:00","updated_at":"2026-01-25T17:33:13.655656943-08:00","closed_at":"2026-01-25T17:33:13.655656943-08:00","close_reason":"Not needed - feature already implemented","dependencies":[{"issue_id":"tv-wisp-wisp-6pxe","depends_on_id":"tv-wisp-wisp-xx0i","type":"parent-child","created_at":"2026-01-25T17:30:52.11823469-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6pxe","depends_on_id":"tv-wisp-wisp-oif7","type":"blocks","created_at":"2026-01-25T17:30:52.346361645-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6qovn","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"hooked","priority":2,"issue_type":"epic","assignee":"tribal_village/witness","created_at":"2026-01-25T22:29:44.582268006-08:00","updated_at":"2026-01-25T22:29:56.479752117-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-6r8r","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:22:12.95963486-08:00","updated_at":"2026-01-25T19:22:12.9596349-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-6r8r","depends_on_id":"tv-wisp-wisp-zver","type":"parent-child","created_at":"2026-01-25T19:22:13.329539395-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6r8r","depends_on_id":"tv-wisp-wisp-ttuv","type":"blocks","created_at":"2026-01-25T19:22:13.864142392-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6rbz8","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T22:06:20.673469984-08:00","updated_at":"2026-01-25T22:06:20.673470024-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-6rl","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-8b8\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:56:39.840883227-08:00","updated_at":"2026-01-25T14:56:39.840883267-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-6rl","depends_on_id":"tv-wisp-wisp-g5f","type":"parent-child","created_at":"2026-01-25T14:56:39.845777602-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6rl","depends_on_id":"tv-wisp-wisp-4pg","type":"blocks","created_at":"2026-01-25T14:56:39.875070805-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6sss8","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:19:52.886237949-08:00","updated_at":"2026-01-25T22:19:52.886237989-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-6sss8","depends_on_id":"tv-wisp-wisp-ep1u6","type":"parent-child","created_at":"2026-01-25T22:19:53.611314488-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-6sss8","depends_on_id":"tv-wisp-wisp-4z9uz","type":"blocks","created_at":"2026-01-25T22:19:54.730275607-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6t4nx","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: hq-cv-bsv3u\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:17.688567227-08:00","updated_at":"2026-01-25T21:54:17.688567267-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-6t4nx","depends_on_id":"tv-wisp-wisp-zyr6q","type":"parent-child","created_at":"2026-01-25T21:54:18.569073709-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6t4nx","depends_on_id":"tv-wisp-wisp-fo9so","type":"blocks","created_at":"2026-01-25T21:54:19.440873701-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6tem","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-v0lg\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:44.686591085-08:00","updated_at":"2026-01-25T19:18:41.629756235-08:00","closed_at":"2026-01-25T19:18:41.629756235-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-6tem","depends_on_id":"tv-wisp-wisp-07f2","type":"parent-child","created_at":"2026-01-25T19:16:44.750982741-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6tem","depends_on_id":"tv-wisp-wisp-vgxa","type":"blocks","created_at":"2026-01-25T19:16:45.270348372-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6zhy","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-xlji should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:47.416723755-08:00","updated_at":"2026-01-25T16:39:24.573141669-08:00","closed_at":"2026-01-25T16:39:24.573141669-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-6zhy","depends_on_id":"tv-wisp-wisp-71un","type":"parent-child","created_at":"2026-01-25T16:34:47.482993794-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6zhy","depends_on_id":"tv-wisp-wisp-jjl3","type":"blocks","created_at":"2026-01-25T16:34:47.606986168-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-6znd","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:27:22.43149076-08:00","updated_at":"2026-01-25T17:27:22.431490811-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-6znd","depends_on_id":"tv-wisp-wisp-jyha","type":"parent-child","created_at":"2026-01-25T17:27:22.599791553-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-6znd","depends_on_id":"tv-wisp-wisp-oxmj","type":"blocks","created_at":"2026-01-25T17:27:22.806001707-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-71un","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T16:34:47.414008513-08:00","updated_at":"2026-01-25T16:34:47.414008573-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-72m4e","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T22:31:06.89899502-08:00","updated_at":"2026-01-25T22:32:02.083581293-08:00","closed_at":"2026-01-25T22:32:02.083581293-08:00","close_reason":"Inbox empty.","dependencies":[{"issue_id":"tv-wisp-wisp-72m4e","depends_on_id":"tv-wisp-wisp-4nh4e","type":"parent-child","created_at":"2026-01-25T22:31:06.90419154-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-735","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T13:45:20.299771941-08:00","updated_at":"2026-01-25T13:45:20.299771981-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-73k","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-j1jx\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:52:53.984066871-08:00","updated_at":"2026-01-25T14:52:53.984066911-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-73k","depends_on_id":"tv-wisp-wisp-7h8","type":"parent-child","created_at":"2026-01-25T14:52:53.991873659-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-73k","depends_on_id":"tv-wisp-wisp-hdf","type":"blocks","created_at":"2026-01-25T14:52:54.024070104-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-755c","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-32y6\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-32y6 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:28.161255951-08:00","updated_at":"2026-01-25T16:12:22.963469883-08:00","closed_at":"2026-01-25T16:12:22.963469883-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-755c","depends_on_id":"tv-wisp-wisp-59hk","type":"parent-child","created_at":"2026-01-25T16:07:28.278537648-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-755c","depends_on_id":"tv-wisp-wisp-0n6e","type":"blocks","created_at":"2026-01-25T16:07:28.399477375-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-75o","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-3ns should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:20.302822717-08:00","updated_at":"2026-01-25T13:50:34.046842394-08:00","closed_at":"2026-01-25T13:50:34.046842394-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-75o","depends_on_id":"tv-wisp-wisp-735","type":"parent-child","created_at":"2026-01-25T13:45:20.310940001-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-75o","depends_on_id":"tv-wisp-wisp-foa","type":"blocks","created_at":"2026-01-25T13:45:20.324506234-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-761e2","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:07:30.665878025-08:00","updated_at":"2026-01-25T22:07:30.665878065-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-761e2","depends_on_id":"tv-wisp-wisp-mrf18","type":"parent-child","created_at":"2026-01-25T22:07:31.14451321-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-761e2","depends_on_id":"tv-wisp-wisp-f9kvm","type":"blocks","created_at":"2026-01-25T22:07:32.203871183-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-763","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-96g).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-96g\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:36.495303871-08:00","updated_at":"2026-01-25T14:40:37.54550613-08:00","closed_at":"2026-01-25T14:40:37.54550613-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-763","depends_on_id":"tv-wisp-wisp-lw5","type":"parent-child","created_at":"2026-01-25T14:37:36.499903718-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-763","depends_on_id":"tv-wisp-wisp-852","type":"blocks","created_at":"2026-01-25T14:37:36.511753825-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-76l","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-puj).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-puj\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:40.046769803-08:00","updated_at":"2026-01-25T13:49:17.247665495-08:00","closed_at":"2026-01-25T13:49:17.247665495-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-76l","depends_on_id":"tv-wisp-wisp-c60","type":"parent-child","created_at":"2026-01-25T13:45:40.055853884-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-76l","depends_on_id":"tv-wisp-wisp-6ev","type":"blocks","created_at":"2026-01-25T13:45:40.079191887-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-77hr","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-jd9)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-jd9\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:25:31.735547239-08:00","updated_at":"2026-01-25T17:30:11.326566487-08:00","closed_at":"2026-01-25T17:30:11.326566487-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-77hr","depends_on_id":"tv-wisp-wisp-mdl6","type":"parent-child","created_at":"2026-01-25T17:25:31.817316184-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-77hr","depends_on_id":"tv-wisp-wisp-0mnz","type":"blocks","created_at":"2026-01-25T17:25:32.007726616-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-78na","title":"Scan merge queue","description":"Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list \u003crig\u003e\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep \u003cbranch\u003e\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close \u003cmr-id\u003e --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:10.485046764-08:00","updated_at":"2026-01-25T21:00:10.485046935-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-78na","depends_on_id":"tv-wisp-wisp-u7fv","type":"parent-child","created_at":"2026-01-25T21:00:10.638222375-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-78na","depends_on_id":"tv-wisp-wisp-2et5","type":"blocks","created_at":"2026-01-25T21:00:11.60892594-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-79nh","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:40:01.324306999-08:00","updated_at":"2026-01-25T17:40:01.324307069-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-79nh","depends_on_id":"tv-wisp-wisp-f2ka","type":"parent-child","created_at":"2026-01-25T17:40:01.620518773-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-79nh","depends_on_id":"tv-wisp-wisp-r90u","type":"blocks","created_at":"2026-01-25T17:40:02.119308023-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-79q","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-3ns).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-3ns\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:20.302205208-08:00","updated_at":"2026-01-25T13:48:28.160347624-08:00","closed_at":"2026-01-25T13:48:28.160347624-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-79q","depends_on_id":"tv-wisp-wisp-735","type":"parent-child","created_at":"2026-01-25T13:45:20.308227504-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-79q","depends_on_id":"tv-wisp-wisp-4hq","type":"blocks","created_at":"2026-01-25T13:45:20.320377882-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7aes","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-ilh)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-ilh\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:26:18.772962167-08:00","updated_at":"2026-01-25T17:26:18.772962227-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7aes","depends_on_id":"tv-wisp-wisp-exo0","type":"parent-child","created_at":"2026-01-25T17:26:18.859397466-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7aes","depends_on_id":"tv-wisp-wisp-ciir","type":"blocks","created_at":"2026-01-25T17:26:19.064564874-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7af8","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-32y6\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:30:06.22672573-08:00","updated_at":"2026-01-25T15:30:06.22672577-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7af8","depends_on_id":"tv-wisp-wisp-x8yu","type":"parent-child","created_at":"2026-01-25T15:30:06.240302323-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7af8","depends_on_id":"tv-wisp-wisp-ncuy","type":"blocks","created_at":"2026-01-25T15:30:06.338144316-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7ap7","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-uor5)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-uor5\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:15.597994237-08:00","updated_at":"2026-01-25T17:35:42.915279695-08:00","closed_at":"2026-01-25T17:35:42.915279695-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-7ap7","depends_on_id":"tv-wisp-wisp-ce9t","type":"parent-child","created_at":"2026-01-25T17:31:15.69923315-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7ap7","depends_on_id":"tv-wisp-wisp-pdl6","type":"blocks","created_at":"2026-01-25T17:31:15.93467852-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7cp","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-v0lg           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-v0lg\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:30.020541897-08:00","updated_at":"2026-01-25T14:39:32.829560334-08:00","closed_at":"2026-01-25T14:39:32.829560334-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-7cp","depends_on_id":"tv-wisp-wisp-nmn","type":"parent-child","created_at":"2026-01-25T14:38:30.022902945-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7dr6d","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (hq-cv-x5kp2).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: hq-cv-x5kp2\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:57.668979819-08:00","updated_at":"2026-01-25T21:54:57.668979859-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7dr6d","depends_on_id":"tv-wisp-wisp-i45n5","type":"parent-child","created_at":"2026-01-25T21:54:57.94575735-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7dr6d","depends_on_id":"tv-wisp-wisp-w4v8q","type":"blocks","created_at":"2026-01-25T21:54:58.835059403-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7gxt","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-kmy2\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:24:16.634646-08:00","updated_at":"2026-01-25T17:24:16.63464605-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7gxt","depends_on_id":"tv-wisp-wisp-d08y","type":"parent-child","created_at":"2026-01-25T17:24:16.85333358-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7gxt","depends_on_id":"tv-wisp-wisp-h7hf","type":"blocks","created_at":"2026-01-25T17:24:17.037296273-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7h8","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T14:52:53.983256886-08:00","updated_at":"2026-01-25T14:52:53.983256926-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-7j4d","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-8b8\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:54.806496833-08:00","updated_at":"2026-01-25T15:09:54.806496884-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7j4d","depends_on_id":"tv-wisp-wisp-mt9u","type":"parent-child","created_at":"2026-01-25T15:09:54.878544458-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7j4d","depends_on_id":"tv-wisp-wisp-3rjt","type":"blocks","created_at":"2026-01-25T15:09:54.945649989-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7jm4l","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:12:14.18917706-08:00","updated_at":"2026-01-25T22:12:14.1891771-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7jm4l","depends_on_id":"tv-wisp-wisp-dbfyj","type":"parent-child","created_at":"2026-01-25T22:12:14.433236383-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-7jm4l","depends_on_id":"tv-wisp-wisp-x5o5n","type":"blocks","created_at":"2026-01-25T22:12:15.529021744-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7jpje","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:15:21.194968788-08:00","updated_at":"2026-01-25T22:15:21.194968828-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7jpje","depends_on_id":"tv-wisp-wisp-y02ot","type":"parent-child","created_at":"2026-01-25T22:15:21.334249901-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-7jpje","depends_on_id":"tv-wisp-wisp-iwwuj","type":"blocks","created_at":"2026-01-25T22:15:22.539538205-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7ka3","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-w43u)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-w43u\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:00.020266901-08:00","updated_at":"2026-01-25T17:41:00.020266961-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7ka3","depends_on_id":"tv-wisp-wisp-0t3r","type":"parent-child","created_at":"2026-01-25T17:41:00.157129852-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7ka3","depends_on_id":"tv-wisp-wisp-x8hk","type":"blocks","created_at":"2026-01-25T17:41:00.484668908-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7ko","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:47.969341042-08:00","updated_at":"2026-01-25T14:52:49.390456977-08:00","closed_at":"2026-01-25T14:52:49.390456977-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-7ko","depends_on_id":"tv-wisp-wisp-7ym","type":"parent-child","created_at":"2026-01-25T14:38:47.984392322-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7ko","depends_on_id":"tv-wisp-wisp-bug","type":"blocks","created_at":"2026-01-25T14:38:48.006828982-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7la","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:41:43.852075398-08:00","updated_at":"2026-01-25T14:47:01.287206602-08:00","closed_at":"2026-01-25T14:47:01.287206602-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-7la","depends_on_id":"tv-wisp-wisp-mni","type":"parent-child","created_at":"2026-01-25T14:41:43.868968568-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7la","depends_on_id":"tv-wisp-wisp-2bj","type":"blocks","created_at":"2026-01-25T14:41:43.892230699-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7ngx","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:50.538977708-08:00","updated_at":"2026-01-25T16:34:50.538977748-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7ngx","depends_on_id":"tv-wisp-wisp-58fz","type":"parent-child","created_at":"2026-01-25T16:34:50.657942901-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7ngx","depends_on_id":"tv-wisp-wisp-m4zj","type":"blocks","created_at":"2026-01-25T16:34:50.814910014-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7o8s","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-433\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:36.715192448-08:00","updated_at":"2026-01-25T15:09:36.715192508-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7o8s","depends_on_id":"tv-wisp-wisp-f3bu","type":"parent-child","created_at":"2026-01-25T15:09:36.726699094-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7o8s","depends_on_id":"tv-wisp-wisp-yb91","type":"blocks","created_at":"2026-01-25T15:09:36.79685013-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7py5","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:52:19.638906981-08:00","updated_at":"2026-01-25T21:52:19.638907021-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7py5","depends_on_id":"tv-wisp-wisp-f1fv","type":"parent-child","created_at":"2026-01-25T21:52:19.752020452-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-7py5","depends_on_id":"tv-wisp-wisp-66jr","type":"blocks","created_at":"2026-01-25T21:52:20.724813694-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7q91","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-318k).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-318k\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:20:52.490942666-08:00","updated_at":"2026-01-25T19:20:52.490942717-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7q91","depends_on_id":"tv-wisp-wisp-wkqr","type":"parent-child","created_at":"2026-01-25T19:20:52.626105651-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7q91","depends_on_id":"tv-wisp-wisp-s881","type":"blocks","created_at":"2026-01-25T19:20:53.147851701-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7rx47","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:52:19.642106191-08:00","updated_at":"2026-01-25T21:52:19.642106221-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7rx47","depends_on_id":"tv-wisp-wisp-f1fv","type":"parent-child","created_at":"2026-01-25T21:52:20.299890904-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-7rx47","depends_on_id":"tv-wisp-wisp-xyv1c","type":"blocks","created_at":"2026-01-25T21:52:21.265245101-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7s4v","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-96g should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:22.636845154-08:00","updated_at":"2026-01-25T21:58:41.615417547-08:00","closed_at":"2026-01-25T21:58:41.615417547-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-7s4v","depends_on_id":"tv-wisp-wisp-m1vl","type":"parent-child","created_at":"2026-01-25T19:11:22.854447788-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7s4v","depends_on_id":"tv-wisp-wisp-bv0c","type":"blocks","created_at":"2026-01-25T19:11:23.282476035-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7s9","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:35:55.222367122-08:00","updated_at":"2026-01-25T14:35:55.222367152-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7s9","depends_on_id":"tv-wisp-wisp-9yt","type":"parent-child","created_at":"2026-01-25T14:35:55.229280389-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7s9","depends_on_id":"tv-wisp-wisp-0os","type":"blocks","created_at":"2026-01-25T14:35:55.239292146-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7sn","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:31:40.706029946-08:00","updated_at":"2026-01-25T14:31:40.706029976-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7sn","depends_on_id":"tv-wisp-wisp-8rd","type":"parent-child","created_at":"2026-01-25T14:31:40.713726331-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7sn","depends_on_id":"tv-wisp-wisp-ecd","type":"blocks","created_at":"2026-01-25T14:31:40.7220907-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7sxa","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-b3n should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:18.804424378-08:00","updated_at":"2026-01-25T15:09:18.804424408-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7sxa","depends_on_id":"tv-wisp-wisp-86en","type":"parent-child","created_at":"2026-01-25T15:09:18.832416892-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7sxa","depends_on_id":"tv-wisp-wisp-fj1o","type":"blocks","created_at":"2026-01-25T15:09:18.885880615-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7urn","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:44:38.425969499-08:00","updated_at":"2026-01-25T17:44:38.425969539-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-7uw6","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:47.706077945-08:00","updated_at":"2026-01-25T17:37:47.706078005-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7uw6","depends_on_id":"tv-wisp-wisp-9ksa","type":"parent-child","created_at":"2026-01-25T17:37:47.889610612-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7uw6","depends_on_id":"tv-wisp-wisp-aihx","type":"blocks","created_at":"2026-01-25T17:37:48.187525743-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7v5d","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-z20 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:15:52.546614598-08:00","updated_at":"2026-01-25T19:15:52.546614638-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7v5d","depends_on_id":"tv-wisp-wisp-zkv0","type":"parent-child","created_at":"2026-01-25T19:15:52.796102248-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7v5d","depends_on_id":"tv-wisp-wisp-oefm","type":"blocks","created_at":"2026-01-25T19:15:53.325169602-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7vv82","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T22:22:18.708797221-08:00","updated_at":"2026-01-25T22:22:18.708797261-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-7vwrw","title":"Burn and respawn or loop","description":"End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:46:06.935527453-08:00","updated_at":"2026-01-25T22:46:06.935527493-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7vwrw","depends_on_id":"tv-wisp-wisp-rqw9g","type":"parent-child","created_at":"2026-01-25T22:46:08.340418435-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-7vwrw","depends_on_id":"tv-wisp-wisp-g2m76","type":"blocks","created_at":"2026-01-25T22:46:09.68549454-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7wl0","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-rmos should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:42:26.527605567-08:00","updated_at":"2026-01-25T16:43:32.749540843-08:00","closed_at":"2026-01-25T16:43:32.749540843-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-7wl0","depends_on_id":"tv-wisp-wisp-pij2","type":"parent-child","created_at":"2026-01-25T16:42:26.604046878-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-7wl0","depends_on_id":"tv-wisp-wisp-nhlw","type":"blocks","created_at":"2026-01-25T16:42:26.758440903-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7wv0","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:37:56.129743229-08:00","updated_at":"2026-01-25T21:37:56.129743259-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-7wv0","depends_on_id":"tv-wisp-wisp-rfc8","type":"parent-child","created_at":"2026-01-25T21:37:57.068480492-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-7wv0","depends_on_id":"tv-wisp-wisp-uji6","type":"blocks","created_at":"2026-01-25T21:37:57.99165586-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-7ym","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T14:38:47.967711786-08:00","updated_at":"2026-01-25T14:38:47.967711826-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-81tai","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:22:18.716542299-08:00","updated_at":"2026-01-25T22:22:18.716542349-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-81tai","depends_on_id":"tv-wisp-wisp-7vv82","type":"parent-child","created_at":"2026-01-25T22:22:19.849009689-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-81tai","depends_on_id":"tv-wisp-wisp-lh9bp","type":"blocks","created_at":"2026-01-25T22:22:21.000793335-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8280k","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:19:52.883773986-08:00","updated_at":"2026-01-25T22:19:52.883774016-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-8280k","depends_on_id":"tv-wisp-wisp-ep1u6","type":"parent-child","created_at":"2026-01-25T22:19:53.010241614-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-8280k","depends_on_id":"tv-wisp-wisp-vvnmb","type":"blocks","created_at":"2026-01-25T22:19:54.105310528-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-83m8","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:41.665289782-08:00","updated_at":"2026-01-25T17:49:41.876204592-08:00","closed_at":"2026-01-25T17:49:41.876204592-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-83m8","depends_on_id":"tv-wisp-wisp-kb77","type":"parent-child","created_at":"2026-01-25T17:34:41.889377208-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-83m8","depends_on_id":"tv-wisp-wisp-41nc","type":"blocks","created_at":"2026-01-25T17:34:42.148554214-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-852","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-96g\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:36.495091199-08:00","updated_at":"2026-01-25T14:39:24.214845872-08:00","closed_at":"2026-01-25T14:39:24.214845872-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-852","depends_on_id":"tv-wisp-wisp-lw5","type":"parent-child","created_at":"2026-01-25T14:37:36.498295407-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-852","depends_on_id":"tv-wisp-wisp-xsn","type":"blocks","created_at":"2026-01-25T14:37:36.510349038-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-85tn","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:06:21.221706278-08:00","updated_at":"2026-01-25T16:06:21.221706308-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-85tn","depends_on_id":"tv-wisp-wisp-pysf","type":"parent-child","created_at":"2026-01-25T16:06:21.298528724-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-85tn","depends_on_id":"tv-wisp-wisp-um0v","type":"blocks","created_at":"2026-01-25T16:06:21.398058417-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-86en","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T15:09:18.802867672-08:00","updated_at":"2026-01-25T15:09:18.802867712-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-87al","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T15:29:29.792082378-08:00","updated_at":"2026-01-25T15:29:29.792082408-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-89d","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:11.987400227-08:00","updated_at":"2026-01-25T14:54:51.409038725-08:00","closed_at":"2026-01-25T14:54:51.409038725-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-89d","depends_on_id":"tv-wisp-wisp-jdo","type":"parent-child","created_at":"2026-01-25T14:38:12.001130375-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-89d","depends_on_id":"tv-wisp-wisp-rd1","type":"blocks","created_at":"2026-01-25T14:38:12.017806388-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8b9v","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-m1fr)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-m1fr\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:41.664358813-08:00","updated_at":"2026-01-25T17:46:31.489363127-08:00","closed_at":"2026-01-25T17:46:31.489363127-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-8b9v","depends_on_id":"tv-wisp-wisp-kb77","type":"parent-child","created_at":"2026-01-25T17:34:41.773556234-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-8b9v","depends_on_id":"tv-wisp-wisp-g47c","type":"blocks","created_at":"2026-01-25T17:34:42.049010705-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8e5u","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-ilh           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-ilh\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:27:22.428601445-08:00","updated_at":"2026-01-25T17:30:00.829624414-08:00","closed_at":"2026-01-25T17:30:00.829624414-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-8e5u","depends_on_id":"tv-wisp-wisp-jyha","type":"parent-child","created_at":"2026-01-25T17:27:22.433133919-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8gw3q","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:07:30.667879008-08:00","updated_at":"2026-01-25T22:07:30.667879038-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-8gw3q","depends_on_id":"tv-wisp-wisp-mrf18","type":"parent-child","created_at":"2026-01-25T22:07:31.612185224-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-8gw3q","depends_on_id":"tv-wisp-wisp-8loyo","type":"blocks","created_at":"2026-01-25T22:07:32.677813682-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8hl6","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:52.923017377-08:00","updated_at":"2026-01-25T17:26:48.244692301-08:00","closed_at":"2026-01-25T17:26:48.244692301-08:00","close_reason":"N/A - duplicate of tv-r0vv, already merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-8hl6","depends_on_id":"tv-wisp-wisp-6pbk","type":"parent-child","created_at":"2026-01-25T17:23:53.062483788-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-8hl6","depends_on_id":"tv-wisp-wisp-t5ze","type":"blocks","created_at":"2026-01-25T17:23:53.232772508-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8k108","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:19:52.885173129-08:00","updated_at":"2026-01-25T22:19:52.885173169-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-8k108","depends_on_id":"tv-wisp-wisp-ep1u6","type":"parent-child","created_at":"2026-01-25T22:19:53.371446346-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-8k108","depends_on_id":"tv-wisp-wisp-r6ph6","type":"blocks","created_at":"2026-01-25T22:19:54.477329259-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8k98p","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:22:18.710161476-08:00","updated_at":"2026-01-25T22:22:18.710161526-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-8k98p","depends_on_id":"tv-wisp-wisp-7vv82","type":"parent-child","created_at":"2026-01-25T22:22:18.717441927-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8loyo","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:07:30.667359451-08:00","updated_at":"2026-01-25T22:07:30.667359491-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-8loyo","depends_on_id":"tv-wisp-wisp-mrf18","type":"parent-child","created_at":"2026-01-25T22:07:31.495020957-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-8loyo","depends_on_id":"tv-wisp-wisp-3r4wk","type":"blocks","created_at":"2026-01-25T22:07:32.55865429-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8m5z","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-w43u\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:00.018175255-08:00","updated_at":"2026-01-25T17:41:00.018175385-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-8m5z","depends_on_id":"tv-wisp-wisp-0t3r","type":"parent-child","created_at":"2026-01-25T17:41:00.075250421-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-8m5z","depends_on_id":"tv-wisp-wisp-9dlc","type":"blocks","created_at":"2026-01-25T17:41:00.397824404-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8m7u","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-jfi6 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:41.923595498-08:00","updated_at":"2026-01-25T16:54:41.923595568-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-8m7u","depends_on_id":"tv-wisp-wisp-2w49","type":"parent-child","created_at":"2026-01-25T16:54:42.002798904-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-8m7u","depends_on_id":"tv-wisp-wisp-q6ts","type":"blocks","created_at":"2026-01-25T16:54:42.151781223-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8muz","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-oyub           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-oyub\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:45:07.964269528-08:00","updated_at":"2026-01-25T17:47:29.817447536-08:00","closed_at":"2026-01-25T17:47:29.817447536-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-8muz","depends_on_id":"tv-wisp-wisp-n3rx","type":"parent-child","created_at":"2026-01-25T17:45:07.969814434-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8n6r","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-433 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:57:16.17890868-08:00","updated_at":"2026-01-25T14:57:16.17890871-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-8n6r","depends_on_id":"tv-wisp-wisp-l8h","type":"parent-child","created_at":"2026-01-25T14:57:16.199233532-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-8n6r","depends_on_id":"tv-wisp-wisp-9x9t","type":"blocks","created_at":"2026-01-25T14:57:16.233175795-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8pzc","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-bbok should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:32:03.800109794-08:00","updated_at":"2026-01-25T17:32:03.800109824-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-8pzc","depends_on_id":"tv-wisp-wisp-19n1","type":"parent-child","created_at":"2026-01-25T17:32:03.937216853-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-8pzc","depends_on_id":"tv-wisp-wisp-9kxz","type":"blocks","created_at":"2026-01-25T17:32:04.211102256-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8rd","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T14:31:40.704497441-08:00","updated_at":"2026-01-25T14:31:40.704497482-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-8stg","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-dtqk\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:40:01.321905494-08:00","updated_at":"2026-01-25T17:40:01.321905564-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-8stg","depends_on_id":"tv-wisp-wisp-f2ka","type":"parent-child","created_at":"2026-01-25T17:40:01.377687566-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-8stg","depends_on_id":"tv-wisp-wisp-gmqo","type":"blocks","created_at":"2026-01-25T17:40:01.867649009-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8t8w","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-gc5x should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:47.993582163-08:00","updated_at":"2026-01-25T15:29:47.993582223-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-8t8w","depends_on_id":"tv-wisp-wisp-9umu","type":"parent-child","created_at":"2026-01-25T15:29:48.043222551-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-8t8w","depends_on_id":"tv-wisp-wisp-46s2","type":"blocks","created_at":"2026-01-25T15:29:48.139542925-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8tw3","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-6e991).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-6e991\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:34.706947075-08:00","updated_at":"2026-01-25T20:09:55.086224912-08:00","closed_at":"2026-01-25T20:09:55.086224912-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-8tw3","depends_on_id":"tv-wisp-wisp-cj2u","type":"parent-child","created_at":"2026-01-25T20:07:34.952821725-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-8tw3","depends_on_id":"tv-wisp-wisp-r017","type":"blocks","created_at":"2026-01-25T20:07:35.884495442-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8u0f","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-xlji\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:47.418276615-08:00","updated_at":"2026-01-25T16:40:11.017836239-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-8u0f","depends_on_id":"tv-wisp-wisp-71un","type":"parent-child","created_at":"2026-01-25T16:34:47.545838546-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-8u0f","depends_on_id":"tv-wisp-wisp-crmf","type":"blocks","created_at":"2026-01-25T16:34:47.667548537-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8u6","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:44.987538236-08:00","updated_at":"2026-01-25T13:47:43.751956486-08:00","closed_at":"2026-01-25T13:47:43.751956486-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-8u6","depends_on_id":"tv-wisp-wisp-548","type":"parent-child","created_at":"2026-01-25T13:44:44.993008957-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-8u6","depends_on_id":"tv-wisp-wisp-gfc","type":"blocks","created_at":"2026-01-25T13:44:44.999230194-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8wl","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-nz3n should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:43:48.145410305-08:00","updated_at":"2026-01-25T14:43:48.145410345-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-8wl","depends_on_id":"tv-wisp-wisp-uuf","type":"parent-child","created_at":"2026-01-25T14:43:48.160218573-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-8wl","depends_on_id":"tv-wisp-wisp-eeo","type":"blocks","created_at":"2026-01-25T14:43:48.186716632-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8wo7","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-3ns)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-3ns\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:53.466425694-08:00","updated_at":"2026-01-25T22:20:00.172151413-08:00","closed_at":"2026-01-25T22:20:00.172151413-08:00","close_reason":"Implementation already exists on main (commit 40b85ad). BuilderFlee option is first priority in BuilderOptions array.","dependencies":[{"issue_id":"tv-wisp-wisp-8wo7","depends_on_id":"tv-wisp-wisp-v9eo","type":"parent-child","created_at":"2026-01-25T19:11:53.639960329-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-8wo7","depends_on_id":"tv-wisp-wisp-qvq5","type":"blocks","created_at":"2026-01-25T19:11:54.079905016-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-8x6x","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-7xtw should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:07.789273434-08:00","updated_at":"2026-01-25T20:20:07.789273474-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-8x6x","depends_on_id":"tv-wisp-wisp-hl8l","type":"parent-child","created_at":"2026-01-25T20:20:08.129659767-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-8x6x","depends_on_id":"tv-wisp-wisp-i57c","type":"blocks","created_at":"2026-01-25T20:20:08.796690787-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-92k1","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:46:56.902795357-08:00","updated_at":"2026-01-25T17:46:56.902795397-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-92k1","depends_on_id":"tv-wisp-wisp-l96l","type":"parent-child","created_at":"2026-01-25T17:46:57.171325513-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-92k1","depends_on_id":"tv-wisp-wisp-mmg4","type":"blocks","created_at":"2026-01-25T17:46:57.568731984-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-93nx","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-3ns\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:53.465682206-08:00","updated_at":"2026-01-25T22:18:30.942694933-08:00","closed_at":"2026-01-25T22:18:30.942694933-08:00","close_reason":"Branch verified - already up-to-date with main","dependencies":[{"issue_id":"tv-wisp-wisp-93nx","depends_on_id":"tv-wisp-wisp-v9eo","type":"parent-child","created_at":"2026-01-25T19:11:53.530879445-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-93nx","depends_on_id":"tv-wisp-wisp-yytm","type":"blocks","created_at":"2026-01-25T19:11:53.970784428-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-94cw","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:45:07.967267497-08:00","updated_at":"2026-01-25T17:55:27.080146741-08:00","closed_at":"2026-01-25T17:55:27.080146741-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-94cw","depends_on_id":"tv-wisp-wisp-n3rx","type":"parent-child","created_at":"2026-01-25T17:45:08.19535565-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-94cw","depends_on_id":"tv-wisp-wisp-qeft","type":"blocks","created_at":"2026-01-25T17:45:08.57379744-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-94e","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-agd\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:35:55.222863377-08:00","updated_at":"2026-01-25T14:35:55.222863417-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-94e","depends_on_id":"tv-wisp-wisp-9yt","type":"parent-child","created_at":"2026-01-25T14:35:55.233053306-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-94e","depends_on_id":"tv-wisp-wisp-6oh","type":"blocks","created_at":"2026-01-25T14:35:55.244982113-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9500","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:43.851762624-08:00","updated_at":"2026-01-25T16:34:43.851762684-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-9500","depends_on_id":"tv-wisp-wisp-zble","type":"parent-child","created_at":"2026-01-25T16:34:43.946963832-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-9500","depends_on_id":"tv-wisp-wisp-z07z","type":"blocks","created_at":"2026-01-25T16:34:44.073029769-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-956e","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-bbok\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-bbok --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:32:03.801016137-08:00","updated_at":"2026-01-25T17:32:03.801016167-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-956e","depends_on_id":"tv-wisp-wisp-19n1","type":"parent-child","created_at":"2026-01-25T17:32:04.049434049-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-956e","depends_on_id":"tv-wisp-wisp-bzhb","type":"blocks","created_at":"2026-01-25T17:32:04.318501612-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-95pi","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-433).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-433\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:36.715610458-08:00","updated_at":"2026-01-25T15:09:36.715610518-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-95pi","depends_on_id":"tv-wisp-wisp-f3bu","type":"parent-child","created_at":"2026-01-25T15:09:36.735769362-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-95pi","depends_on_id":"tv-wisp-wisp-7o8s","type":"blocks","created_at":"2026-01-25T15:09:36.804312497-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-96p8","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-zngh           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-zngh\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:50.536731422-08:00","updated_at":"2026-01-25T16:34:50.536731473-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-96p8","depends_on_id":"tv-wisp-wisp-58fz","type":"parent-child","created_at":"2026-01-25T16:34:50.539907034-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-994p","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-xlji\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:47.415490922-08:00","updated_at":"2026-01-25T16:36:08.362764674-08:00","closed_at":"2026-01-25T16:36:08.362764674-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-994p","depends_on_id":"tv-wisp-wisp-71un","type":"parent-child","created_at":"2026-01-25T16:34:47.435360385-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-994p","depends_on_id":"tv-wisp-wisp-cmp1","type":"blocks","created_at":"2026-01-25T16:34:47.561853629-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-995c","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:12.277361981-08:00","updated_at":"2026-01-25T19:10:12.277362021-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-995c","depends_on_id":"tv-wisp-wisp-ud7x","type":"parent-child","created_at":"2026-01-25T19:10:12.575323776-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-995c","depends_on_id":"tv-wisp-wisp-5d99","type":"blocks","created_at":"2026-01-25T19:10:12.983878069-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9cga","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-jfi6           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-jfi6\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:41.921830128-08:00","updated_at":"2026-01-25T16:54:41.921830188-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-9cga","depends_on_id":"tv-wisp-wisp-2w49","type":"parent-child","created_at":"2026-01-25T16:54:41.925770625-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9dlc","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-w43u           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-w43u\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:00.01743362-08:00","updated_at":"2026-01-25T17:41:00.01743368-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-9dlc","depends_on_id":"tv-wisp-wisp-0t3r","type":"parent-child","created_at":"2026-01-25T17:41:00.024329579-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9fwb","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-38ac\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-38ac --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:16.693377462-08:00","updated_at":"2026-01-25T19:20:52.37677901-08:00","closed_at":"2026-01-25T19:20:52.37677901-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-9fwb","depends_on_id":"tv-wisp-wisp-2pyz","type":"parent-child","created_at":"2026-01-25T19:16:17.110765339-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-9fwb","depends_on_id":"tv-wisp-wisp-0r9j","type":"blocks","created_at":"2026-01-25T19:16:17.577842592-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9g8p","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-rmos).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-rmos\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:43.850228629-08:00","updated_at":"2026-01-25T16:36:51.025385733-08:00","closed_at":"2026-01-25T16:36:51.025385733-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-9g8p","depends_on_id":"tv-wisp-wisp-zble","type":"parent-child","created_at":"2026-01-25T16:34:43.888247952-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-9g8p","depends_on_id":"tv-wisp-wisp-uv3u","type":"blocks","created_at":"2026-01-25T16:34:44.012633791-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9gn9","title":"Handle test failures","description":"**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - Option A: Fix it yourself (you're the Engineer!)\n   - Option B: File a bead: bd create --type=bug --priority=1 --title=\"...\"\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Fix committed, OR\n- Bead filed for the failure\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:41.222965376-08:00","updated_at":"2026-01-25T21:11:41.222965417-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-9gn9","depends_on_id":"tv-wisp-wisp-jva9","type":"parent-child","created_at":"2026-01-25T21:11:41.689529938-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-9gn9","depends_on_id":"tv-wisp-wisp-zntb","type":"blocks","created_at":"2026-01-25T21:11:42.711454638-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9it","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-agd           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-agd\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:35:55.2213295-08:00","updated_at":"2026-01-25T14:35:55.22132954-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-9it","depends_on_id":"tv-wisp-wisp-9yt","type":"parent-child","created_at":"2026-01-25T14:35:55.223175478-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9k8sn","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:57.672067335-08:00","updated_at":"2026-01-25T21:54:57.672067375-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-9k8sn","depends_on_id":"tv-wisp-wisp-i45n5","type":"parent-child","created_at":"2026-01-25T21:54:58.387789417-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-9k8sn","depends_on_id":"tv-wisp-wisp-4ha7k","type":"blocks","created_at":"2026-01-25T21:54:59.284432616-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9ksa","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:37:47.702336998-08:00","updated_at":"2026-01-25T17:37:47.702337058-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-9kxz","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-bbok)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-bbok\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:32:03.799820524-08:00","updated_at":"2026-01-25T17:32:03.799820564-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-9kxz","depends_on_id":"tv-wisp-wisp-19n1","type":"parent-child","created_at":"2026-01-25T17:32:03.900236105-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-9kxz","depends_on_id":"tv-wisp-wisp-6ar2","type":"blocks","created_at":"2026-01-25T17:32:04.180507998-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9l0r","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-32y6\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:30:06.228499128-08:00","updated_at":"2026-01-25T15:30:06.228499168-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-9l0r","depends_on_id":"tv-wisp-wisp-x8yu","type":"parent-child","created_at":"2026-01-25T15:30:06.326839019-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-9l0r","depends_on_id":"tv-wisp-wisp-hv2k","type":"blocks","created_at":"2026-01-25T15:30:06.423011809-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9njz","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-p5yr should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:57.547009126-08:00","updated_at":"2026-01-25T19:54:07.880483401-08:00","closed_at":"2026-01-25T19:54:07.880483401-08:00","close_reason":"Self-review complete: diff clean, only spawn.nim modified, docstrings added","dependencies":[{"issue_id":"tv-wisp-wisp-9njz","depends_on_id":"tv-wisp-wisp-hhw1","type":"parent-child","created_at":"2026-01-25T19:47:57.859783507-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-9njz","depends_on_id":"tv-wisp-wisp-q42t","type":"blocks","created_at":"2026-01-25T19:47:58.444888284-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9rn","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:56:39.841875872-08:00","updated_at":"2026-01-25T14:56:39.841875912-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-9rn","depends_on_id":"tv-wisp-wisp-g5f","type":"parent-child","created_at":"2026-01-25T14:56:39.860956563-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-9rn","depends_on_id":"tv-wisp-wisp-sq5","type":"blocks","created_at":"2026-01-25T14:56:39.894414086-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9s2","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:40.047884737-08:00","updated_at":"2026-01-25T13:50:50.074904044-08:00","closed_at":"2026-01-25T13:50:50.074904044-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-9s2","depends_on_id":"tv-wisp-wisp-c60","type":"parent-child","created_at":"2026-01-25T13:45:40.06432185-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-9s2","depends_on_id":"tv-wisp-wisp-9xq","type":"blocks","created_at":"2026-01-25T13:45:40.088118525-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9tw","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-c035\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:45.570141217-08:00","updated_at":"2026-01-25T13:45:41.332559173-08:00","closed_at":"2026-01-25T13:45:41.332559173-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-9tw","depends_on_id":"tv-wisp-wisp-45i","type":"parent-child","created_at":"2026-01-25T13:44:45.572737629-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-9tw","depends_on_id":"tv-wisp-wisp-4zf","type":"blocks","created_at":"2026-01-25T13:44:45.57970792-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9u39","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-b3n\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-b3n --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:18.805119094-08:00","updated_at":"2026-01-25T15:09:18.805119134-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-9u39","depends_on_id":"tv-wisp-wisp-86en","type":"parent-child","created_at":"2026-01-25T15:09:18.852017033-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-9u39","depends_on_id":"tv-wisp-wisp-2l81","type":"blocks","created_at":"2026-01-25T15:09:18.90666185-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9u49","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-8z2q\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:54.757883803-08:00","updated_at":"2026-01-25T17:43:40.250855138-08:00","closed_at":"2026-01-25T17:43:40.250855138-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-9u49","depends_on_id":"tv-wisp-wisp-kdbr","type":"parent-child","created_at":"2026-01-25T17:41:54.805212114-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-9u49","depends_on_id":"tv-wisp-wisp-vimb","type":"blocks","created_at":"2026-01-25T17:41:55.156058474-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9umu","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T15:29:47.989644589-08:00","updated_at":"2026-01-25T15:29:47.989644629-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-9vkn","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-cx6z\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-cx6z --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:21:13.44744565-08:00","updated_at":"2026-01-25T20:21:13.447445731-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-9vkn","depends_on_id":"tv-wisp-wisp-5nrw","type":"parent-child","created_at":"2026-01-25T20:21:14.047271235-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-9vkn","depends_on_id":"tv-wisp-wisp-ujlk","type":"blocks","created_at":"2026-01-25T20:21:14.749642075-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9vxo","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-b3n\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:18.805346609-08:00","updated_at":"2026-01-25T15:09:18.805346649-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-9vxo","depends_on_id":"tv-wisp-wisp-86en","type":"parent-child","created_at":"2026-01-25T15:09:18.858643971-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-9vxo","depends_on_id":"tv-wisp-wisp-9u39","type":"blocks","created_at":"2026-01-25T15:09:18.913569613-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9x9t","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-433)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-433\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:57:16.178686034-08:00","updated_at":"2026-01-25T14:57:16.178686064-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-9x9t","depends_on_id":"tv-wisp-wisp-l8h","type":"parent-child","created_at":"2026-01-25T14:57:16.193871284-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9xq","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-puj should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:40.047502476-08:00","updated_at":"2026-01-25T13:50:31.625305393-08:00","closed_at":"2026-01-25T13:50:31.625305393-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-9xq","depends_on_id":"tv-wisp-wisp-c60","type":"parent-child","created_at":"2026-01-25T13:45:40.06151109-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-9xq","depends_on_id":"tv-wisp-wisp-4nu","type":"blocks","created_at":"2026-01-25T13:45:40.085004511-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-9y6rc","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T21:59:15.396539717-08:00","updated_at":"2026-01-25T21:59:15.396539757-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-9yt","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T14:35:55.220762173-08:00","updated_at":"2026-01-25T14:35:55.220762213-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-a1ju","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-oyub\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-oyub --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:45:07.968410772-08:00","updated_at":"2026-01-25T17:56:20.147054907-08:00","closed_at":"2026-01-25T17:56:20.147054907-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-a1ju","depends_on_id":"tv-wisp-wisp-n3rx","type":"parent-child","created_at":"2026-01-25T17:45:08.285962225-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-a1ju","depends_on_id":"tv-wisp-wisp-kyig","type":"blocks","created_at":"2026-01-25T17:45:08.666415091-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-a2km","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-fwrl should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:39.842287648-08:00","updated_at":"2026-01-25T17:38:37.967895917-08:00","closed_at":"2026-01-25T17:38:37.967895917-08:00","close_reason":"Self-review complete. spawn.nim fixes pre-existing compile issues. step.nim changes Mangonel AoE width.","dependencies":[{"issue_id":"tv-wisp-wisp-a2km","depends_on_id":"tv-wisp-wisp-r2dz","type":"parent-child","created_at":"2026-01-25T17:31:39.967893375-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-a2km","depends_on_id":"tv-wisp-wisp-r69g","type":"blocks","created_at":"2026-01-25T17:31:40.22646537-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-a30e","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-5d7t           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-5d7t\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:56:36.373481764-08:00","updated_at":"2026-01-25T19:56:36.373481804-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-a30e","depends_on_id":"tv-wisp-wisp-vlrj","type":"parent-child","created_at":"2026-01-25T19:56:36.377410018-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-a32d","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:58.601952138-08:00","updated_at":"2026-01-25T17:44:58.601952188-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-a32d","depends_on_id":"tv-wisp-wisp-do23","type":"parent-child","created_at":"2026-01-25T17:44:58.874673618-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-a32d","depends_on_id":"tv-wisp-wisp-lmmd","type":"blocks","created_at":"2026-01-25T17:44:59.252736161-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-a3sui","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:15:21.195910756-08:00","updated_at":"2026-01-25T22:15:21.195910796-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-a3sui","depends_on_id":"tv-wisp-wisp-y02ot","type":"parent-child","created_at":"2026-01-25T22:15:21.597714519-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-a3sui","depends_on_id":"tv-wisp-wisp-mlscr","type":"blocks","created_at":"2026-01-25T22:15:22.806888911-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-a5gf","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-h2uu           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-h2uu\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:29.792681666-08:00","updated_at":"2026-01-25T15:29:29.792681706-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-a5gf","depends_on_id":"tv-wisp-wisp-87al","type":"parent-child","created_at":"2026-01-25T15:29:29.794942322-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-a5py","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:28.491275716-08:00","updated_at":"2026-01-25T17:37:28.491275766-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-a5py","depends_on_id":"tv-wisp-wisp-08mh","type":"parent-child","created_at":"2026-01-25T17:37:28.689568042-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-a5py","depends_on_id":"tv-wisp-wisp-1did","type":"blocks","created_at":"2026-01-25T17:37:28.980808119-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-a96","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-02pb\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-02pb --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:11.987583764-08:00","updated_at":"2026-01-25T14:54:53.80267056-08:00","closed_at":"2026-01-25T14:54:53.80267056-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-a96","depends_on_id":"tv-wisp-wisp-jdo","type":"parent-child","created_at":"2026-01-25T14:38:12.003125674-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-a96","depends_on_id":"tv-wisp-wisp-89d","type":"blocks","created_at":"2026-01-25T14:38:12.019874224-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-aaau","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-i8sz           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-i8sz\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:33:12.902174613-08:00","updated_at":"2026-01-25T17:35:55.04969148-08:00","closed_at":"2026-01-25T17:35:55.04969148-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-aaau","depends_on_id":"tv-wisp-wisp-bs1f","type":"parent-child","created_at":"2026-01-25T17:33:12.905248885-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-aaqc","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:52:19.639575002-08:00","updated_at":"2026-01-25T21:52:19.639575042-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-aaqc","depends_on_id":"tv-wisp-wisp-f1fv","type":"parent-child","created_at":"2026-01-25T21:52:19.860475869-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-aaqc","depends_on_id":"tv-wisp-wisp-7py5","type":"blocks","created_at":"2026-01-25T21:52:20.83269331-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-acc4","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-433\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-433 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:57.565680061-08:00","updated_at":"2026-01-25T15:04:57.565680101-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-acc4","depends_on_id":"tv-wisp-wisp-hl2y","type":"parent-child","created_at":"2026-01-25T15:04:57.604796242-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-acc4","depends_on_id":"tv-wisp-wisp-4hwy","type":"blocks","created_at":"2026-01-25T15:04:57.650811031-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-acoo","title":"Generate handoff summary","description":"Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:41.224217265-08:00","updated_at":"2026-01-25T21:11:41.224217305-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-acoo","depends_on_id":"tv-wisp-wisp-jva9","type":"parent-child","created_at":"2026-01-25T21:11:41.998845446-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-acoo","depends_on_id":"tv-wisp-wisp-zysb","type":"blocks","created_at":"2026-01-25T21:11:43.006866028-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-addnw","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before hq-cv-bsv3u\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:17.683294397-08:00","updated_at":"2026-01-25T21:54:17.683294478-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-addnw","depends_on_id":"tv-wisp-wisp-zyr6q","type":"parent-child","created_at":"2026-01-25T21:54:17.811493791-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-addnw","depends_on_id":"tv-wisp-wisp-rn6c0","type":"blocks","created_at":"2026-01-25T21:54:18.677318048-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ag5iy","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to hq-cv-gzu6g should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:55:16.253944065-08:00","updated_at":"2026-01-25T21:55:16.253944105-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ag5iy","depends_on_id":"tv-wisp-wisp-y04mr","type":"parent-child","created_at":"2026-01-25T21:55:16.732118455-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ag5iy","depends_on_id":"tv-wisp-wisp-vuot2","type":"blocks","created_at":"2026-01-25T21:55:17.684075808-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-aihx","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-o168 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:47.705606634-08:00","updated_at":"2026-01-25T17:37:47.705606694-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-aihx","depends_on_id":"tv-wisp-wisp-9ksa","type":"parent-child","created_at":"2026-01-25T17:37:47.853693018-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-aihx","depends_on_id":"tv-wisp-wisp-cn0g","type":"blocks","created_at":"2026-01-25T17:37:48.148208029-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-aj4x","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-0pkq\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:28.760352584-08:00","updated_at":"2026-01-25T20:20:28.760352644-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-aj4x","depends_on_id":"tv-wisp-wisp-tcnq","type":"parent-child","created_at":"2026-01-25T20:20:29.452615699-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-aj4x","depends_on_id":"tv-wisp-wisp-hhf2","type":"blocks","created_at":"2026-01-25T20:20:30.124051027-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ajc","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-02pb).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-02pb\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:11.986653115-08:00","updated_at":"2026-01-25T14:41:35.832365418-08:00","closed_at":"2026-01-25T14:41:35.832365418-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ajc","depends_on_id":"tv-wisp-wisp-jdo","type":"parent-child","created_at":"2026-01-25T14:38:11.992905046-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ajc","depends_on_id":"tv-wisp-wisp-02k","type":"blocks","created_at":"2026-01-25T14:38:12.009337679-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-akl9","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:25:24.606200022-08:00","updated_at":"2026-01-25T19:25:24.606200052-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-akl9","depends_on_id":"tv-wisp-wisp-y86p","type":"parent-child","created_at":"2026-01-25T19:25:24.968913762-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-akl9","depends_on_id":"tv-wisp-wisp-6hqm","type":"blocks","created_at":"2026-01-25T19:25:25.510473118-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-akv","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-96g\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:36.496406275-08:00","updated_at":"2026-01-25T14:44:32.776146052-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-akv","depends_on_id":"tv-wisp-wisp-lw5","type":"parent-child","created_at":"2026-01-25T14:37:36.508937239-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-akv","depends_on_id":"tv-wisp-wisp-et1","type":"blocks","created_at":"2026-01-25T14:37:36.520947297-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-aky","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-c035 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:45.57071771-08:00","updated_at":"2026-01-25T13:52:15.414850337-08:00","closed_at":"2026-01-25T13:52:15.414850337-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-aky","depends_on_id":"tv-wisp-wisp-45i","type":"parent-child","created_at":"2026-01-25T13:44:45.575429408-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-aky","depends_on_id":"tv-wisp-wisp-1u2","type":"blocks","created_at":"2026-01-25T13:44:45.582521796-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-am1t","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:57.547408552-08:00","updated_at":"2026-01-25T19:54:35.257821259-08:00","closed_at":"2026-01-25T19:54:35.257821259-08:00","close_reason":"ffi.nim compiles successfully (includes spawn.nim). Pre-existing renderer.nim errors unrelated to this refactoring.","dependencies":[{"issue_id":"tv-wisp-wisp-am1t","depends_on_id":"tv-wisp-wisp-hhw1","type":"parent-child","created_at":"2026-01-25T19:47:57.936847884-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-am1t","depends_on_id":"tv-wisp-wisp-9njz","type":"blocks","created_at":"2026-01-25T19:47:58.520251526-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-amcn","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-l0oc should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:52.922483751-08:00","updated_at":"2026-01-25T17:26:43.695947958-08:00","closed_at":"2026-01-25T17:26:43.695947958-08:00","close_reason":"N/A - duplicate of tv-r0vv, already merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-amcn","depends_on_id":"tv-wisp-wisp-6pbk","type":"parent-child","created_at":"2026-01-25T17:23:53.008730669-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-amcn","depends_on_id":"tv-wisp-wisp-uha6","type":"blocks","created_at":"2026-01-25T17:23:53.190441027-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ao3","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:47.969511894-08:00","updated_at":"2026-01-25T14:53:22.703308401-08:00","closed_at":"2026-01-25T14:53:22.703308401-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ao3","depends_on_id":"tv-wisp-wisp-7ym","type":"parent-child","created_at":"2026-01-25T14:38:47.987334245-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ao3","depends_on_id":"tv-wisp-wisp-7ko","type":"blocks","created_at":"2026-01-25T14:38:48.009634587-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-appc","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-upwa           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-upwa\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:38.834098263-08:00","updated_at":"2026-01-25T16:54:38.834098324-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-appc","depends_on_id":"tv-wisp-wisp-i7i6","type":"parent-child","created_at":"2026-01-25T16:54:38.837938844-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-au32","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:25:31.736392758-08:00","updated_at":"2026-01-25T17:30:44.676793835-08:00","closed_at":"2026-01-25T17:30:44.676793835-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-au32","depends_on_id":"tv-wisp-wisp-mdl6","type":"parent-child","created_at":"2026-01-25T17:25:31.864861861-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-au32","depends_on_id":"tv-wisp-wisp-2zfj","type":"blocks","created_at":"2026-01-25T17:25:32.053861479-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-b147","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:54.759368475-08:00","updated_at":"2026-01-25T17:47:58.494014472-08:00","closed_at":"2026-01-25T17:47:58.494014472-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-b147","depends_on_id":"tv-wisp-wisp-kdbr","type":"parent-child","created_at":"2026-01-25T17:41:54.985878261-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-b147","depends_on_id":"tv-wisp-wisp-0mqb","type":"blocks","created_at":"2026-01-25T17:41:55.322719515-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-b1ij","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-2mu6 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:27:41.561077386-08:00","updated_at":"2026-01-25T19:27:41.561077426-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-b1ij","depends_on_id":"tv-wisp-wisp-dreg","type":"parent-child","created_at":"2026-01-25T19:27:41.829676634-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-b1ij","depends_on_id":"tv-wisp-wisp-lj65","type":"blocks","created_at":"2026-01-25T19:27:42.373903862-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-b1ke","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:39.843198569-08:00","updated_at":"2026-01-25T17:39:06.642747743-08:00","closed_at":"2026-01-25T17:39:06.642747743-08:00","close_reason":"Removed build artifacts. Workspace clean.","dependencies":[{"issue_id":"tv-wisp-wisp-b1ke","depends_on_id":"tv-wisp-wisp-r2dz","type":"parent-child","created_at":"2026-01-25T17:31:40.024548736-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-b1ke","depends_on_id":"tv-wisp-wisp-hkgg","type":"blocks","created_at":"2026-01-25T17:31:40.301259272-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-b23","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-02pb should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:11.987014308-08:00","updated_at":"2026-01-25T14:53:32.526219484-08:00","closed_at":"2026-01-25T14:53:32.526219484-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-b23","depends_on_id":"tv-wisp-wisp-jdo","type":"parent-child","created_at":"2026-01-25T14:38:11.997294489-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-b23","depends_on_id":"tv-wisp-wisp-tvd","type":"blocks","created_at":"2026-01-25T14:38:12.013669443-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-b2k","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:56:57.643876187-08:00","updated_at":"2026-01-25T14:56:57.643876217-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-b2k","depends_on_id":"tv-wisp-wisp-d0l","type":"parent-child","created_at":"2026-01-25T14:56:57.677004893-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-b2k","depends_on_id":"tv-wisp-wisp-s9x","type":"blocks","created_at":"2026-01-25T14:56:57.707288493-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-b69a","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-k0gj\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:52.492899633-08:00","updated_at":"2026-01-25T19:56:51.682250375-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-b69a","depends_on_id":"tv-wisp-wisp-oruc","type":"parent-child","created_at":"2026-01-25T19:47:53.073047733-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-b69a","depends_on_id":"tv-wisp-wisp-dgqc","type":"blocks","created_at":"2026-01-25T19:47:53.664533386-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-b6el","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:37:56.125971563-08:00","updated_at":"2026-01-25T21:37:56.125971603-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-b6el","depends_on_id":"tv-wisp-wisp-rfc8","type":"parent-child","created_at":"2026-01-25T21:37:56.248618909-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-b6el","depends_on_id":"tv-wisp-wisp-hsky","type":"blocks","created_at":"2026-01-25T21:37:57.175935367-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ba3xq","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:19:52.887212772-08:00","updated_at":"2026-01-25T22:19:52.887212812-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ba3xq","depends_on_id":"tv-wisp-wisp-ep1u6","type":"parent-child","created_at":"2026-01-25T22:19:53.861922505-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-ba3xq","depends_on_id":"tv-wisp-wisp-0t0df","type":"blocks","created_at":"2026-01-25T22:19:54.987699232-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ba7h","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-h2uu\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-h2uu --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:29.794351811-08:00","updated_at":"2026-01-25T15:29:29.794351841-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ba7h","depends_on_id":"tv-wisp-wisp-87al","type":"parent-child","created_at":"2026-01-25T15:29:29.860711733-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ba7h","depends_on_id":"tv-wisp-wisp-hjb0","type":"blocks","created_at":"2026-01-25T15:29:29.938075599-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-bf55","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-wx7d\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:22:12.956996384-08:00","updated_at":"2026-01-25T19:22:12.956996444-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-bf55","depends_on_id":"tv-wisp-wisp-zver","type":"parent-child","created_at":"2026-01-25T19:22:13.021539043-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-bf55","depends_on_id":"tv-wisp-wisp-06fh","type":"blocks","created_at":"2026-01-25T19:22:13.54107094-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-bkam","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:09.954784166-08:00","updated_at":"2026-01-25T16:09:01.869548818-08:00","closed_at":"2026-01-25T16:09:01.869548818-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-bkam","depends_on_id":"tv-wisp-wisp-jocg","type":"parent-child","created_at":"2026-01-25T16:07:10.029571818-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-bkam","depends_on_id":"tv-wisp-wisp-s7ov","type":"blocks","created_at":"2026-01-25T16:07:10.147632242-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-bko","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-cbg).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-cbg\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:54.025037344-08:00","updated_at":"2026-01-25T14:37:54.025037384-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-bko","depends_on_id":"tv-wisp-wisp-c1i","type":"parent-child","created_at":"2026-01-25T14:37:54.029837656-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-bko","depends_on_id":"tv-wisp-wisp-rkg","type":"blocks","created_at":"2026-01-25T14:37:54.042982869-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-bm7s","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:28.16057534-08:00","updated_at":"2026-01-25T16:11:35.985119656-08:00","closed_at":"2026-01-25T16:11:35.985119656-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-bm7s","depends_on_id":"tv-wisp-wisp-59hk","type":"parent-child","created_at":"2026-01-25T16:07:28.248481112-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-bm7s","depends_on_id":"tv-wisp-wisp-xk01","type":"blocks","created_at":"2026-01-25T16:07:28.367965321-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-bnpb","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-k0gj           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-k0gj\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:52.488262879-08:00","updated_at":"2026-01-25T19:48:33.250296888-08:00","closed_at":"2026-01-25T19:48:33.250296888-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-bnpb","depends_on_id":"tv-wisp-wisp-oruc","type":"parent-child","created_at":"2026-01-25T19:47:52.49347668-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-boed","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:25:31.736795319-08:00","updated_at":"2026-01-25T17:31:04.742576578-08:00","closed_at":"2026-01-25T17:31:04.742576578-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-boed","depends_on_id":"tv-wisp-wisp-mdl6","type":"parent-child","created_at":"2026-01-25T17:25:31.8895104-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-boed","depends_on_id":"tv-wisp-wisp-au32","type":"blocks","created_at":"2026-01-25T17:25:32.07854879-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-bp9","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-1rmd).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-1rmd\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:41:43.851293327-08:00","updated_at":"2026-01-25T14:45:54.886455966-08:00","closed_at":"2026-01-25T14:45:54.886455966-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-bp9","depends_on_id":"tv-wisp-wisp-mni","type":"parent-child","created_at":"2026-01-25T14:41:43.858379898-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-bp9","depends_on_id":"tv-wisp-wisp-gc0","type":"blocks","created_at":"2026-01-25T14:41:43.88075976-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-bq8","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-nz3n           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-nz3n\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:43:48.143917442-08:00","updated_at":"2026-01-25T14:43:48.143917492-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-bq8","depends_on_id":"tv-wisp-wisp-uuf","type":"parent-child","created_at":"2026-01-25T14:43:48.147203603-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-brb8p","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:07:30.663996807-08:00","updated_at":"2026-01-25T22:07:30.663996857-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-brb8p","depends_on_id":"tv-wisp-wisp-mrf18","type":"parent-child","created_at":"2026-01-25T22:07:30.668930756-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-brkd","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:54.759713349-08:00","updated_at":"2026-01-25T17:48:20.564951516-08:00","closed_at":"2026-01-25T17:48:20.564951516-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-brkd","depends_on_id":"tv-wisp-wisp-kdbr","type":"parent-child","created_at":"2026-01-25T17:41:55.034135087-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-brkd","depends_on_id":"tv-wisp-wisp-b147","type":"blocks","created_at":"2026-01-25T17:41:55.367452549-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-bs1f","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:33:12.901462763-08:00","updated_at":"2026-01-25T17:33:12.901462793-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-bscu","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-32y6 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:30:06.22753555-08:00","updated_at":"2026-01-25T15:30:06.22753558-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-bscu","depends_on_id":"tv-wisp-wisp-x8yu","type":"parent-child","created_at":"2026-01-25T15:30:06.280231658-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-bscu","depends_on_id":"tv-wisp-wisp-kve4","type":"blocks","created_at":"2026-01-25T15:30:06.374303038-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-bug","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-2bk should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:47.969142276-08:00","updated_at":"2026-01-25T14:52:34.059531589-08:00","closed_at":"2026-01-25T14:52:34.059531589-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-bug","depends_on_id":"tv-wisp-wisp-7ym","type":"parent-child","created_at":"2026-01-25T14:38:47.981258977-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-bug","depends_on_id":"tv-wisp-wisp-o2u","type":"blocks","created_at":"2026-01-25T14:38:48.004060506-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-bv0c","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-96g)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-96g\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:22.636468431-08:00","updated_at":"2026-01-25T21:58:11.84881278-08:00","closed_at":"2026-01-25T21:58:11.84881278-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-bv0c","depends_on_id":"tv-wisp-wisp-m1vl","type":"parent-child","created_at":"2026-01-25T19:11:22.802413685-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-bv0c","depends_on_id":"tv-wisp-wisp-v541","type":"blocks","created_at":"2026-01-25T19:11:23.226056534-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-bv6","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:54.025748618-08:00","updated_at":"2026-01-25T14:37:54.025748658-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-bv6","depends_on_id":"tv-wisp-wisp-c1i","type":"parent-child","created_at":"2026-01-25T14:37:54.036421619-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-bv6","depends_on_id":"tv-wisp-wisp-222","type":"blocks","created_at":"2026-01-25T14:37:54.049883301-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-bvvi","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-gddu\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:46:56.90142107-08:00","updated_at":"2026-01-25T17:46:56.901421101-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-bvvi","depends_on_id":"tv-wisp-wisp-l96l","type":"parent-child","created_at":"2026-01-25T17:46:56.957761419-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-bvvi","depends_on_id":"tv-wisp-wisp-3ctz","type":"blocks","created_at":"2026-01-25T17:46:57.365585145-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-bxae","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-96g\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:22.635401779-08:00","updated_at":"2026-01-25T21:55:47.722600555-08:00","closed_at":"2026-01-25T21:55:47.722600555-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-bxae","depends_on_id":"tv-wisp-wisp-m1vl","type":"parent-child","created_at":"2026-01-25T19:11:22.695721281-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-bxae","depends_on_id":"tv-wisp-wisp-leol","type":"blocks","created_at":"2026-01-25T19:11:23.112361426-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-bzhb","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:32:03.800719944-08:00","updated_at":"2026-01-25T17:32:03.800719984-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-bzhb","depends_on_id":"tv-wisp-wisp-19n1","type":"parent-child","created_at":"2026-01-25T17:32:04.010549815-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-bzhb","depends_on_id":"tv-wisp-wisp-dqp6","type":"blocks","created_at":"2026-01-25T17:32:04.281389429-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-c1i","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T14:37:54.024171758-08:00","updated_at":"2026-01-25T14:37:54.024171878-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-c1p8","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-w43u\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-w43u --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:00.023002961-08:00","updated_at":"2026-01-25T17:41:00.023003011-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-c1p8","depends_on_id":"tv-wisp-wisp-0t3r","type":"parent-child","created_at":"2026-01-25T17:41:00.316118997-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-c1p8","depends_on_id":"tv-wisp-wisp-4qef","type":"blocks","created_at":"2026-01-25T17:41:00.664049978-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-c3ln","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:07.78967234-08:00","updated_at":"2026-01-25T20:20:07.789672381-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-c3ln","depends_on_id":"tv-wisp-wisp-hl8l","type":"parent-child","created_at":"2026-01-25T20:20:08.209420599-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-c3ln","depends_on_id":"tv-wisp-wisp-8x6x","type":"blocks","created_at":"2026-01-25T20:20:08.896695443-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-c3vy4","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:31:06.901063521-08:00","updated_at":"2026-01-25T22:31:06.901063561-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-c3vy4","depends_on_id":"tv-wisp-wisp-4nh4e","type":"parent-child","created_at":"2026-01-25T22:31:07.417876316-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-c3vy4","depends_on_id":"tv-wisp-wisp-snwtg","type":"blocks","created_at":"2026-01-25T22:31:08.594095012-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-c4i2","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:38.469070453-08:00","updated_at":"2026-01-25T21:11:38.469070513-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-c4i2","depends_on_id":"tv-wisp-wisp-obm9","type":"parent-child","created_at":"2026-01-25T21:11:38.585006268-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-c4i2","depends_on_id":"tv-wisp-wisp-tx40","type":"blocks","created_at":"2026-01-25T21:11:39.463603325-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-c4t","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-b3n)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-b3n\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:56:57.643261068-08:00","updated_at":"2026-01-25T14:56:57.643261098-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-c4t","depends_on_id":"tv-wisp-wisp-d0l","type":"parent-child","created_at":"2026-01-25T14:56:57.662526512-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-c53f","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-fwrl).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-fwrl\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:39.841392165-08:00","updated_at":"2026-01-25T17:37:18.365222627-08:00","closed_at":"2026-01-25T17:37:18.365222627-08:00","close_reason":"Fixed pre-existing compile errors in spawn.nim (nested procs capturing rng). Code compiles successfully.","dependencies":[{"issue_id":"tv-wisp-wisp-c53f","depends_on_id":"tv-wisp-wisp-r2dz","type":"parent-child","created_at":"2026-01-25T17:31:39.911907846-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-c53f","depends_on_id":"tv-wisp-wisp-lz7o","type":"blocks","created_at":"2026-01-25T17:31:40.157279122-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-c60","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-25T13:45:40.045043881-08:00","updated_at":"2026-01-25T19:13:01.88098548-08:00","closed_at":"2026-01-25T19:13:01.88098548-08:00","close_reason":"Work already completed and merged to main","ephemeral":true}
{"id":"tv-wisp-wisp-c8we","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-5d7t should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:56:36.375183331-08:00","updated_at":"2026-01-25T19:56:36.375183371-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-c8we","depends_on_id":"tv-wisp-wisp-vlrj","type":"parent-child","created_at":"2026-01-25T19:56:36.67950184-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-c8we","depends_on_id":"tv-wisp-wisp-5v5s","type":"blocks","created_at":"2026-01-25T19:56:37.289345812-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-cbgo","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-32y6).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-32y6\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:30:06.227005913-08:00","updated_at":"2026-01-25T15:30:06.227005953-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-cbgo","depends_on_id":"tv-wisp-wisp-x8yu","type":"parent-child","created_at":"2026-01-25T15:30:06.257188719-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-cbgo","depends_on_id":"tv-wisp-wisp-7af8","type":"blocks","created_at":"2026-01-25T15:30:06.349906324-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ce9t","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:31:15.595492544-08:00","updated_at":"2026-01-25T17:31:15.595492605-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-cea0","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-v0lg)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-v0lg\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:21.057507452-08:00","updated_at":"2026-01-25T19:12:57.093444863-08:00","closed_at":"2026-01-25T19:12:57.093444863-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-cea0","depends_on_id":"tv-wisp-wisp-22vo","type":"parent-child","created_at":"2026-01-25T19:10:21.217837863-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-cea0","depends_on_id":"tv-wisp-wisp-jpvd","type":"blocks","created_at":"2026-01-25T19:10:21.665782824-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-cev1","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-ilh\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:27:22.429133649-08:00","updated_at":"2026-01-25T17:30:37.829433993-08:00","closed_at":"2026-01-25T17:30:37.829433993-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-cev1","depends_on_id":"tv-wisp-wisp-jyha","type":"parent-child","created_at":"2026-01-25T17:27:22.468208046-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-cev1","depends_on_id":"tv-wisp-wisp-8e5u","type":"blocks","created_at":"2026-01-25T17:27:22.67615311-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-cf1p","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-i8sz).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-i8sz\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:33:12.902843202-08:00","updated_at":"2026-01-25T17:40:12.342974698-08:00","closed_at":"2026-01-25T17:40:12.342974698-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-cf1p","depends_on_id":"tv-wisp-wisp-bs1f","type":"parent-child","created_at":"2026-01-25T17:33:12.968634372-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-cf1p","depends_on_id":"tv-wisp-wisp-gkp3","type":"blocks","created_at":"2026-01-25T17:33:13.233686419-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-cgt2","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:28.491734222-08:00","updated_at":"2026-01-25T17:37:28.491734282-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-cgt2","depends_on_id":"tv-wisp-wisp-08mh","type":"parent-child","created_at":"2026-01-25T17:37:28.725467282-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-cgt2","depends_on_id":"tv-wisp-wisp-a5py","type":"blocks","created_at":"2026-01-25T17:37:29.016684186-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-chaw","title":"mol-refinery-patrol","description":"Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to main one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────\u003e│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch \u0026 rebase            │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge \u0026 push              │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │\u003c─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T21:38:02.233088984-08:00","updated_at":"2026-01-25T21:38:02.233089024-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-ciir","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-ilh).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-ilh\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:26:18.772518899-08:00","updated_at":"2026-01-25T17:26:18.772518959-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ciir","depends_on_id":"tv-wisp-wisp-exo0","type":"parent-child","created_at":"2026-01-25T17:26:18.834565054-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ciir","depends_on_id":"tv-wisp-wisp-v6os","type":"blocks","created_at":"2026-01-25T17:26:19.040262813-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-cj2u","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-25T20:07:34.703782527-08:00","updated_at":"2026-01-25T20:21:38.769216609-08:00","closed_at":"2026-01-25T20:21:38.769216609-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-wisp-ckwy","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-k0gj\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:52.489463429-08:00","updated_at":"2026-01-25T19:48:50.763276185-08:00","closed_at":"2026-01-25T19:48:50.763276185-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ckwy","depends_on_id":"tv-wisp-wisp-oruc","type":"parent-child","created_at":"2026-01-25T19:47:52.565043406-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ckwy","depends_on_id":"tv-wisp-wisp-bnpb","type":"blocks","created_at":"2026-01-25T19:47:53.141663191-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-cmp1","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-xlji           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-xlji\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:47.414999815-08:00","updated_at":"2026-01-25T16:35:43.184249798-08:00","closed_at":"2026-01-25T16:35:43.184249798-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-cmp1","depends_on_id":"tv-wisp-wisp-71un","type":"parent-child","created_at":"2026-01-25T16:34:47.418885603-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-cn0g","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-o168)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-o168\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:47.705104146-08:00","updated_at":"2026-01-25T17:37:47.705104206-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-cn0g","depends_on_id":"tv-wisp-wisp-9ksa","type":"parent-child","created_at":"2026-01-25T17:37:47.818428133-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-cn0g","depends_on_id":"tv-wisp-wisp-opxi","type":"blocks","created_at":"2026-01-25T17:37:48.110699013-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-co2a","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-96g\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:22.638460951-08:00","updated_at":"2026-01-25T22:00:02.492995261-08:00","closed_at":"2026-01-25T22:00:02.492995261-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-co2a","depends_on_id":"tv-wisp-wisp-m1vl","type":"parent-child","created_at":"2026-01-25T19:11:23.060773957-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-co2a","depends_on_id":"tv-wisp-wisp-08wb","type":"blocks","created_at":"2026-01-25T19:11:23.504127127-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-cox8","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:51.068013765-08:00","updated_at":"2026-01-25T19:21:58.00667493-08:00","closed_at":"2026-01-25T19:21:58.00667493-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-cox8","depends_on_id":"tv-wisp-wisp-v2zi","type":"parent-child","created_at":"2026-01-25T19:13:51.363922997-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-cox8","depends_on_id":"tv-wisp-wisp-6283","type":"blocks","created_at":"2026-01-25T19:13:51.857968679-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-crmf","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-xlji\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-xlji --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:47.417868162-08:00","updated_at":"2026-01-25T16:40:10.90773369-08:00","closed_at":"2026-01-25T16:40:10.90773369-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-crmf","depends_on_id":"tv-wisp-wisp-71un","type":"parent-child","created_at":"2026-01-25T16:34:47.530451977-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-crmf","depends_on_id":"tv-wisp-wisp-rgl2","type":"blocks","created_at":"2026-01-25T16:34:47.652367752-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-cubb2","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:06:20.676220592-08:00","updated_at":"2026-01-25T22:06:20.676220622-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-cubb2","depends_on_id":"tv-wisp-wisp-6rbz8","type":"parent-child","created_at":"2026-01-25T22:06:21.138881517-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-cubb2","depends_on_id":"tv-wisp-wisp-i806p","type":"blocks","created_at":"2026-01-25T22:06:22.188684808-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-cw52","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-rmos           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-rmos\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:43.849331353-08:00","updated_at":"2026-01-25T16:35:42.059261101-08:00","closed_at":"2026-01-25T16:35:42.059261101-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-cw52","depends_on_id":"tv-wisp-wisp-zble","type":"parent-child","created_at":"2026-01-25T16:34:43.853081487-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-cwbc","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-y1kfh).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-y1kfh\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:40.888811841-08:00","updated_at":"2026-01-25T20:10:29.498337603-08:00","closed_at":"2026-01-25T20:10:29.498337603-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-cwbc","depends_on_id":"tv-wisp-wisp-oa0y","type":"parent-child","created_at":"2026-01-25T20:07:41.079135242-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-cwbc","depends_on_id":"tv-wisp-wisp-tmzn","type":"blocks","created_at":"2026-01-25T20:07:41.83231803-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-cwkg","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-d6jo)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-d6jo\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:57:57.424443472-08:00","updated_at":"2026-01-25T19:57:57.424443512-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-cwkg","depends_on_id":"tv-wisp-wisp-rah4","type":"parent-child","created_at":"2026-01-25T19:57:57.666547977-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-cwkg","depends_on_id":"tv-wisp-wisp-6bfm","type":"blocks","created_at":"2026-01-25T19:57:58.253516641-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-cwx1","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-1rmd\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-1rmd --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:12.277722113-08:00","updated_at":"2026-01-25T19:10:12.277722153-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-cwx1","depends_on_id":"tv-wisp-wisp-ud7x","type":"parent-child","created_at":"2026-01-25T19:10:12.624660613-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-cwx1","depends_on_id":"tv-wisp-wisp-995c","type":"blocks","created_at":"2026-01-25T19:10:13.031241982-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-cyu3","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-rmos)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-rmos\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:43.850627814-08:00","updated_at":"2026-01-25T16:41:47.571607594-08:00","closed_at":"2026-01-25T16:41:47.571607594-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-cyu3","depends_on_id":"tv-wisp-wisp-zble","type":"parent-child","created_at":"2026-01-25T16:34:43.901974991-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-cyu3","depends_on_id":"tv-wisp-wisp-9g8p","type":"blocks","created_at":"2026-01-25T16:34:44.026504308-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-cz0l","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-ilh\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-ilh --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:27:22.431963313-08:00","updated_at":"2026-01-25T17:27:22.431963373-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-cz0l","depends_on_id":"tv-wisp-wisp-jyha","type":"parent-child","created_at":"2026-01-25T17:27:22.625359629-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-cz0l","depends_on_id":"tv-wisp-wisp-6znd","type":"blocks","created_at":"2026-01-25T17:27:22.832536057-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-d08y","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:24:16.630663994-08:00","updated_at":"2026-01-25T17:24:16.630664044-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-d0l","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T14:56:57.641696044-08:00","updated_at":"2026-01-25T14:56:57.641696084-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-d0lym","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:22:18.712370717-08:00","updated_at":"2026-01-25T22:22:18.712370777-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-d0lym","depends_on_id":"tv-wisp-wisp-7vv82","type":"parent-child","created_at":"2026-01-25T22:22:19.094213011-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-d0lym","depends_on_id":"tv-wisp-wisp-2ti0a","type":"blocks","created_at":"2026-01-25T22:22:20.228756251-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-d2gg","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-upwa).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-upwa\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:38.835006201-08:00","updated_at":"2026-01-25T16:54:38.835006261-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-d2gg","depends_on_id":"tv-wisp-wisp-i7i6","type":"parent-child","created_at":"2026-01-25T16:54:38.875860396-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-d2gg","depends_on_id":"tv-wisp-wisp-s1bc","type":"blocks","created_at":"2026-01-25T16:54:39.006735283-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-d2gv","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:23:52.355369644-08:00","updated_at":"2026-01-25T19:23:52.355369704-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-d2gv","depends_on_id":"tv-wisp-wisp-hd5u","type":"parent-child","created_at":"2026-01-25T19:23:52.751120497-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-d2gv","depends_on_id":"tv-wisp-wisp-hmuc","type":"blocks","created_at":"2026-01-25T19:23:53.2727972-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-d463","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-puj           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-puj\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:52.55612101-08:00","updated_at":"2026-01-25T19:12:14.58341426-08:00","closed_at":"2026-01-25T19:12:14.58341426-08:00","close_reason":"Work already completed and merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-d463","depends_on_id":"tv-wisp-wisp-kls4","type":"parent-child","created_at":"2026-01-25T19:10:52.560824542-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-d7oe","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-kmy2).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-kmy2\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:24:16.632731535-08:00","updated_at":"2026-01-25T17:24:16.632731575-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-d7oe","depends_on_id":"tv-wisp-wisp-d08y","type":"parent-child","created_at":"2026-01-25T17:24:16.694794242-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-d7oe","depends_on_id":"tv-wisp-wisp-mtvw","type":"blocks","created_at":"2026-01-25T17:24:16.896858268-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-d9bde","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:07:30.664509501-08:00","updated_at":"2026-01-25T22:07:30.664509541-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-d9bde","depends_on_id":"tv-wisp-wisp-mrf18","type":"parent-child","created_at":"2026-01-25T22:07:30.78696704-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-d9bde","depends_on_id":"tv-wisp-wisp-brb8p","type":"blocks","created_at":"2026-01-25T22:07:31.847962572-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-da48","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-jd9           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-jd9\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:25:31.734060703-08:00","updated_at":"2026-01-25T17:27:51.665969204-08:00","closed_at":"2026-01-25T17:27:51.665969204-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-da48","depends_on_id":"tv-wisp-wisp-mdl6","type":"parent-child","created_at":"2026-01-25T17:25:31.738287185-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-dbfyj","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T22:12:14.187365245-08:00","updated_at":"2026-01-25T22:12:14.187365275-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-dbk","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:43:48.145713454-08:00","updated_at":"2026-01-25T14:43:48.145713544-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-dbk","depends_on_id":"tv-wisp-wisp-uuf","type":"parent-child","created_at":"2026-01-25T14:43:48.16322591-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-dbk","depends_on_id":"tv-wisp-wisp-8wl","type":"blocks","created_at":"2026-01-25T14:43:48.190002904-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-dgqc","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-k0gj\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-k0gj --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:52.492488816-08:00","updated_at":"2026-01-25T19:56:46.157306632-08:00","closed_at":"2026-01-25T19:56:46.157306632-08:00","close_reason":"Issue updated with completion notes, beads synced","dependencies":[{"issue_id":"tv-wisp-wisp-dgqc","depends_on_id":"tv-wisp-wisp-oruc","type":"parent-child","created_at":"2026-01-25T19:47:53.000495097-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-dgqc","depends_on_id":"tv-wisp-wisp-vkvy","type":"blocks","created_at":"2026-01-25T19:47:53.586475985-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-dhhpl","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:04:38.995967838-08:00","updated_at":"2026-01-25T22:04:38.995967898-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-dhhpl","depends_on_id":"tv-wisp-wisp-0u79m","type":"parent-child","created_at":"2026-01-25T22:04:39.933865861-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-dhhpl","depends_on_id":"tv-wisp-wisp-1zwzi","type":"blocks","created_at":"2026-01-25T22:04:40.984262518-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-dhzt","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-gvv3           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-gvv3\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:48:28.899086015-08:00","updated_at":"2026-01-25T17:48:28.899086085-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-dhzt","depends_on_id":"tv-wisp-wisp-kic6","type":"parent-child","created_at":"2026-01-25T17:48:28.902817654-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-di5a","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:44.689339677-08:00","updated_at":"2026-01-25T19:25:45.035298286-08:00","closed_at":"2026-01-25T19:25:45.035298286-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-di5a","depends_on_id":"tv-wisp-wisp-07f2","type":"parent-child","created_at":"2026-01-25T19:16:45.057088884-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-di5a","depends_on_id":"tv-wisp-wisp-w6aq","type":"blocks","created_at":"2026-01-25T19:16:45.616735654-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-dmi","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-2bk).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-2bk\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:47.968753713-08:00","updated_at":"2026-01-25T14:41:02.615067099-08:00","closed_at":"2026-01-25T14:41:02.615067099-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-dmi","depends_on_id":"tv-wisp-wisp-7ym","type":"parent-child","created_at":"2026-01-25T14:38:47.976043523-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-dmi","depends_on_id":"tv-wisp-wisp-khe","type":"blocks","created_at":"2026-01-25T14:38:47.998147926-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-dn4a3","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:04:38.994631914-08:00","updated_at":"2026-01-25T22:04:38.994631964-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-dn4a3","depends_on_id":"tv-wisp-wisp-0u79m","type":"parent-child","created_at":"2026-01-25T22:04:39.699745599-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-dn4a3","depends_on_id":"tv-wisp-wisp-s8bnc","type":"blocks","created_at":"2026-01-25T22:04:40.748889065-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-dn7","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-z20\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:44.987859745-08:00","updated_at":"2026-01-25T13:48:02.609945234-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-dn7","depends_on_id":"tv-wisp-wisp-548","type":"parent-child","created_at":"2026-01-25T13:44:44.99455294-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-dn7","depends_on_id":"tv-wisp-wisp-yzw","type":"blocks","created_at":"2026-01-25T13:44:45.000816016-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-do23","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:44:58.597405698-08:00","updated_at":"2026-01-25T17:44:58.597405728-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-dpk","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-puj           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-puj\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:40.04598898-08:00","updated_at":"2026-01-25T13:48:06.283832711-08:00","closed_at":"2026-01-25T13:48:06.283832711-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-dpk","depends_on_id":"tv-wisp-wisp-c60","type":"parent-child","created_at":"2026-01-25T13:45:40.049645403-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-dqp6","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:32:03.800417539-08:00","updated_at":"2026-01-25T17:32:03.800417569-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-dqp6","depends_on_id":"tv-wisp-wisp-19n1","type":"parent-child","created_at":"2026-01-25T17:32:03.979454741-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-dqp6","depends_on_id":"tv-wisp-wisp-8pzc","type":"blocks","created_at":"2026-01-25T17:32:04.241749423-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-dreg","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:27:41.556453012-08:00","updated_at":"2026-01-25T19:27:41.556453072-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-dvn","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-2bk           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-2bk\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:47.968287964-08:00","updated_at":"2026-01-25T14:40:09.566671218-08:00","closed_at":"2026-01-25T14:40:09.566671218-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-dvn","depends_on_id":"tv-wisp-wisp-7ym","type":"parent-child","created_at":"2026-01-25T14:38:47.970216995-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-dwz","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:20.303185192-08:00","updated_at":"2026-01-25T13:50:47.143701054-08:00","closed_at":"2026-01-25T13:50:47.143701054-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-dwz","depends_on_id":"tv-wisp-wisp-735","type":"parent-child","created_at":"2026-01-25T13:45:20.312080093-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-dwz","depends_on_id":"tv-wisp-wisp-75o","type":"blocks","created_at":"2026-01-25T13:45:20.326392494-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-dxwn","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-6e991\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-6e991 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:34.710313379-08:00","updated_at":"2026-01-25T20:14:06.024965722-08:00","closed_at":"2026-01-25T20:14:06.024965722-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-dxwn","depends_on_id":"tv-wisp-wisp-cj2u","type":"parent-child","created_at":"2026-01-25T20:07:35.531857533-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-dxwn","depends_on_id":"tv-wisp-wisp-nagv","type":"blocks","created_at":"2026-01-25T20:07:36.349229197-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-e1f0","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-7xtw\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:07.788029515-08:00","updated_at":"2026-01-25T20:20:07.788029545-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-e1f0","depends_on_id":"tv-wisp-wisp-hl8l","type":"parent-child","created_at":"2026-01-25T20:20:07.884620783-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-e1f0","depends_on_id":"tv-wisp-wisp-3zci","type":"blocks","created_at":"2026-01-25T20:20:08.531038799-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-e4hz","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-eov5)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-eov5\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:10.040435246-08:00","updated_at":"2026-01-25T17:41:10.040435306-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-e4hz","depends_on_id":"tv-wisp-wisp-wv5q","type":"parent-child","created_at":"2026-01-25T17:41:10.175733715-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-e4hz","depends_on_id":"tv-wisp-wisp-jabv","type":"blocks","created_at":"2026-01-25T17:41:10.512457483-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-e6vf","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-wdia).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-wdia\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:28.48982705-08:00","updated_at":"2026-01-25T17:37:28.48982712-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-e6vf","depends_on_id":"tv-wisp-wisp-08mh","type":"parent-child","created_at":"2026-01-25T17:37:28.565127922-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-e6vf","depends_on_id":"tv-wisp-wisp-6f77","type":"blocks","created_at":"2026-01-25T17:37:28.871922911-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-e709","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-jfi6).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-jfi6\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:41.922786255-08:00","updated_at":"2026-01-25T16:54:41.922786315-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-e709","depends_on_id":"tv-wisp-wisp-2w49","type":"parent-child","created_at":"2026-01-25T16:54:41.967279574-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-e709","depends_on_id":"tv-wisp-wisp-l866","type":"blocks","created_at":"2026-01-25T16:54:42.112320384-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-e9na","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-5d7t).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-5d7t\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:56:36.374399227-08:00","updated_at":"2026-01-25T19:56:36.374399257-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-e9na","depends_on_id":"tv-wisp-wisp-vlrj","type":"parent-child","created_at":"2026-01-25T19:56:36.521268792-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-e9na","depends_on_id":"tv-wisp-wisp-ov2k","type":"blocks","created_at":"2026-01-25T19:56:37.114747042-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-e9vw","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-gc5x\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:19.120104243-08:00","updated_at":"2026-01-25T16:08:56.810572233-08:00","closed_at":"2026-01-25T16:08:56.810572233-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-e9vw","depends_on_id":"tv-wisp-wisp-inif","type":"parent-child","created_at":"2026-01-25T16:07:19.139924798-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-e9vw","depends_on_id":"tv-wisp-wisp-ud83","type":"blocks","created_at":"2026-01-25T16:07:19.253882311-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ebyo","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-k0gj).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-k0gj\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:52.489980675-08:00","updated_at":"2026-01-25T19:51:18.474043554-08:00","closed_at":"2026-01-25T19:51:18.474043554-08:00","close_reason":"Main has pre-existing compile failure. Filed tv-wisp-5pvuv. Proceeding with audit work since code review doesn't require compilation.","dependencies":[{"issue_id":"tv-wisp-wisp-ebyo","depends_on_id":"tv-wisp-wisp-oruc","type":"parent-child","created_at":"2026-01-25T19:47:52.638758101-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ebyo","depends_on_id":"tv-wisp-wisp-ckwy","type":"blocks","created_at":"2026-01-25T19:47:53.21245442-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ecd","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-agd should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:31:40.705876039-08:00","updated_at":"2026-01-25T14:31:40.705876079-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ecd","depends_on_id":"tv-wisp-wisp-8rd","type":"parent-child","created_at":"2026-01-25T14:31:40.711795615-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ecd","depends_on_id":"tv-wisp-wisp-jzp","type":"blocks","created_at":"2026-01-25T14:31:40.721036006-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-eeo","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-nz3n)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-nz3n\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:43:48.14505603-08:00","updated_at":"2026-01-25T14:43:48.14505607-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-eeo","depends_on_id":"tv-wisp-wisp-uuf","type":"parent-child","created_at":"2026-01-25T14:43:48.157146524-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-eeo","depends_on_id":"tv-wisp-wisp-590","type":"blocks","created_at":"2026-01-25T14:43:48.183285629-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-eez8","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:21.058548546-08:00","updated_at":"2026-01-25T19:13:02.722040882-08:00","closed_at":"2026-01-25T19:13:02.722040882-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-eez8","depends_on_id":"tv-wisp-wisp-22vo","type":"parent-child","created_at":"2026-01-25T19:10:21.398722339-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-eez8","depends_on_id":"tv-wisp-wisp-ytof","type":"blocks","created_at":"2026-01-25T19:10:21.829460213-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-efu9","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-8ro).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-8ro\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:06:21.220427821-08:00","updated_at":"2026-01-25T16:06:21.220427861-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-efu9","depends_on_id":"tv-wisp-wisp-pysf","type":"parent-child","created_at":"2026-01-25T16:06:21.25008255-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-efu9","depends_on_id":"tv-wisp-wisp-2nea","type":"blocks","created_at":"2026-01-25T16:06:21.349022311-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-eg99","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-gc5x           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-gc5x\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:47.99126408-08:00","updated_at":"2026-01-25T15:29:47.99126414-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-eg99","depends_on_id":"tv-wisp-wisp-9umu","type":"parent-child","created_at":"2026-01-25T15:29:47.997327028-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ejdf","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-38ac should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:16.690583676-08:00","updated_at":"2026-01-25T19:20:00.392791773-08:00","closed_at":"2026-01-25T19:20:00.392791773-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ejdf","depends_on_id":"tv-wisp-wisp-2pyz","type":"parent-child","created_at":"2026-01-25T19:16:16.935858219-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ejdf","depends_on_id":"tv-wisp-wisp-l4j1","type":"blocks","created_at":"2026-01-25T19:16:17.401214008-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ejeo","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-ilh should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:28.582753416-08:00","updated_at":"2026-01-25T17:23:28.582753476-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ejeo","depends_on_id":"tv-wisp-wisp-1gtx","type":"parent-child","created_at":"2026-01-25T17:23:28.69127428-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ek38","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-02pb\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-02pb --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:16.036308124-08:00","updated_at":"2026-01-25T19:18:14.513226439-08:00","closed_at":"2026-01-25T19:18:14.513226439-08:00","close_reason":"N/A - work already merged","dependencies":[{"issue_id":"tv-wisp-wisp-ek38","depends_on_id":"tv-wisp-wisp-qesx","type":"parent-child","created_at":"2026-01-25T19:13:16.424919919-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ek38","depends_on_id":"tv-wisp-wisp-tya1","type":"blocks","created_at":"2026-01-25T19:13:16.866929684-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-enz1f","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"closed","priority":2,"issue_type":"epic","assignee":"tribal_village/witness","created_at":"2026-01-25T22:03:03.50620047-08:00","updated_at":"2026-01-25T22:25:05.689587326-08:00","closed_at":"2026-01-25T22:25:05.689587326-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-wisp-eoce","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-cbg).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-cbg\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:51.066117334-08:00","updated_at":"2026-01-25T19:16:31.429695805-08:00","closed_at":"2026-01-25T19:16:31.429695805-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-eoce","depends_on_id":"tv-wisp-wisp-v2zi","type":"parent-child","created_at":"2026-01-25T19:13:51.181284272-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-eoce","depends_on_id":"tv-wisp-wisp-tv1g","type":"blocks","created_at":"2026-01-25T19:13:51.675420724-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ep1u6","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T22:19:52.882389431-08:00","updated_at":"2026-01-25T22:19:52.882389461-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-et1","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-96g\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-96g --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:36.496138559-08:00","updated_at":"2026-01-25T14:44:23.247181394-08:00","closed_at":"2026-01-25T14:44:23.247181394-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-et1","depends_on_id":"tv-wisp-wisp-lw5","type":"parent-child","created_at":"2026-01-25T14:37:36.50752576-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-et1","depends_on_id":"tv-wisp-wisp-tft","type":"blocks","created_at":"2026-01-25T14:37:36.519234249-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-exkn","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-fwrl           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-fwrl\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:39.839468692-08:00","updated_at":"2026-01-25T17:33:01.142438112-08:00","closed_at":"2026-01-25T17:33:01.142438112-08:00","close_reason":"Context loaded. Need to fix Mangonel AoE: change from 2-tile to 1-tile side prongs per spec.","dependencies":[{"issue_id":"tv-wisp-wisp-exkn","depends_on_id":"tv-wisp-wisp-r2dz","type":"parent-child","created_at":"2026-01-25T17:31:39.844788219-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-exo0","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:26:18.769765948-08:00","updated_at":"2026-01-25T17:26:18.769766009-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-eyqhr","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:12:14.190569545-08:00","updated_at":"2026-01-25T22:12:14.190569585-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-eyqhr","depends_on_id":"tv-wisp-wisp-dbfyj","type":"parent-child","created_at":"2026-01-25T22:12:14.800948889-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-eyqhr","depends_on_id":"tv-wisp-wisp-nbuz6","type":"blocks","created_at":"2026-01-25T22:12:15.894703204-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ez7z","title":"Mechanical rebase","description":"Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/\u003cpolecat-branch\u003e\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2\u003e/dev/null \u0026\u0026 echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/\u003cpolecat-branch\u003e)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: \u003coriginal-issue-title\u003e\" --description=\"## Conflict Resolution Required\n\nOriginal MR: \u003cmr-bead-id\u003e\nBranch: \u003cpolecat-branch\u003e\nOriginal Issue: \u003cissue-id\u003e\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin \u003cbranch\u003e\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:10.486238741-08:00","updated_at":"2026-01-25T21:00:10.486238801-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ez7z","depends_on_id":"tv-wisp-wisp-u7fv","type":"parent-child","created_at":"2026-01-25T21:00:10.760564288-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-ez7z","depends_on_id":"tv-wisp-wisp-78na","type":"blocks","created_at":"2026-01-25T21:00:11.712846839-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ezeox","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:31:06.902051545-08:00","updated_at":"2026-01-25T22:31:06.902051595-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ezeox","depends_on_id":"tv-wisp-wisp-4nh4e","type":"parent-child","created_at":"2026-01-25T22:31:07.676934317-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-ezeox","depends_on_id":"tv-wisp-wisp-g4l8u","type":"blocks","created_at":"2026-01-25T22:31:08.854391549-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-f0f","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-3ns\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:20.304020636-08:00","updated_at":"2026-01-25T13:51:47.168283463-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-f0f","depends_on_id":"tv-wisp-wisp-735","type":"parent-child","created_at":"2026-01-25T13:45:20.316299063-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-f0f","depends_on_id":"tv-wisp-wisp-0ar","type":"blocks","created_at":"2026-01-25T13:45:20.332301348-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-f1bg","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-gc5x).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-gc5x\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:47.992179888-08:00","updated_at":"2026-01-25T15:29:47.992179938-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-f1bg","depends_on_id":"tv-wisp-wisp-9umu","type":"parent-child","created_at":"2026-01-25T15:29:48.021528578-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-f1bg","depends_on_id":"tv-wisp-wisp-w54v","type":"blocks","created_at":"2026-01-25T15:29:48.117066473-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-f1fv","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T21:52:19.634970359-08:00","updated_at":"2026-01-25T21:52:19.634970399-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-f2ka","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:40:01.32000777-08:00","updated_at":"2026-01-25T17:40:01.32000783-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-f2zo","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-y1kfh)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-y1kfh\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:40.889444773-08:00","updated_at":"2026-01-25T20:16:05.128997562-08:00","closed_at":"2026-01-25T20:16:05.128997562-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-f2zo","depends_on_id":"tv-wisp-wisp-oa0y","type":"parent-child","created_at":"2026-01-25T20:07:41.187293105-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-f2zo","depends_on_id":"tv-wisp-wisp-cwbc","type":"blocks","created_at":"2026-01-25T20:07:41.91807926-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-f3bu","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T15:09:36.713787206-08:00","updated_at":"2026-01-25T15:09:36.713787266-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-f42h","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:07:58.873366303-08:00","updated_at":"2026-01-25T15:07:58.873366343-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-f42h","depends_on_id":"tv-wisp-wisp-hroa","type":"parent-child","created_at":"2026-01-25T15:07:58.906631762-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-f42h","depends_on_id":"tv-wisp-wisp-tw96","type":"blocks","created_at":"2026-01-25T15:07:58.973505068-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-f495","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:34.70886234-08:00","updated_at":"2026-01-25T20:13:12.992823972-08:00","closed_at":"2026-01-25T20:13:12.992823972-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-f495","depends_on_id":"tv-wisp-wisp-cj2u","type":"parent-child","created_at":"2026-01-25T20:07:35.342634076-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-f495","depends_on_id":"tv-wisp-wisp-zcrr","type":"blocks","created_at":"2026-01-25T20:07:36.144800904-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-f5xx","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-746p\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:38.427135877-08:00","updated_at":"2026-01-25T17:44:38.427135917-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-f5xx","depends_on_id":"tv-wisp-wisp-7urn","type":"parent-child","created_at":"2026-01-25T17:44:38.475310598-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-f5xx","depends_on_id":"tv-wisp-wisp-66w7","type":"blocks","created_at":"2026-01-25T17:44:38.825645558-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-f6pv","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:38.428550138-08:00","updated_at":"2026-01-25T17:44:38.428550178-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-f6pv","depends_on_id":"tv-wisp-wisp-7urn","type":"parent-child","created_at":"2026-01-25T17:44:38.65756866-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-f6pv","depends_on_id":"tv-wisp-wisp-z5pk","type":"blocks","created_at":"2026-01-25T17:44:39.002327137-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-f7lr","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-433\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-433 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:36.717473035-08:00","updated_at":"2026-01-25T15:09:36.717473085-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-f7lr","depends_on_id":"tv-wisp-wisp-f3bu","type":"parent-child","created_at":"2026-01-25T15:09:36.781562768-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-f7lr","depends_on_id":"tv-wisp-wisp-t1yt","type":"blocks","created_at":"2026-01-25T15:09:36.842228912-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-f823","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-oyub\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:45:07.964915044-08:00","updated_at":"2026-01-25T17:47:48.515121264-08:00","closed_at":"2026-01-25T17:47:48.515121264-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-f823","depends_on_id":"tv-wisp-wisp-n3rx","type":"parent-child","created_at":"2026-01-25T17:45:08.014804616-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-f823","depends_on_id":"tv-wisp-wisp-8muz","type":"blocks","created_at":"2026-01-25T17:45:08.374302568-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-f8ob","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-zngh\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:50.539519049-08:00","updated_at":"2026-01-25T16:34:50.539519079-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-f8ob","depends_on_id":"tv-wisp-wisp-58fz","type":"parent-child","created_at":"2026-01-25T16:34:50.704090305-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-f8ob","depends_on_id":"tv-wisp-wisp-2v11","type":"blocks","created_at":"2026-01-25T16:34:50.857833026-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-f9kvm","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:07:30.665430924-08:00","updated_at":"2026-01-25T22:07:30.665430954-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-f9kvm","depends_on_id":"tv-wisp-wisp-mrf18","type":"parent-child","created_at":"2026-01-25T22:07:31.022505383-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-f9kvm","depends_on_id":"tv-wisp-wisp-03vmt","type":"blocks","created_at":"2026-01-25T22:07:32.085182245-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-f9m4","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-dtqk).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-dtqk\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:40:01.322531242-08:00","updated_at":"2026-01-25T17:40:01.322531313-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-f9m4","depends_on_id":"tv-wisp-wisp-f2ka","type":"parent-child","created_at":"2026-01-25T17:40:01.438554845-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-f9m4","depends_on_id":"tv-wisp-wisp-8stg","type":"blocks","created_at":"2026-01-25T17:40:01.929980303-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fb5o","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-gvv3\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:48:28.902271964-08:00","updated_at":"2026-01-25T17:48:28.902271994-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-fb5o","depends_on_id":"tv-wisp-wisp-kic6","type":"parent-child","created_at":"2026-01-25T17:48:29.318939471-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-fb5o","depends_on_id":"tv-wisp-wisp-0g1x","type":"blocks","created_at":"2026-01-25T17:48:29.708538896-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fby6","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:41.763445156-08:00","updated_at":"2026-01-25T21:58:46.237216956-08:00","closed_at":"2026-01-25T21:58:46.237216956-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-fby6","depends_on_id":"tv-wisp-wisp-lanr","type":"parent-child","created_at":"2026-01-25T21:00:42.67050251-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-fby6","depends_on_id":"tv-wisp-wisp-07rz","type":"blocks","created_at":"2026-01-25T21:00:43.55583041-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fi67","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-318k           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-318k\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:20:52.489352016-08:00","updated_at":"2026-01-25T19:20:52.489352057-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-fi67","depends_on_id":"tv-wisp-wisp-wkqr","type":"parent-child","created_at":"2026-01-25T19:20:52.49586654-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fik8","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:21.90950203-08:00","updated_at":"2026-01-25T15:04:21.90950209-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-fik8","depends_on_id":"tv-wisp-wisp-wxnw","type":"parent-child","created_at":"2026-01-25T15:04:21.940972941-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-fik8","depends_on_id":"tv-wisp-wisp-i8ri","type":"blocks","created_at":"2026-01-25T15:04:21.981384012-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fj1o","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-b3n)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-b3n\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:18.804191233-08:00","updated_at":"2026-01-25T15:09:18.804191273-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-fj1o","depends_on_id":"tv-wisp-wisp-86en","type":"parent-child","created_at":"2026-01-25T15:09:18.825825881-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-fj1o","depends_on_id":"tv-wisp-wisp-5o2b","type":"blocks","created_at":"2026-01-25T15:09:18.878622859-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fjqx","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-376f).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-376f\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:25:24.604793796-08:00","updated_at":"2026-01-25T19:25:24.604793856-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-fjqx","depends_on_id":"tv-wisp-wisp-y86p","type":"parent-child","created_at":"2026-01-25T19:25:24.739831979-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-fjqx","depends_on_id":"tv-wisp-wisp-l5sc","type":"blocks","created_at":"2026-01-25T19:25:25.309779229-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fk0b","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:52.559469773-08:00","updated_at":"2026-01-25T19:12:31.730187068-08:00","closed_at":"2026-01-25T19:12:31.730187068-08:00","close_reason":"Work already completed and merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-fk0b","depends_on_id":"tv-wisp-wisp-kls4","type":"parent-child","created_at":"2026-01-25T19:10:52.898974387-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-fk0b","depends_on_id":"tv-wisp-wisp-tsh1","type":"blocks","created_at":"2026-01-25T19:10:53.380873244-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fkco","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-k0or)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-k0or\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:23:52.353711007-08:00","updated_at":"2026-01-25T19:23:52.353711067-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-fkco","depends_on_id":"tv-wisp-wisp-hd5u","type":"parent-child","created_at":"2026-01-25T19:23:52.558272207-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-fkco","depends_on_id":"tv-wisp-wisp-ztlj","type":"blocks","created_at":"2026-01-25T19:23:53.080769752-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fkhr","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-02pb should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:16.034721221-08:00","updated_at":"2026-01-25T19:18:04.781199822-08:00","closed_at":"2026-01-25T19:18:04.781199822-08:00","close_reason":"N/A - work already merged","dependencies":[{"issue_id":"tv-wisp-wisp-fkhr","depends_on_id":"tv-wisp-wisp-qesx","type":"parent-child","created_at":"2026-01-25T19:13:16.261362001-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-fkhr","depends_on_id":"tv-wisp-wisp-upwb","type":"blocks","created_at":"2026-01-25T19:13:16.700767604-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fku2","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:51.06858935-08:00","updated_at":"2026-01-25T19:22:17.267378461-08:00","closed_at":"2026-01-25T19:22:17.267378461-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-fku2","depends_on_id":"tv-wisp-wisp-v2zi","type":"parent-child","created_at":"2026-01-25T19:13:51.427583908-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-fku2","depends_on_id":"tv-wisp-wisp-cox8","type":"blocks","created_at":"2026-01-25T19:13:51.91418464-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fl6o4","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T22:25:19.467462783-08:00","updated_at":"2026-01-25T22:25:19.467462813-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-fmqas","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before hq-cv-gzu6g\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:55:16.252503326-08:00","updated_at":"2026-01-25T21:55:16.252503356-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-fmqas","depends_on_id":"tv-wisp-wisp-y04mr","type":"parent-child","created_at":"2026-01-25T21:55:16.387741523-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-fmqas","depends_on_id":"tv-wisp-wisp-jjma4","type":"blocks","created_at":"2026-01-25T21:55:17.33536287-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fo9so","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show hq-cv-bsv3u\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update hq-cv-bsv3u --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:17.687863896-08:00","updated_at":"2026-01-25T21:54:17.687863936-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-fo9so","depends_on_id":"tv-wisp-wisp-zyr6q","type":"parent-child","created_at":"2026-01-25T21:54:18.458998876-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-fo9so","depends_on_id":"tv-wisp-wisp-gns9i","type":"blocks","created_at":"2026-01-25T21:54:19.331067984-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-foa","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-3ns)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-3ns\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:20.302545462-08:00","updated_at":"2026-01-25T13:50:15.290950096-08:00","closed_at":"2026-01-25T13:50:15.290950096-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-foa","depends_on_id":"tv-wisp-wisp-735","type":"parent-child","created_at":"2026-01-25T13:45:20.30955278-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-foa","depends_on_id":"tv-wisp-wisp-79q","type":"blocks","created_at":"2026-01-25T13:45:20.322556646-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fqga","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-d6jo\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:57:57.426553821-08:00","updated_at":"2026-01-25T19:57:57.426553851-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-fqga","depends_on_id":"tv-wisp-wisp-rah4","type":"parent-child","created_at":"2026-01-25T19:57:58.028779878-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-fqga","depends_on_id":"tv-wisp-wisp-p3xq","type":"blocks","created_at":"2026-01-25T19:57:58.620936578-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ft2i","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-v0lg)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-v0lg\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:44.688012589-08:00","updated_at":"2026-01-25T19:24:12.401038558-08:00","closed_at":"2026-01-25T19:24:12.401038558-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ft2i","depends_on_id":"tv-wisp-wisp-07f2","type":"parent-child","created_at":"2026-01-25T19:16:44.874566475-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ft2i","depends_on_id":"tv-wisp-wisp-5y9w","type":"blocks","created_at":"2026-01-25T19:16:45.407290408-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fu8uj","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: hq-cv-x5kp2\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:57.673175563-08:00","updated_at":"2026-01-25T21:54:57.673175593-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-fu8uj","depends_on_id":"tv-wisp-wisp-i45n5","type":"parent-child","created_at":"2026-01-25T21:54:58.607835304-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-fu8uj","depends_on_id":"tv-wisp-wisp-ikq8f","type":"blocks","created_at":"2026-01-25T21:54:59.509738817-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fudf","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-5o2p\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:55.297584177-08:00","updated_at":"2026-01-25T17:34:55.297584237-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-fudf","depends_on_id":"tv-wisp-wisp-2t2z","type":"parent-child","created_at":"2026-01-25T17:34:55.336537354-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-fudf","depends_on_id":"tv-wisp-wisp-5vvt","type":"blocks","created_at":"2026-01-25T17:34:55.634735713-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fux","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-puj\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:40.048956952-08:00","updated_at":"2026-01-25T19:13:01.669670134-08:00","closed_at":"2026-01-25T19:13:01.669670134-08:00","close_reason":"Work already completed and merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-fux","depends_on_id":"tv-wisp-wisp-c60","type":"parent-child","created_at":"2026-01-25T13:45:40.07320626-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-fux","depends_on_id":"tv-wisp-wisp-3om","type":"blocks","created_at":"2026-01-25T13:45:40.097332348-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-fz9o","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-7xtw).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-7xtw\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:07.78845948-08:00","updated_at":"2026-01-25T20:20:07.78845952-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-fz9o","depends_on_id":"tv-wisp-wisp-hl8l","type":"parent-child","created_at":"2026-01-25T20:20:07.965491263-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-fz9o","depends_on_id":"tv-wisp-wisp-e1f0","type":"blocks","created_at":"2026-01-25T20:20:08.623119773-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-g0x4z","title":"Handle test failures","description":"**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - Option A: Fix it yourself (you're the Engineer!)\n   - Option B: File a bead: bd create --type=bug --priority=1 --title=\"...\"\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Fix committed, OR\n- Bead filed for the failure\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:46:06.932705906-08:00","updated_at":"2026-01-25T22:46:06.932705946-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-g0x4z","depends_on_id":"tv-wisp-wisp-rqw9g","type":"parent-child","created_at":"2026-01-25T22:46:07.502578832-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-g0x4z","depends_on_id":"tv-wisp-wisp-hc25f","type":"blocks","created_at":"2026-01-25T22:46:08.871453083-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-g2i9","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:19.122069782-08:00","updated_at":"2026-01-25T16:11:44.510617576-08:00","closed_at":"2026-01-25T16:11:44.510617576-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-g2i9","depends_on_id":"tv-wisp-wisp-inif","type":"parent-child","created_at":"2026-01-25T16:07:19.19725719-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-g2i9","depends_on_id":"tv-wisp-wisp-l7ub","type":"blocks","created_at":"2026-01-25T16:07:19.311702403-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-g2m76","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/\u003cbranch\u003e`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"\u003csource_issue\u003e\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:46:06.935071866-08:00","updated_at":"2026-01-25T22:46:06.935071906-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-g2m76","depends_on_id":"tv-wisp-wisp-rqw9g","type":"parent-child","created_at":"2026-01-25T22:46:08.198089162-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-g2m76","depends_on_id":"tv-wisp-wisp-tjzui","type":"blocks","created_at":"2026-01-25T22:46:09.546763426-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-g47c","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-m1fr).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-m1fr\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:41.663901058-08:00","updated_at":"2026-01-25T17:42:13.227628112-08:00","closed_at":"2026-01-25T17:42:13.227628112-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-g47c","depends_on_id":"tv-wisp-wisp-kb77","type":"parent-child","created_at":"2026-01-25T17:34:41.73416581-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-g47c","depends_on_id":"tv-wisp-wisp-jzo0","type":"blocks","created_at":"2026-01-25T17:34:42.016707839-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-g4ie","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-3ns\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:53.46818041-08:00","updated_at":"2026-01-25T22:21:43.593485952-08:00","closed_at":"2026-01-25T22:21:43.593485952-08:00","close_reason":"Feature already merged to main - no new branch to submit","dependencies":[{"issue_id":"tv-wisp-wisp-g4ie","depends_on_id":"tv-wisp-wisp-v9eo","type":"parent-child","created_at":"2026-01-25T19:11:53.91244892-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-g4ie","depends_on_id":"tv-wisp-wisp-vqmu","type":"blocks","created_at":"2026-01-25T19:11:54.368351813-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-g4l8u","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:31:06.901561656-08:00","updated_at":"2026-01-25T22:31:06.901561696-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-g4l8u","depends_on_id":"tv-wisp-wisp-4nh4e","type":"parent-child","created_at":"2026-01-25T22:31:07.547005401-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-g4l8u","depends_on_id":"tv-wisp-wisp-c3vy4","type":"blocks","created_at":"2026-01-25T22:31:08.724459396-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-g5f","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T14:56:39.840134739-08:00","updated_at":"2026-01-25T14:56:39.840134779-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-g5p","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-agd).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-agd\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:31:40.705538551-08:00","updated_at":"2026-01-25T14:31:40.705538591-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-g5p","depends_on_id":"tv-wisp-wisp-8rd","type":"parent-child","created_at":"2026-01-25T14:31:40.709232952-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-g5p","depends_on_id":"tv-wisp-wisp-09o","type":"blocks","created_at":"2026-01-25T14:31:40.718852509-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-g6r3n","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:15:21.196383738-08:00","updated_at":"2026-01-25T22:15:21.196383778-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-g6r3n","depends_on_id":"tv-wisp-wisp-y02ot","type":"parent-child","created_at":"2026-01-25T22:15:21.728873762-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-g6r3n","depends_on_id":"tv-wisp-wisp-a3sui","type":"blocks","created_at":"2026-01-25T22:15:22.938130315-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ga88","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-gddu).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-gddu\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:46:56.901777025-08:00","updated_at":"2026-01-25T17:46:56.901777065-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ga88","depends_on_id":"tv-wisp-wisp-l96l","type":"parent-child","created_at":"2026-01-25T17:46:57.011569008-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ga88","depends_on_id":"tv-wisp-wisp-bvvi","type":"blocks","created_at":"2026-01-25T17:46:57.413237088-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gb4i","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-bbok           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-bbok\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:32:03.798839121-08:00","updated_at":"2026-01-25T17:32:03.798839171-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-gb4i","depends_on_id":"tv-wisp-wisp-19n1","type":"parent-child","created_at":"2026-01-25T17:32:03.802010535-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gbdp","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-7xtw\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:07.791128095-08:00","updated_at":"2026-01-25T20:20:07.791128136-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-gbdp","depends_on_id":"tv-wisp-wisp-hl8l","type":"parent-child","created_at":"2026-01-25T20:20:08.451354951-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-gbdp","depends_on_id":"tv-wisp-wisp-2yj6","type":"blocks","created_at":"2026-01-25T20:20:09.180385184-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gc0","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-1rmd\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:41:43.851070227-08:00","updated_at":"2026-01-25T14:45:18.992598001-08:00","closed_at":"2026-01-25T14:45:18.992598001-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-gc0","depends_on_id":"tv-wisp-wisp-mni","type":"parent-child","created_at":"2026-01-25T14:41:43.855674198-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-gc0","depends_on_id":"tv-wisp-wisp-zou","type":"blocks","created_at":"2026-01-25T14:41:43.877906752-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gd42","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-318k\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-318k --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:20:52.494561423-08:00","updated_at":"2026-01-25T19:20:52.494561483-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-gd42","depends_on_id":"tv-wisp-wisp-wkqr","type":"parent-child","created_at":"2026-01-25T19:20:52.959807992-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-gd42","depends_on_id":"tv-wisp-wisp-rnfo","type":"blocks","created_at":"2026-01-25T19:20:53.458674132-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gdm0o","title":"Generate handoff summary","description":"Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:46:06.934150834-08:00","updated_at":"2026-01-25T22:46:06.934150874-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-gdm0o","depends_on_id":"tv-wisp-wisp-rqw9g","type":"parent-child","created_at":"2026-01-25T22:46:07.927335664-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-gdm0o","depends_on_id":"tv-wisp-wisp-tzba9","type":"blocks","created_at":"2026-01-25T22:46:09.272400437-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gfc","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:44.987388508-08:00","updated_at":"2026-01-25T13:47:43.680348412-08:00","closed_at":"2026-01-25T13:47:43.680348412-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-gfc","depends_on_id":"tv-wisp-wisp-548","type":"parent-child","created_at":"2026-01-25T13:44:44.992260043-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-gfc","depends_on_id":"tv-wisp-wisp-xvw","type":"blocks","created_at":"2026-01-25T13:44:44.998447588-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ggr9","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:15.598895892-08:00","updated_at":"2026-01-25T17:35:58.740165538-08:00","closed_at":"2026-01-25T17:35:58.740165538-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ggr9","depends_on_id":"tv-wisp-wisp-ce9t","type":"parent-child","created_at":"2026-01-25T17:31:15.767214819-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ggr9","depends_on_id":"tv-wisp-wisp-zuod","type":"blocks","created_at":"2026-01-25T17:31:15.996068645-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gho","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:52:53.984896652-08:00","updated_at":"2026-01-25T14:52:53.984896693-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-gho","depends_on_id":"tv-wisp-wisp-7h8","type":"parent-child","created_at":"2026-01-25T14:52:54.007254891-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-gho","depends_on_id":"tv-wisp-wisp-wyv","type":"blocks","created_at":"2026-01-25T14:52:54.038760654-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gkp3","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-i8sz\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:33:12.902533784-08:00","updated_at":"2026-01-25T17:36:16.632451732-08:00","closed_at":"2026-01-25T17:36:16.632451732-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-gkp3","depends_on_id":"tv-wisp-wisp-bs1f","type":"parent-child","created_at":"2026-01-25T17:33:12.937184798-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-gkp3","depends_on_id":"tv-wisp-wisp-aaau","type":"blocks","created_at":"2026-01-25T17:33:13.199929285-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gmqo","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-dtqk           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-dtqk\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:40:01.321215605-08:00","updated_at":"2026-01-25T17:40:01.321215655-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-gmqo","depends_on_id":"tv-wisp-wisp-f2ka","type":"parent-child","created_at":"2026-01-25T17:40:01.326744832-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gns9i","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:17.687039756-08:00","updated_at":"2026-01-25T21:54:17.687039796-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-gns9i","depends_on_id":"tv-wisp-wisp-zyr6q","type":"parent-child","created_at":"2026-01-25T21:54:18.349722294-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-gns9i","depends_on_id":"tv-wisp-wisp-xgblc","type":"blocks","created_at":"2026-01-25T21:54:19.218567608-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gnur","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:57:57.425729152-08:00","updated_at":"2026-01-25T19:57:57.425729182-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-gnur","depends_on_id":"tv-wisp-wisp-rah4","type":"parent-child","created_at":"2026-01-25T19:57:57.884595142-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-gnur","depends_on_id":"tv-wisp-wisp-qqlz","type":"blocks","created_at":"2026-01-25T19:57:58.474283223-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gnvl","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-395fz           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-395fz\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:26.377998964-08:00","updated_at":"2026-01-25T20:15:36.928540658-08:00","closed_at":"2026-01-25T20:15:36.928540658-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-gnvl","depends_on_id":"tv-wisp-wisp-1k5c","type":"parent-child","created_at":"2026-01-25T20:07:26.392045889-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gpig","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-8b8\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-8b8 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:21.910133709-08:00","updated_at":"2026-01-25T15:04:21.910133769-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-gpig","depends_on_id":"tv-wisp-wisp-wxnw","type":"parent-child","created_at":"2026-01-25T15:04:21.950587089-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-gpig","depends_on_id":"tv-wisp-wisp-wpma","type":"blocks","created_at":"2026-01-25T15:04:21.992675692-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gs7r","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:33:12.904184697-08:00","updated_at":"2026-01-25T17:42:39.433826628-08:00","closed_at":"2026-01-25T17:42:39.433826628-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-gs7r","depends_on_id":"tv-wisp-wisp-bs1f","type":"parent-child","created_at":"2026-01-25T17:33:13.103954024-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-gs7r","depends_on_id":"tv-wisp-wisp-skdy","type":"blocks","created_at":"2026-01-25T17:33:13.362847738-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gti7","title":"Merge and push to main","description":"Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send \u003crig\u003e/witness -s \"MERGED \u003cpolecat-name\u003e\" -m \"Branch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"\u003cissue-id\u003e\"\n# OR verify the commit SHA is on main:\ngit branch --contains \u003ccommit-sha\u003e | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close \u003cmr-bead-id\u003e --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep \u003cpolecat-name\u003e\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive \u003cmerge-ready-message-id\u003e\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete \u003cpolecat-branch\u003e\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:38:02.236439886-08:00","updated_at":"2026-01-25T21:38:02.236439926-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-gti7","depends_on_id":"tv-wisp-wisp-chaw","type":"parent-child","created_at":"2026-01-25T21:38:02.777180803-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-gti7","depends_on_id":"tv-wisp-wisp-jtc7","type":"blocks","created_at":"2026-01-25T21:38:03.826691052-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gudg","title":"Handle test failures","description":"**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - Option A: Fix it yourself (you're the Engineer!)\n   - Option B: File a bead: bd create --type=bug --priority=1 --title=\"...\"\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Fix committed, OR\n- Bead filed for the failure\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:10.487968551-08:00","updated_at":"2026-01-25T21:00:10.487968632-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-gudg","depends_on_id":"tv-wisp-wisp-u7fv","type":"parent-child","created_at":"2026-01-25T21:00:10.962993196-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-gudg","depends_on_id":"tv-wisp-wisp-ioph","type":"blocks","created_at":"2026-01-25T21:00:11.902720238-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-guyft","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:59:15.399030745-08:00","updated_at":"2026-01-25T21:59:15.399030775-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-guyft","depends_on_id":"tv-wisp-wisp-9y6rc","type":"parent-child","created_at":"2026-01-25T21:59:15.74537609-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-guyft","depends_on_id":"tv-wisp-wisp-tg1yh","type":"blocks","created_at":"2026-01-25T21:59:16.77590741-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gwic","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-zngh should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:50.538375924-08:00","updated_at":"2026-01-25T16:34:50.538375974-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-gwic","depends_on_id":"tv-wisp-wisp-58fz","type":"parent-child","created_at":"2026-01-25T16:34:50.609082981-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-gwic","depends_on_id":"tv-wisp-wisp-2p7w","type":"blocks","created_at":"2026-01-25T16:34:50.779146856-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gx1b","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-gc5x\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:47.996346349-08:00","updated_at":"2026-01-25T15:29:47.996346419-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-gx1b","depends_on_id":"tv-wisp-wisp-9umu","type":"parent-child","created_at":"2026-01-25T15:29:48.088710484-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-gx1b","depends_on_id":"tv-wisp-wisp-jgb3","type":"blocks","created_at":"2026-01-25T15:29:48.185301423-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gymz","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-v0lg\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-v0lg --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:44.689961357-08:00","updated_at":"2026-01-25T19:26:12.958071451-08:00","closed_at":"2026-01-25T19:26:12.958071451-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-gymz","depends_on_id":"tv-wisp-wisp-07f2","type":"parent-child","created_at":"2026-01-25T19:16:45.146115646-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-gymz","depends_on_id":"tv-wisp-wisp-di5a","type":"blocks","created_at":"2026-01-25T19:16:45.684422733-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-gzg","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-1rmd\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-1rmd --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:41:43.852268331-08:00","updated_at":"2026-01-25T14:47:30.989685021-08:00","closed_at":"2026-01-25T14:47:30.989685021-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-gzg","depends_on_id":"tv-wisp-wisp-mni","type":"parent-child","created_at":"2026-01-25T14:41:43.872301478-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-gzg","depends_on_id":"tv-wisp-wisp-7la","type":"blocks","created_at":"2026-01-25T14:41:43.897248979-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-h114","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-v0lg           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-v0lg\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:21.055692163-08:00","updated_at":"2026-01-25T19:12:51.029222811-08:00","closed_at":"2026-01-25T19:12:51.029222811-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-h114","depends_on_id":"tv-wisp-wisp-22vo","type":"parent-child","created_at":"2026-01-25T19:10:21.059731685-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-h1hp","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:06.916728053-08:00","updated_at":"2026-01-25T21:00:06.916728123-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-h1hp","depends_on_id":"tv-wisp-wisp-6imy","type":"parent-child","created_at":"2026-01-25T21:00:06.923813095-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-h2op","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-l0oc\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:28:18.59419147-08:00","updated_at":"2026-01-25T17:28:18.59419152-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-h2op","depends_on_id":"tv-wisp-wisp-p9hy","type":"parent-child","created_at":"2026-01-25T17:28:18.622184697-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-h2op","depends_on_id":"tv-wisp-wisp-3res","type":"blocks","created_at":"2026-01-25T17:28:18.84443715-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-h4a3","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:20:52.493447293-08:00","updated_at":"2026-01-25T19:20:52.493447353-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-h4a3","depends_on_id":"tv-wisp-wisp-wkqr","type":"parent-child","created_at":"2026-01-25T19:20:52.8235217-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-h4a3","depends_on_id":"tv-wisp-wisp-4jxc","type":"blocks","created_at":"2026-01-25T19:20:53.332748154-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-h527","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:41.762098831-08:00","updated_at":"2026-01-25T21:58:26.147857141-08:00","closed_at":"2026-01-25T21:58:26.147857141-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-h527","depends_on_id":"tv-wisp-wisp-lanr","type":"parent-child","created_at":"2026-01-25T21:00:42.454334892-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-h527","depends_on_id":"tv-wisp-wisp-1im4","type":"blocks","created_at":"2026-01-25T21:00:43.366201829-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-h6z3","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:06.919698701-08:00","updated_at":"2026-01-25T21:00:06.919698751-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-h6z3","depends_on_id":"tv-wisp-wisp-6imy","type":"parent-child","created_at":"2026-01-25T21:00:07.295683583-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-h6z3","depends_on_id":"tv-wisp-wisp-xxmc","type":"blocks","created_at":"2026-01-25T21:00:08.174889463-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-h7hf","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-kmy2\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-kmy2 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:24:16.634178076-08:00","updated_at":"2026-01-25T17:24:16.634178127-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-h7hf","depends_on_id":"tv-wisp-wisp-d08y","type":"parent-child","created_at":"2026-01-25T17:24:16.831450405-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-h7hf","depends_on_id":"tv-wisp-wisp-pvef","type":"blocks","created_at":"2026-01-25T17:24:17.014546811-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-h8lq","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-cx6z           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-cx6z\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:21:13.442958423-08:00","updated_at":"2026-01-25T20:21:13.442958513-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-h8lq","depends_on_id":"tv-wisp-wisp-5nrw","type":"parent-child","created_at":"2026-01-25T20:21:13.44891491-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ha44","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-2mu6\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:27:41.562917772-08:00","updated_at":"2026-01-25T19:27:41.562917812-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ha44","depends_on_id":"tv-wisp-wisp-dreg","type":"parent-child","created_at":"2026-01-25T19:27:42.097483441-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ha44","depends_on_id":"tv-wisp-wisp-60af","type":"blocks","created_at":"2026-01-25T19:27:42.645697975-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hay","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-z20)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-z20\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:44.987059516-08:00","updated_at":"2026-01-25T13:47:37.901377814-08:00","closed_at":"2026-01-25T13:47:37.901377814-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-hay","depends_on_id":"tv-wisp-wisp-548","type":"parent-child","created_at":"2026-01-25T13:44:44.990751646-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-hay","depends_on_id":"tv-wisp-wisp-v3u","type":"blocks","created_at":"2026-01-25T13:44:44.996882906-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hc25f","title":"Run test suite","description":"Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:46:06.932104444-08:00","updated_at":"2026-01-25T22:46:06.932104484-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-hc25f","depends_on_id":"tv-wisp-wisp-rqw9g","type":"parent-child","created_at":"2026-01-25T22:46:07.356262659-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-hc25f","depends_on_id":"tv-wisp-wisp-i1ty3","type":"blocks","created_at":"2026-01-25T22:46:08.738658696-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hd5u","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:23:52.350808908-08:00","updated_at":"2026-01-25T19:23:52.350808968-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-hdf","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-j1jx           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-j1jx\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:52:53.983812746-08:00","updated_at":"2026-01-25T14:52:53.983812786-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-hdf","depends_on_id":"tv-wisp-wisp-7h8","type":"parent-child","created_at":"2026-01-25T14:52:53.985957997-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hf66w","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:52:19.642680836-08:00","updated_at":"2026-01-25T21:52:19.642680876-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-hf66w","depends_on_id":"tv-wisp-wisp-f1fv","type":"parent-child","created_at":"2026-01-25T21:52:20.406012651-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-hf66w","depends_on_id":"tv-wisp-wisp-7rx47","type":"blocks","created_at":"2026-01-25T21:52:21.376989641-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hhf2","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-0pkq\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-0pkq --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:28.759736591-08:00","updated_at":"2026-01-25T20:20:28.759736641-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-hhf2","depends_on_id":"tv-wisp-wisp-tcnq","type":"parent-child","created_at":"2026-01-25T20:20:29.370948301-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-hhf2","depends_on_id":"tv-wisp-wisp-urqv","type":"blocks","created_at":"2026-01-25T20:20:30.041453329-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hhw1","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:47:57.544442025-08:00","updated_at":"2026-01-25T19:47:57.544442065-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-hioq","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-z9d7\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-z9d7 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:07:58.873933221-08:00","updated_at":"2026-01-25T15:07:58.873933261-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-hioq","depends_on_id":"tv-wisp-wisp-hroa","type":"parent-child","created_at":"2026-01-25T15:07:58.925186564-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-hioq","depends_on_id":"tv-wisp-wisp-jh8q","type":"blocks","created_at":"2026-01-25T15:07:58.986362386-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hjb0","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:29.794118395-08:00","updated_at":"2026-01-25T15:29:29.794118435-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-hjb0","depends_on_id":"tv-wisp-wisp-87al","type":"parent-child","created_at":"2026-01-25T15:29:29.851452463-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-hjb0","depends_on_id":"tv-wisp-wisp-0ins","type":"blocks","created_at":"2026-01-25T15:29:29.928385926-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hkgg","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:39.842745553-08:00","updated_at":"2026-01-25T17:38:42.528646918-08:00","closed_at":"2026-01-25T17:38:42.528646918-08:00","close_reason":"Build passes. Shared library builds successfully.","dependencies":[{"issue_id":"tv-wisp-wisp-hkgg","depends_on_id":"tv-wisp-wisp-r2dz","type":"parent-child","created_at":"2026-01-25T17:31:39.996287264-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-hkgg","depends_on_id":"tv-wisp-wisp-a2km","type":"blocks","created_at":"2026-01-25T17:31:40.257193369-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hl2y","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T15:04:57.562258524-08:00","updated_at":"2026-01-25T15:04:57.562258584-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-hl8l","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T20:20:07.786722348-08:00","updated_at":"2026-01-25T20:20:07.786722388-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-hla4","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:22.637231235-08:00","updated_at":"2026-01-25T21:59:06.137523121-08:00","closed_at":"2026-01-25T21:59:06.137523121-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-hla4","depends_on_id":"tv-wisp-wisp-m1vl","type":"parent-child","created_at":"2026-01-25T19:11:22.906092733-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-hla4","depends_on_id":"tv-wisp-wisp-7s4v","type":"blocks","created_at":"2026-01-25T19:11:23.341391134-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hmuc","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:23:52.354813756-08:00","updated_at":"2026-01-25T19:23:52.354813826-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-hmuc","depends_on_id":"tv-wisp-wisp-hd5u","type":"parent-child","created_at":"2026-01-25T19:23:52.687652505-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-hmuc","depends_on_id":"tv-wisp-wisp-06xa","type":"blocks","created_at":"2026-01-25T19:23:53.209824582-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-holh","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:06.920430648-08:00","updated_at":"2026-01-25T21:00:06.920430708-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-holh","depends_on_id":"tv-wisp-wisp-6imy","type":"parent-child","created_at":"2026-01-25T21:00:07.386271772-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-holh","depends_on_id":"tv-wisp-wisp-h6z3","type":"blocks","created_at":"2026-01-25T21:00:08.266776857-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hpak","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-z7q5)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-z7q5\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:30:52.062624319-08:00","updated_at":"2026-01-25T17:33:13.86835531-08:00","closed_at":"2026-01-25T17:33:13.86835531-08:00","close_reason":"Not needed - feature already implemented","dependencies":[{"issue_id":"tv-wisp-wisp-hpak","depends_on_id":"tv-wisp-wisp-xx0i","type":"parent-child","created_at":"2026-01-25T17:30:52.149185877-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-hpak","depends_on_id":"tv-wisp-wisp-6pxe","type":"blocks","created_at":"2026-01-25T17:30:52.377778181-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hpr1","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-rmos\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-rmos --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:43.852133817-08:00","updated_at":"2026-01-25T16:34:43.852133877-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-hpr1","depends_on_id":"tv-wisp-wisp-zble","type":"parent-child","created_at":"2026-01-25T16:34:43.965966695-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-hpr1","depends_on_id":"tv-wisp-wisp-9500","type":"blocks","created_at":"2026-01-25T16:34:44.088236272-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hroa","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T15:07:58.871252187-08:00","updated_at":"2026-01-25T15:07:58.871252227-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-hs54","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-bbok\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:32:03.799212178-08:00","updated_at":"2026-01-25T17:32:03.799212228-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-hs54","depends_on_id":"tv-wisp-wisp-19n1","type":"parent-child","created_at":"2026-01-25T17:32:03.836937286-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-hs54","depends_on_id":"tv-wisp-wisp-gb4i","type":"blocks","created_at":"2026-01-25T17:32:04.112362285-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hsky","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:37:56.125377146-08:00","updated_at":"2026-01-25T21:37:56.125377186-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-hsky","depends_on_id":"tv-wisp-wisp-rfc8","type":"parent-child","created_at":"2026-01-25T21:37:56.130397388-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-htt8v","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:25:19.472987727-08:00","updated_at":"2026-01-25T22:25:19.472987787-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-htt8v","depends_on_id":"tv-wisp-wisp-fl6o4","type":"parent-child","created_at":"2026-01-25T22:25:20.294616297-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-htt8v","depends_on_id":"tv-wisp-wisp-mggzz","type":"blocks","created_at":"2026-01-25T22:25:21.489938764-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hu8z","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-w43u should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:00.021259405-08:00","updated_at":"2026-01-25T17:41:00.021259465-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-hu8z","depends_on_id":"tv-wisp-wisp-0t3r","type":"parent-child","created_at":"2026-01-25T17:41:00.19736643-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-hu8z","depends_on_id":"tv-wisp-wisp-7ka3","type":"blocks","created_at":"2026-01-25T17:41:00.527420263-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-huy2y","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:55:16.254426398-08:00","updated_at":"2026-01-25T21:55:16.254426428-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-huy2y","depends_on_id":"tv-wisp-wisp-y04mr","type":"parent-child","created_at":"2026-01-25T21:55:16.849449379-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-huy2y","depends_on_id":"tv-wisp-wisp-ag5iy","type":"blocks","created_at":"2026-01-25T21:55:17.795573798-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hv2k","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-32y6\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-32y6 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:30:06.228281822-08:00","updated_at":"2026-01-25T15:30:06.228281862-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-hv2k","depends_on_id":"tv-wisp-wisp-x8yu","type":"parent-child","created_at":"2026-01-25T15:30:06.315284288-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-hv2k","depends_on_id":"tv-wisp-wisp-jozq","type":"blocks","created_at":"2026-01-25T15:30:06.410868579-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hv5t","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-2mu6           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-2mu6\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:27:41.55760869-08:00","updated_at":"2026-01-25T19:27:41.55760876-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-hv5t","depends_on_id":"tv-wisp-wisp-dreg","type":"parent-child","created_at":"2026-01-25T19:27:41.563465655-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hwmuv","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:52:19.640623803-08:00","updated_at":"2026-01-25T21:52:19.640623843-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-hwmuv","depends_on_id":"tv-wisp-wisp-f1fv","type":"parent-child","created_at":"2026-01-25T21:52:20.078688144-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-hwmuv","depends_on_id":"tv-wisp-wisp-5zl01","type":"blocks","created_at":"2026-01-25T21:52:21.049293843-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hwr9","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-z7q5\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:30:52.064469836-08:00","updated_at":"2026-01-25T17:33:14.759836124-08:00","closed_at":"2026-01-25T17:33:14.759836124-08:00","close_reason":"Not needed - feature already implemented","dependencies":[{"issue_id":"tv-wisp-wisp-hwr9","depends_on_id":"tv-wisp-wisp-xx0i","type":"parent-child","created_at":"2026-01-25T17:30:52.291817145-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-hwr9","depends_on_id":"tv-wisp-wisp-oorg","type":"blocks","created_at":"2026-01-25T17:30:52.542428671-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-hyib","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-jfi6\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:41.925160855-08:00","updated_at":"2026-01-25T16:54:41.925160915-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-hyib","depends_on_id":"tv-wisp-wisp-2w49","type":"parent-child","created_at":"2026-01-25T16:54:42.072557871-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-hyib","depends_on_id":"tv-wisp-wisp-3z15","type":"blocks","created_at":"2026-01-25T16:54:42.225999027-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-i1ty3","title":"Mechanical rebase","description":"Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/\u003cpolecat-branch\u003e\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2\u003e/dev/null \u0026\u0026 echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/\u003cpolecat-branch\u003e)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: \u003coriginal-issue-title\u003e\" --description=\"## Conflict Resolution Required\n\nOriginal MR: \u003cmr-bead-id\u003e\nBranch: \u003cpolecat-branch\u003e\nOriginal Issue: \u003cissue-id\u003e\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin \u003cbranch\u003e\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:46:06.931596819-08:00","updated_at":"2026-01-25T22:46:06.931596859-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-i1ty3","depends_on_id":"tv-wisp-wisp-rqw9g","type":"parent-child","created_at":"2026-01-25T22:46:07.204408389-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-i1ty3","depends_on_id":"tv-wisp-wisp-i3kuk","type":"blocks","created_at":"2026-01-25T22:46:08.60501394-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-i2pv","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-746p\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:38.429580703-08:00","updated_at":"2026-01-25T17:44:38.429580743-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-i2pv","depends_on_id":"tv-wisp-wisp-7urn","type":"parent-child","created_at":"2026-01-25T17:44:38.784644796-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-i2pv","depends_on_id":"tv-wisp-wisp-xhlf","type":"blocks","created_at":"2026-01-25T17:44:39.137415676-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-i3jnz","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:52:19.643951515-08:00","updated_at":"2026-01-25T21:52:19.643951555-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-i3jnz","depends_on_id":"tv-wisp-wisp-f1fv","type":"parent-child","created_at":"2026-01-25T21:52:20.618784252-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-i3jnz","depends_on_id":"tv-wisp-wisp-6nzu4","type":"blocks","created_at":"2026-01-25T21:52:21.594431101-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-i3kuk","title":"Scan merge queue","description":"Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list \u003crig\u003e\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep \u003cbranch\u003e\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close \u003cmr-id\u003e --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:46:06.931066702-08:00","updated_at":"2026-01-25T22:46:06.931066742-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-i3kuk","depends_on_id":"tv-wisp-wisp-rqw9g","type":"parent-child","created_at":"2026-01-25T22:46:07.073547309-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-i3kuk","depends_on_id":"tv-wisp-wisp-rqt83","type":"blocks","created_at":"2026-01-25T22:46:08.472789756-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-i45n5","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T21:54:57.667091153-08:00","updated_at":"2026-01-25T21:54:57.667091193-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-i4zuo","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:15:21.19683461-08:00","updated_at":"2026-01-25T22:15:21.19683465-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-i4zuo","depends_on_id":"tv-wisp-wisp-y02ot","type":"parent-child","created_at":"2026-01-25T22:15:21.85913028-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-i4zuo","depends_on_id":"tv-wisp-wisp-g6r3n","type":"blocks","created_at":"2026-01-25T22:15:23.070019508-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-i57c","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-7xtw)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-7xtw\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:07.788863747-08:00","updated_at":"2026-01-25T20:20:07.788863777-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-i57c","depends_on_id":"tv-wisp-wisp-hl8l","type":"parent-child","created_at":"2026-01-25T20:20:08.050128183-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-i57c","depends_on_id":"tv-wisp-wisp-fz9o","type":"blocks","created_at":"2026-01-25T20:20:08.705821491-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-i6tu","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-5d7t\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:56:36.376880189-08:00","updated_at":"2026-01-25T19:56:36.376880229-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-i6tu","depends_on_id":"tv-wisp-wisp-vlrj","type":"parent-child","created_at":"2026-01-25T19:56:36.971208105-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-i6tu","depends_on_id":"tv-wisp-wisp-10kn","type":"blocks","created_at":"2026-01-25T19:56:37.596196658-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-i794","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:48:28.901614937-08:00","updated_at":"2026-01-25T17:48:28.901614967-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-i794","depends_on_id":"tv-wisp-wisp-kic6","type":"parent-child","created_at":"2026-01-25T17:48:29.220561676-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-i794","depends_on_id":"tv-wisp-wisp-sez1","type":"blocks","created_at":"2026-01-25T17:48:29.608673062-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-i7i6","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T16:54:38.832992136-08:00","updated_at":"2026-01-25T16:54:38.832992196-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-i806p","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:06:20.675755217-08:00","updated_at":"2026-01-25T22:06:20.675755248-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-i806p","depends_on_id":"tv-wisp-wisp-6rbz8","type":"parent-child","created_at":"2026-01-25T22:06:21.024142418-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-i806p","depends_on_id":"tv-wisp-wisp-v8c0l","type":"blocks","created_at":"2026-01-25T22:06:22.071406715-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-i8ri","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-8b8 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:21.909136237-08:00","updated_at":"2026-01-25T15:04:21.909136297-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-i8ri","depends_on_id":"tv-wisp-wisp-wxnw","type":"parent-child","created_at":"2026-01-25T15:04:21.936375739-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-igqi","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-y1kfh should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:40.890064299-08:00","updated_at":"2026-01-25T20:16:33.842276909-08:00","closed_at":"2026-01-25T20:16:33.842276909-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-igqi","depends_on_id":"tv-wisp-wisp-oa0y","type":"parent-child","created_at":"2026-01-25T20:07:41.305079283-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-igqi","depends_on_id":"tv-wisp-wisp-f2zo","type":"blocks","created_at":"2026-01-25T20:07:42.004691429-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ikq8f","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show hq-cv-x5kp2\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update hq-cv-x5kp2 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:57.672580256-08:00","updated_at":"2026-01-25T21:54:57.672580286-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ikq8f","depends_on_id":"tv-wisp-wisp-i45n5","type":"parent-child","created_at":"2026-01-25T21:54:58.497154244-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ikq8f","depends_on_id":"tv-wisp-wisp-9k8sn","type":"blocks","created_at":"2026-01-25T21:54:59.397460832-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-iles","title":"Mechanical rebase","description":"Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/\u003cpolecat-branch\u003e\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2\u003e/dev/null \u0026\u0026 echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/\u003cpolecat-branch\u003e)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: \u003coriginal-issue-title\u003e\" --description=\"## Conflict Resolution Required\n\nOriginal MR: \u003cmr-bead-id\u003e\nBranch: \u003cpolecat-branch\u003e\nOriginal Issue: \u003cissue-id\u003e\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin \u003cbranch\u003e\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:38:02.23506797-08:00","updated_at":"2026-01-25T21:38:02.235068001-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-iles","depends_on_id":"tv-wisp-wisp-chaw","type":"parent-child","created_at":"2026-01-25T21:38:02.469190087-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-iles","depends_on_id":"tv-wisp-wisp-wwma","type":"blocks","created_at":"2026-01-25T21:38:03.520945537-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-inif","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T16:07:19.118458079-08:00","updated_at":"2026-01-25T16:07:19.118458139-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-innf","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-433\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:57.563566205-08:00","updated_at":"2026-01-25T15:04:57.563566255-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-innf","depends_on_id":"tv-wisp-wisp-hl2y","type":"parent-child","created_at":"2026-01-25T15:04:57.572055142-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-innf","depends_on_id":"tv-wisp-wisp-57df","type":"blocks","created_at":"2026-01-25T15:04:57.615768995-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-io16","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-2mu6).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-2mu6\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:27:41.55889419-08:00","updated_at":"2026-01-25T19:27:41.55889425-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-io16","depends_on_id":"tv-wisp-wisp-dreg","type":"parent-child","created_at":"2026-01-25T19:27:41.696676736-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-io16","depends_on_id":"tv-wisp-wisp-0zi3","type":"blocks","created_at":"2026-01-25T19:27:42.23316748-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ioh3","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:42:26.527910126-08:00","updated_at":"2026-01-25T16:43:37.887904491-08:00","closed_at":"2026-01-25T16:43:37.887904491-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ioh3","depends_on_id":"tv-wisp-wisp-pij2","type":"parent-child","created_at":"2026-01-25T16:42:26.629669104-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ioh3","depends_on_id":"tv-wisp-wisp-7wl0","type":"blocks","created_at":"2026-01-25T16:42:26.776143189-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ioph","title":"Run test suite","description":"Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:10.487101131-08:00","updated_at":"2026-01-25T21:00:10.487101191-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ioph","depends_on_id":"tv-wisp-wisp-u7fv","type":"parent-child","created_at":"2026-01-25T21:00:10.872203181-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-ioph","depends_on_id":"tv-wisp-wisp-ez7z","type":"blocks","created_at":"2026-01-25T21:00:11.804083989-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-it46v","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:12:14.191615136-08:00","updated_at":"2026-01-25T22:12:14.191615176-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-it46v","depends_on_id":"tv-wisp-wisp-dbfyj","type":"parent-child","created_at":"2026-01-25T22:12:15.039871629-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-it46v","depends_on_id":"tv-wisp-wisp-qhaz4","type":"blocks","created_at":"2026-01-25T22:12:16.139765531-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-it4s","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:39.647924765-08:00","updated_at":"2026-01-25T15:04:39.647924826-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-it4s","depends_on_id":"tv-wisp-wisp-p4e1","type":"parent-child","created_at":"2026-01-25T15:04:39.679014845-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-it4s","depends_on_id":"tv-wisp-wisp-rlj4","type":"blocks","created_at":"2026-01-25T15:04:39.725651857-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-it5","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-nz3n\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T14:43:48.146649442-08:00","updated_at":"2026-01-25T14:43:59.704781408-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-it5","depends_on_id":"tv-wisp-wisp-uuf","type":"parent-child","created_at":"2026-01-25T14:43:48.173430994-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-it5","depends_on_id":"tv-wisp-wisp-485","type":"blocks","created_at":"2026-01-25T14:43:48.201714216-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ivo9","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-oyub)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-oyub\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:45:07.966126446-08:00","updated_at":"2026-01-25T17:54:51.793749264-08:00","closed_at":"2026-01-25T17:54:51.793749264-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ivo9","depends_on_id":"tv-wisp-wisp-n3rx","type":"parent-child","created_at":"2026-01-25T17:45:08.10671717-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ivo9","depends_on_id":"tv-wisp-wisp-u4ss","type":"blocks","created_at":"2026-01-25T17:45:08.473288412-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-iwm","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-agd).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-agd\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:35:55.221835132-08:00","updated_at":"2026-01-25T14:35:55.221835162-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-iwm","depends_on_id":"tv-wisp-wisp-9yt","type":"parent-child","created_at":"2026-01-25T14:35:55.225774028-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-iwm","depends_on_id":"tv-wisp-wisp-tos","type":"blocks","created_at":"2026-01-25T14:35:55.235453526-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-iww0","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:38.470433969-08:00","updated_at":"2026-01-25T21:11:38.470434029-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-iww0","depends_on_id":"tv-wisp-wisp-obm9","type":"parent-child","created_at":"2026-01-25T21:11:38.770935075-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-iww0","depends_on_id":"tv-wisp-wisp-mef2","type":"blocks","created_at":"2026-01-25T21:11:39.65641202-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-iwwuj","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:15:21.19445979-08:00","updated_at":"2026-01-25T22:15:21.19445982-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-iwwuj","depends_on_id":"tv-wisp-wisp-y02ot","type":"parent-child","created_at":"2026-01-25T22:15:21.20119438-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-iyq1","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-o168\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:47.707496334-08:00","updated_at":"2026-01-25T17:37:47.707496394-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-iyq1","depends_on_id":"tv-wisp-wisp-9ksa","type":"parent-child","created_at":"2026-01-25T17:37:48.001683342-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-iyq1","depends_on_id":"tv-wisp-wisp-q30o","type":"blocks","created_at":"2026-01-25T17:37:48.304576862-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-j15r","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-h2uu\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:09.955747806-08:00","updated_at":"2026-01-25T16:09:32.245581935-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-j15r","depends_on_id":"tv-wisp-wisp-jocg","type":"parent-child","created_at":"2026-01-25T16:07:10.080713612-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-j15r","depends_on_id":"tv-wisp-wisp-lhkr","type":"blocks","created_at":"2026-01-25T16:07:10.187413966-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-j32m","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-433\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:57:16.179759029-08:00","updated_at":"2026-01-25T14:57:16.179759069-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-j32m","depends_on_id":"tv-wisp-wisp-l8h","type":"parent-child","created_at":"2026-01-25T14:57:16.216086477-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-j32m","depends_on_id":"tv-wisp-wisp-2csf","type":"blocks","created_at":"2026-01-25T14:57:16.251472157-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-j5si","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-v0lg\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:21.059245006-08:00","updated_at":"2026-01-25T19:13:03.154098845-08:00","closed_at":"2026-01-25T19:13:03.154098845-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-j5si","depends_on_id":"tv-wisp-wisp-22vo","type":"parent-child","created_at":"2026-01-25T19:10:21.50580932-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-j5si","depends_on_id":"tv-wisp-wisp-qkid","type":"blocks","created_at":"2026-01-25T19:10:21.94045531-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-j609","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-rmos should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:43.851005159-08:00","updated_at":"2026-01-25T16:42:10.406109849-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-j609","depends_on_id":"tv-wisp-wisp-zble","type":"parent-child","created_at":"2026-01-25T16:34:43.915844707-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-j609","depends_on_id":"tv-wisp-wisp-cyu3","type":"blocks","created_at":"2026-01-25T16:34:44.040654358-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-j6z2","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:41.760844298-08:00","updated_at":"2026-01-25T21:57:49.558327501-08:00","closed_at":"2026-01-25T21:57:49.558327501-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-j6z2","depends_on_id":"tv-wisp-wisp-lanr","type":"parent-child","created_at":"2026-01-25T21:00:42.2651935-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-j6z2","depends_on_id":"tv-wisp-wisp-2c1k","type":"blocks","created_at":"2026-01-25T21:00:43.159632387-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-j7rq","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-l0oc\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:52.923572223-08:00","updated_at":"2026-01-25T17:26:48.268983532-08:00","closed_at":"2026-01-25T17:26:48.268983532-08:00","close_reason":"N/A - duplicate of tv-r0vv, already merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-j7rq","depends_on_id":"tv-wisp-wisp-6pbk","type":"parent-child","created_at":"2026-01-25T17:23:53.106176501-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-j7rq","depends_on_id":"tv-wisp-wisp-ozki","type":"blocks","created_at":"2026-01-25T17:23:53.276731207-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-j7tm9","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:06:20.677978965-08:00","updated_at":"2026-01-25T22:06:20.677978995-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-j7tm9","depends_on_id":"tv-wisp-wisp-6rbz8","type":"parent-child","created_at":"2026-01-25T22:06:21.599008012-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-j7tm9","depends_on_id":"tv-wisp-wisp-5vtao","type":"blocks","created_at":"2026-01-25T22:06:22.659795826-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-j8aa1","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show hq-cv-x5kp2           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: hq-cv-x5kp2\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:57.668014882-08:00","updated_at":"2026-01-25T21:54:57.668014912-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-j8aa1","depends_on_id":"tv-wisp-wisp-i45n5","type":"parent-child","created_at":"2026-01-25T21:54:57.673878875-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jabv","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-eov5).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-eov5\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:10.039901689-08:00","updated_at":"2026-01-25T17:41:10.039901749-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jabv","depends_on_id":"tv-wisp-wisp-wv5q","type":"parent-child","created_at":"2026-01-25T17:41:10.134595113-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jabv","depends_on_id":"tv-wisp-wisp-wto1","type":"blocks","created_at":"2026-01-25T17:41:10.468692526-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jb3v","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-xlji).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-xlji\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:47.415923871-08:00","updated_at":"2026-01-25T16:36:44.371615303-08:00","closed_at":"2026-01-25T16:36:44.371615303-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-jb3v","depends_on_id":"tv-wisp-wisp-71un","type":"parent-child","created_at":"2026-01-25T16:34:47.453231123-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jb3v","depends_on_id":"tv-wisp-wisp-994p","type":"blocks","created_at":"2026-01-25T16:34:47.576911164-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jcfq","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:15:52.547383393-08:00","updated_at":"2026-01-25T19:15:52.547383454-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jcfq","depends_on_id":"tv-wisp-wisp-zkv0","type":"parent-child","created_at":"2026-01-25T19:15:52.852987679-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jcfq","depends_on_id":"tv-wisp-wisp-7v5d","type":"blocks","created_at":"2026-01-25T19:15:53.382333794-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jdo","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-25T14:38:11.985652676-08:00","updated_at":"2026-01-25T22:17:27.466710425-08:00","closed_at":"2026-01-25T22:17:27.466710425-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-wisp-jfsj","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:37:56.126506409-08:00","updated_at":"2026-01-25T21:37:56.126506439-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jfsj","depends_on_id":"tv-wisp-wisp-rfc8","type":"parent-child","created_at":"2026-01-25T21:37:56.35594903-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-jfsj","depends_on_id":"tv-wisp-wisp-b6el","type":"blocks","created_at":"2026-01-25T21:37:57.279553233-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jgb3","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-gc5x\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-gc5x --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:47.995717806-08:00","updated_at":"2026-01-25T15:29:47.995717897-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jgb3","depends_on_id":"tv-wisp-wisp-9umu","type":"parent-child","created_at":"2026-01-25T15:29:48.077608577-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jgb3","depends_on_id":"tv-wisp-wisp-qm9q","type":"blocks","created_at":"2026-01-25T15:29:48.173358236-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jgx1","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-m1fr should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:41.664689891-08:00","updated_at":"2026-01-25T17:48:18.845610031-08:00","closed_at":"2026-01-25T17:48:18.845610031-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-jgx1","depends_on_id":"tv-wisp-wisp-kb77","type":"parent-child","created_at":"2026-01-25T17:34:41.809267317-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jgx1","depends_on_id":"tv-wisp-wisp-8b9v","type":"blocks","created_at":"2026-01-25T17:34:42.081582954-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jh8q","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:07:58.873673456-08:00","updated_at":"2026-01-25T15:07:58.873673496-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jh8q","depends_on_id":"tv-wisp-wisp-hroa","type":"parent-child","created_at":"2026-01-25T15:07:58.914088039-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jh8q","depends_on_id":"tv-wisp-wisp-f42h","type":"blocks","created_at":"2026-01-25T15:07:58.979957151-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jjf8","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-v9cm\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:16:29.37505823-08:00","updated_at":"2026-01-25T15:16:29.37505827-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jjf8","depends_on_id":"tv-wisp-wisp-xsuu","type":"parent-child","created_at":"2026-01-25T15:16:29.386137846-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jjf8","depends_on_id":"tv-wisp-wisp-1bji","type":"blocks","created_at":"2026-01-25T15:16:29.454880005-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jjl3","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-xlji)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-xlji\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:47.416343505-08:00","updated_at":"2026-01-25T16:39:07.331995951-08:00","closed_at":"2026-01-25T16:39:07.331995951-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-jjl3","depends_on_id":"tv-wisp-wisp-71un","type":"parent-child","created_at":"2026-01-25T16:34:47.468265525-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jjl3","depends_on_id":"tv-wisp-wisp-jb3v","type":"blocks","created_at":"2026-01-25T16:34:47.591947749-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jjma4","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show hq-cv-gzu6g           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: hq-cv-gzu6g\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:55:16.251968654-08:00","updated_at":"2026-01-25T21:55:16.251968694-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jjma4","depends_on_id":"tv-wisp-wisp-y04mr","type":"parent-child","created_at":"2026-01-25T21:55:16.256918648-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jk4k","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-jd9\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:25:31.734673467-08:00","updated_at":"2026-01-25T17:28:13.53432782-08:00","closed_at":"2026-01-25T17:28:13.53432782-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-jk4k","depends_on_id":"tv-wisp-wisp-mdl6","type":"parent-child","created_at":"2026-01-25T17:25:31.762809578-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jk4k","depends_on_id":"tv-wisp-wisp-da48","type":"blocks","created_at":"2026-01-25T17:25:31.961878069-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jl17","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-5o2p should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:55.299014108-08:00","updated_at":"2026-01-25T17:34:55.299014168-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jl17","depends_on_id":"tv-wisp-wisp-2t2z","type":"parent-child","created_at":"2026-01-25T17:34:55.461824737-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jl17","depends_on_id":"tv-wisp-wisp-2ths","type":"blocks","created_at":"2026-01-25T17:34:55.739211163-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jmiw","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:41.924395845-08:00","updated_at":"2026-01-25T16:54:41.924395905-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jmiw","depends_on_id":"tv-wisp-wisp-2w49","type":"parent-child","created_at":"2026-01-25T16:54:42.037649172-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jmiw","depends_on_id":"tv-wisp-wisp-r392","type":"blocks","created_at":"2026-01-25T16:54:42.190024346-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jocg","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T16:07:09.952790915-08:00","updated_at":"2026-01-25T16:07:09.952790955-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-jooa","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-dtqk\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-dtqk --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:40:01.325416942-08:00","updated_at":"2026-01-25T17:40:01.325417002-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jooa","depends_on_id":"tv-wisp-wisp-f2ka","type":"parent-child","created_at":"2026-01-25T17:40:01.742874292-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jooa","depends_on_id":"tv-wisp-wisp-5g39","type":"blocks","created_at":"2026-01-25T17:40:02.24435561-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jozq","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:30:06.228034391-08:00","updated_at":"2026-01-25T15:30:06.228034431-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jozq","depends_on_id":"tv-wisp-wisp-x8yu","type":"parent-child","created_at":"2026-01-25T15:30:06.303312067-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jozq","depends_on_id":"tv-wisp-wisp-tc1y","type":"blocks","created_at":"2026-01-25T15:30:06.398322909-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jpki","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-z9d7\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:07:58.872240992-08:00","updated_at":"2026-01-25T15:07:58.872241032-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jpki","depends_on_id":"tv-wisp-wisp-hroa","type":"parent-child","created_at":"2026-01-25T15:07:58.88100481-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jpki","depends_on_id":"tv-wisp-wisp-3gnb","type":"blocks","created_at":"2026-01-25T15:07:58.941344272-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jpvd","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-v0lg).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-v0lg\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:21.057117805-08:00","updated_at":"2026-01-25T19:12:56.900044296-08:00","closed_at":"2026-01-25T19:12:56.900044296-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-jpvd","depends_on_id":"tv-wisp-wisp-22vo","type":"parent-child","created_at":"2026-01-25T19:10:21.159663666-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jpvd","depends_on_id":"tv-wisp-wisp-wtky","type":"blocks","created_at":"2026-01-25T19:10:21.6124462-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-js3","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-v0lg\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:30.022423971-08:00","updated_at":"2026-01-25T14:46:26.121584026-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-js3","depends_on_id":"tv-wisp-wisp-nmn","type":"parent-child","created_at":"2026-01-25T14:38:30.041987202-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-js3","depends_on_id":"tv-wisp-wisp-kp2","type":"blocks","created_at":"2026-01-25T14:38:30.062988298-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jtc7","title":"Handle test failures","description":"**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - Option A: Fix it yourself (you're the Engineer!)\n   - Option B: File a bead: bd create --type=bug --priority=1 --title=\"...\"\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Fix committed, OR\n- Bead filed for the failure\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:38:02.235986842-08:00","updated_at":"2026-01-25T21:38:02.235986892-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jtc7","depends_on_id":"tv-wisp-wisp-chaw","type":"parent-child","created_at":"2026-01-25T21:38:02.673754069-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-jtc7","depends_on_id":"tv-wisp-wisp-ws6p","type":"blocks","created_at":"2026-01-25T21:38:03.725076263-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jva9","title":"mol-refinery-patrol","description":"Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to main one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────\u003e│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch \u0026 rebase            │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge \u0026 push              │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │\u003c─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T21:11:41.220222253-08:00","updated_at":"2026-01-25T21:11:41.220222374-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-jwsg2","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:04:38.9906498-08:00","updated_at":"2026-01-25T22:04:38.99064984-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jwsg2","depends_on_id":"tv-wisp-wisp-0u79m","type":"parent-child","created_at":"2026-01-25T22:04:39.114213165-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-jwsg2","depends_on_id":"tv-wisp-wisp-3ly8y","type":"blocks","created_at":"2026-01-25T22:04:40.167435949-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jyha","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:27:22.427554029-08:00","updated_at":"2026-01-25T17:27:22.427554089-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-jys9","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-wdia\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-wdia --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:28.492198399-08:00","updated_at":"2026-01-25T17:37:28.492198449-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jys9","depends_on_id":"tv-wisp-wisp-08mh","type":"parent-child","created_at":"2026-01-25T17:37:28.762731992-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jys9","depends_on_id":"tv-wisp-wisp-cgt2","type":"blocks","created_at":"2026-01-25T17:37:29.053140937-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jzo0","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-m1fr\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:41.663561844-08:00","updated_at":"2026-01-25T17:37:57.912787455-08:00","closed_at":"2026-01-25T17:37:57.912787455-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-jzo0","depends_on_id":"tv-wisp-wisp-kb77","type":"parent-child","created_at":"2026-01-25T17:34:41.702316932-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jzo0","depends_on_id":"tv-wisp-wisp-te09","type":"blocks","created_at":"2026-01-25T17:34:41.984835687-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jzp","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-agd)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-agd\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:31:40.705712505-08:00","updated_at":"2026-01-25T14:31:40.705712545-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-jzp","depends_on_id":"tv-wisp-wisp-8rd","type":"parent-child","created_at":"2026-01-25T14:31:40.71031135-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jzp","depends_on_id":"tv-wisp-wisp-g5p","type":"blocks","created_at":"2026-01-25T14:31:40.719982854-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-jzyw","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:30:52.063507959-08:00","updated_at":"2026-01-25T17:33:14.392881435-08:00","closed_at":"2026-01-25T17:33:14.392881435-08:00","close_reason":"Not needed - feature already implemented","dependencies":[{"issue_id":"tv-wisp-wisp-jzyw","depends_on_id":"tv-wisp-wisp-xx0i","type":"parent-child","created_at":"2026-01-25T17:30:52.234241983-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-jzyw","depends_on_id":"tv-wisp-wisp-49yl","type":"blocks","created_at":"2026-01-25T17:30:52.474050349-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-k1l4","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-upwa)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-upwa\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:38.835437608-08:00","updated_at":"2026-01-25T16:54:38.835437658-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-k1l4","depends_on_id":"tv-wisp-wisp-i7i6","type":"parent-child","created_at":"2026-01-25T16:54:38.892020671-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-k1l4","depends_on_id":"tv-wisp-wisp-d2gg","type":"blocks","created_at":"2026-01-25T16:54:39.024071025-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-k325","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-fwrl\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:39.844084644-08:00","updated_at":"2026-01-25T17:39:38.090271548-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-k325","depends_on_id":"tv-wisp-wisp-r2dz","type":"parent-child","created_at":"2026-01-25T17:31:40.091498035-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-k325","depends_on_id":"tv-wisp-wisp-r4fu","type":"blocks","created_at":"2026-01-25T17:31:40.368993999-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-kb77","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:34:41.661932762-08:00","updated_at":"2026-01-25T17:34:41.661932802-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-kd72","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-1rmd should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:12.276501985-08:00","updated_at":"2026-01-25T19:10:12.276502025-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-kd72","depends_on_id":"tv-wisp-wisp-ud7x","type":"parent-child","created_at":"2026-01-25T19:10:12.472959411-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-kd72","depends_on_id":"tv-wisp-wisp-5pml","type":"blocks","created_at":"2026-01-25T19:10:12.887794601-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-kdbr","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:41:54.756626044-08:00","updated_at":"2026-01-25T17:41:54.756626084-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-kfl83","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:22:18.715176591-08:00","updated_at":"2026-01-25T22:22:18.715176641-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-kfl83","depends_on_id":"tv-wisp-wisp-7vv82","type":"parent-child","created_at":"2026-01-25T22:22:19.596437083-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-kfl83","depends_on_id":"tv-wisp-wisp-mrn4g","type":"blocks","created_at":"2026-01-25T22:22:20.747792633-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-kfmy","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-p5yr\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:57.548845013-08:00","updated_at":"2026-01-25T19:47:57.548845053-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-kfmy","depends_on_id":"tv-wisp-wisp-hhw1","type":"parent-child","created_at":"2026-01-25T19:47:58.161702267-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-kfmy","depends_on_id":"tv-wisp-wisp-vzoz","type":"blocks","created_at":"2026-01-25T19:47:58.746581863-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-kfyr","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-b3n)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-b3n\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:39.646268403-08:00","updated_at":"2026-01-25T15:04:39.646268433-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-kfyr","depends_on_id":"tv-wisp-wisp-p4e1","type":"parent-child","created_at":"2026-01-25T15:04:39.664304804-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-kfyr","depends_on_id":"tv-wisp-wisp-3ipw","type":"blocks","created_at":"2026-01-25T15:04:39.704511111-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-khe","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-2bk\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:47.968547774-08:00","updated_at":"2026-01-25T14:40:24.198128134-08:00","closed_at":"2026-01-25T14:40:24.198128134-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-khe","depends_on_id":"tv-wisp-wisp-7ym","type":"parent-child","created_at":"2026-01-25T14:38:47.9731279-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-khe","depends_on_id":"tv-wisp-wisp-dvn","type":"blocks","created_at":"2026-01-25T14:38:47.995511269-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-kic6","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:48:28.897819579-08:00","updated_at":"2026-01-25T17:48:28.89781975-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-kipj","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-c85p\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:15:24.7136094-08:00","updated_at":"2026-01-25T20:15:24.71360944-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-kipj","depends_on_id":"tv-wisp-wisp-40l7","type":"parent-child","created_at":"2026-01-25T20:15:25.365461-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-kipj","depends_on_id":"tv-wisp-wisp-yzjj","type":"blocks","created_at":"2026-01-25T20:15:26.036667655-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-kls4","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:10:52.555057715-08:00","updated_at":"2026-01-25T19:12:51.59246091-08:00","closed_at":"2026-01-25T19:12:51.59246091-08:00","close_reason":"Work already completed and merged to main","ephemeral":true}
{"id":"tv-wisp-wisp-kp2","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-v0lg\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-v0lg --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:30.02210046-08:00","updated_at":"2026-01-25T14:46:16.277595475-08:00","closed_at":"2026-01-25T14:46:16.277595475-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-kp2","depends_on_id":"tv-wisp-wisp-nmn","type":"parent-child","created_at":"2026-01-25T14:38:30.03975142-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-kp2","depends_on_id":"tv-wisp-wisp-yh1","type":"blocks","created_at":"2026-01-25T14:38:30.060080898-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-krau","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:07.790286921-08:00","updated_at":"2026-01-25T20:20:07.790286961-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-krau","depends_on_id":"tv-wisp-wisp-hl8l","type":"parent-child","created_at":"2026-01-25T20:20:08.294730489-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-krau","depends_on_id":"tv-wisp-wisp-c3ln","type":"blocks","created_at":"2026-01-25T20:20:08.983267446-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-krxe","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-v0lg should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:44.688520868-08:00","updated_at":"2026-01-25T19:24:41.667807788-08:00","closed_at":"2026-01-25T19:24:41.667807788-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-krxe","depends_on_id":"tv-wisp-wisp-07f2","type":"parent-child","created_at":"2026-01-25T19:16:44.934500949-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-krxe","depends_on_id":"tv-wisp-wisp-ft2i","type":"blocks","created_at":"2026-01-25T19:16:45.472627729-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-kt1a6","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to hq-cv-bsv3u should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:17.685732742-08:00","updated_at":"2026-01-25T21:54:17.685732772-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-kt1a6","depends_on_id":"tv-wisp-wisp-zyr6q","type":"parent-child","created_at":"2026-01-25T21:54:18.133419268-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-kt1a6","depends_on_id":"tv-wisp-wisp-0jab8","type":"blocks","created_at":"2026-01-25T21:54:19.00311141-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-kt4g","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:38.473753819-08:00","updated_at":"2026-01-25T21:11:38.473753879-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-kt4g","depends_on_id":"tv-wisp-wisp-obm9","type":"parent-child","created_at":"2026-01-25T21:11:39.26559619-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-kt4g","depends_on_id":"tv-wisp-wisp-z56b","type":"blocks","created_at":"2026-01-25T21:11:40.141608329-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-kuma","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:26.385914893-08:00","updated_at":"2026-01-25T20:17:57.146230537-08:00","closed_at":"2026-01-25T20:17:57.146230537-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-kuma","depends_on_id":"tv-wisp-wisp-1k5c","type":"parent-child","created_at":"2026-01-25T20:07:27.212546503-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-kuma","depends_on_id":"tv-wisp-wisp-r7vf","type":"blocks","created_at":"2026-01-25T20:07:28.741655749-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-kv3r","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-l0oc\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-l0oc --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:28:18.596072604-08:00","updated_at":"2026-01-25T17:28:18.596072644-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-kv3r","depends_on_id":"tv-wisp-wisp-p9hy","type":"parent-child","created_at":"2026-01-25T17:28:18.787100032-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-kv3r","depends_on_id":"tv-wisp-wisp-0qec","type":"blocks","created_at":"2026-01-25T17:28:19.020075919-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-kve4","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-32y6)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-32y6\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:30:06.227281166-08:00","updated_at":"2026-01-25T15:30:06.227281196-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-kve4","depends_on_id":"tv-wisp-wisp-x8yu","type":"parent-child","created_at":"2026-01-25T15:30:06.268609541-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-kve4","depends_on_id":"tv-wisp-wisp-cbgo","type":"blocks","created_at":"2026-01-25T15:30:06.361953203-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ky0b","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-1rmd).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-1rmd\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:12.275653691-08:00","updated_at":"2026-01-25T19:10:12.275653731-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ky0b","depends_on_id":"tv-wisp-wisp-ud7x","type":"parent-child","created_at":"2026-01-25T19:10:12.37739883-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ky0b","depends_on_id":"tv-wisp-wisp-0pa2","type":"blocks","created_at":"2026-01-25T19:10:12.788783678-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-kyig","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:45:07.967824627-08:00","updated_at":"2026-01-25T17:56:03.844205307-08:00","closed_at":"2026-01-25T17:56:03.844205307-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-kyig","depends_on_id":"tv-wisp-wisp-n3rx","type":"parent-child","created_at":"2026-01-25T17:45:08.240144387-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-kyig","depends_on_id":"tv-wisp-wisp-94cw","type":"blocks","created_at":"2026-01-25T17:45:08.620795322-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-l462","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-jd9\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:25:31.73763106-08:00","updated_at":"2026-01-25T17:25:31.73763114-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-l462","depends_on_id":"tv-wisp-wisp-mdl6","type":"parent-child","created_at":"2026-01-25T17:25:31.939389664-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-l462","depends_on_id":"tv-wisp-wisp-tvyg","type":"blocks","created_at":"2026-01-25T17:25:32.126377194-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-l4j1","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-38ac)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-38ac\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:16.689662726-08:00","updated_at":"2026-01-25T19:18:49.890565777-08:00","closed_at":"2026-01-25T19:18:49.890565777-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-l4j1","depends_on_id":"tv-wisp-wisp-2pyz","type":"parent-child","created_at":"2026-01-25T19:16:16.871897247-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-l4j1","depends_on_id":"tv-wisp-wisp-w21e","type":"blocks","created_at":"2026-01-25T19:16:17.343080647-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-l55","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-1rmd\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:41:43.852447829-08:00","updated_at":"2026-01-25T17:48:56.595027076-08:00","closed_at":"2026-01-25T17:48:56.595027076-08:00","close_reason":"Fix already merged to main (commit 8a0c150). Tests pass. Work complete.","dependencies":[{"issue_id":"tv-wisp-wisp-l55","depends_on_id":"tv-wisp-wisp-mni","type":"parent-child","created_at":"2026-01-25T14:41:43.875105022-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-l55","depends_on_id":"tv-wisp-wisp-gzg","type":"blocks","created_at":"2026-01-25T14:41:43.900510735-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-l5sc","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-376f\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:25:24.604338035-08:00","updated_at":"2026-01-25T19:25:24.604338075-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-l5sc","depends_on_id":"tv-wisp-wisp-y86p","type":"parent-child","created_at":"2026-01-25T19:25:24.675068427-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-l5sc","depends_on_id":"tv-wisp-wisp-ur0o","type":"blocks","created_at":"2026-01-25T19:25:25.242598003-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-l7ub","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-gc5x should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:19.121421823-08:00","updated_at":"2026-01-25T16:11:15.675487498-08:00","closed_at":"2026-01-25T16:11:15.675487498-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-l7ub","depends_on_id":"tv-wisp-wisp-inif","type":"parent-child","created_at":"2026-01-25T16:07:19.183409967-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-l7ub","depends_on_id":"tv-wisp-wisp-t344","type":"blocks","created_at":"2026-01-25T16:07:19.297441647-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-l866","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-jfi6\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:41.922374535-08:00","updated_at":"2026-01-25T16:54:41.922374606-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-l866","depends_on_id":"tv-wisp-wisp-2w49","type":"parent-child","created_at":"2026-01-25T16:54:41.94479769-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-l866","depends_on_id":"tv-wisp-wisp-9cga","type":"blocks","created_at":"2026-01-25T16:54:42.09011155-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-l8h","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T14:57:16.177300465-08:00","updated_at":"2026-01-25T14:57:16.177300506-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-l96l","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:46:56.900336154-08:00","updated_at":"2026-01-25T17:46:56.900336194-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-l9nk","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-rmos\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-rmos --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:42:26.528484538-08:00","updated_at":"2026-01-25T16:43:54.836773898-08:00","closed_at":"2026-01-25T16:43:54.836773898-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-l9nk","depends_on_id":"tv-wisp-wisp-pij2","type":"parent-child","created_at":"2026-01-25T16:42:26.664964752-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-l9nk","depends_on_id":"tv-wisp-wisp-1ufq","type":"blocks","created_at":"2026-01-25T16:42:26.811283127-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-lak","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-agd           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-agd\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:31:40.705102949-08:00","updated_at":"2026-01-25T14:31:40.705102989-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-lak","depends_on_id":"tv-wisp-wisp-8rd","type":"parent-child","created_at":"2026-01-25T14:31:40.706808386-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-lanr","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"closed","priority":2,"issue_type":"epic","assignee":"tribal_village/witness","created_at":"2026-01-25T21:00:41.756248124-08:00","updated_at":"2026-01-25T21:58:50.740601041-08:00","closed_at":"2026-01-25T21:58:50.740601041-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-wisp-law0","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-ilh).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-ilh\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:28.581793924-08:00","updated_at":"2026-01-25T17:23:28.581793984-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-law0","depends_on_id":"tv-wisp-wisp-1gtx","type":"parent-child","created_at":"2026-01-25T17:23:28.639865087-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-law0","depends_on_id":"tv-wisp-wisp-t7yc","type":"blocks","created_at":"2026-01-25T17:23:28.81953727-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ldd6","title":"Merge and push to main","description":"Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send \u003crig\u003e/witness -s \"MERGED \u003cpolecat-name\u003e\" -m \"Branch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"\u003cissue-id\u003e\"\n# OR verify the commit SHA is on main:\ngit branch --contains \u003ccommit-sha\u003e | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close \u003cmr-bead-id\u003e --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep \u003cpolecat-name\u003e\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive \u003cmerge-ready-message-id\u003e\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete \u003cpolecat-branch\u003e\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:10.488758447-08:00","updated_at":"2026-01-25T21:00:10.488758517-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ldd6","depends_on_id":"tv-wisp-wisp-u7fv","type":"parent-child","created_at":"2026-01-25T21:00:11.057459738-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-ldd6","depends_on_id":"tv-wisp-wisp-gudg","type":"blocks","created_at":"2026-01-25T21:00:12.010481169-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ldf5","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-02f7           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-02f7\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:45.029772624-08:00","updated_at":"2026-01-25T16:54:45.029772675-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ldf5","depends_on_id":"tv-wisp-wisp-mylm","type":"parent-child","created_at":"2026-01-25T16:54:45.033602776-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-leb9","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:45.031869916-08:00","updated_at":"2026-01-25T16:54:45.031869966-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-leb9","depends_on_id":"tv-wisp-wisp-mylm","type":"parent-child","created_at":"2026-01-25T16:54:45.13506711-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-leb9","depends_on_id":"tv-wisp-wisp-ph67","type":"blocks","created_at":"2026-01-25T16:54:45.295882511-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-leol","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-96g           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-96g\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:22.634957399-08:00","updated_at":"2026-01-25T21:55:19.030162176-08:00","closed_at":"2026-01-25T21:55:19.030162176-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-leol","depends_on_id":"tv-wisp-wisp-m1vl","type":"parent-child","created_at":"2026-01-25T19:11:22.638993435-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-lfg5","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-ilh should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:27:22.430547369-08:00","updated_at":"2026-01-25T17:27:22.430547429-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-lfg5","depends_on_id":"tv-wisp-wisp-jyha","type":"parent-child","created_at":"2026-01-25T17:27:22.549182126-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-lfg5","depends_on_id":"tv-wisp-wisp-trc8","type":"blocks","created_at":"2026-01-25T17:27:22.752409981-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-lfruf","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:31:06.903030271-08:00","updated_at":"2026-01-25T22:31:06.903030311-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-lfruf","depends_on_id":"tv-wisp-wisp-4nh4e","type":"parent-child","created_at":"2026-01-25T22:31:07.935715809-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-lfruf","depends_on_id":"tv-wisp-wisp-mw4gq","type":"blocks","created_at":"2026-01-25T22:31:09.126737105-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-lh9bp","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:22:18.715863292-08:00","updated_at":"2026-01-25T22:22:18.715863372-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-lh9bp","depends_on_id":"tv-wisp-wisp-7vv82","type":"parent-child","created_at":"2026-01-25T22:22:19.720550743-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-lh9bp","depends_on_id":"tv-wisp-wisp-kfl83","type":"blocks","created_at":"2026-01-25T22:22:20.875480845-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-lhb7","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:26:18.774086757-08:00","updated_at":"2026-01-25T17:26:18.774086807-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-lhb7","depends_on_id":"tv-wisp-wisp-exo0","type":"parent-child","created_at":"2026-01-25T17:26:18.913663602-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-lhb7","depends_on_id":"tv-wisp-wisp-sib4","type":"blocks","created_at":"2026-01-25T17:26:19.114176979-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-lhkr","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-h2uu\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-h2uu --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:09.955326539-08:00","updated_at":"2026-01-25T16:09:27.137699407-08:00","closed_at":"2026-01-25T16:09:27.137699407-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-lhkr","depends_on_id":"tv-wisp-wisp-jocg","type":"parent-child","created_at":"2026-01-25T16:07:10.060960462-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-lhkr","depends_on_id":"tv-wisp-wisp-ltua","type":"blocks","created_at":"2026-01-25T16:07:10.173887282-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-lj65","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-2mu6)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-2mu6\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:27:41.560017767-08:00","updated_at":"2026-01-25T19:27:41.560017878-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-lj65","depends_on_id":"tv-wisp-wisp-dreg","type":"parent-child","created_at":"2026-01-25T19:27:41.763575675-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-lj65","depends_on_id":"tv-wisp-wisp-io16","type":"blocks","created_at":"2026-01-25T19:27:42.307116191-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ljh6d","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (hq-cv-gzu6g).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: hq-cv-gzu6g\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:55:16.252971232-08:00","updated_at":"2026-01-25T21:55:16.252971272-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ljh6d","depends_on_id":"tv-wisp-wisp-y04mr","type":"parent-child","created_at":"2026-01-25T21:55:16.503477988-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ljh6d","depends_on_id":"tv-wisp-wisp-fmqas","type":"blocks","created_at":"2026-01-25T21:55:17.452248834-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-lmmd","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-jnik should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:58.601485357-08:00","updated_at":"2026-01-25T17:44:58.601485417-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-lmmd","depends_on_id":"tv-wisp-wisp-do23","type":"parent-child","created_at":"2026-01-25T17:44:58.826934041-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-lmmd","depends_on_id":"tv-wisp-wisp-mj4k","type":"blocks","created_at":"2026-01-25T17:44:59.201300871-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-loco","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-ilh\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-ilh --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:26:18.77501448-08:00","updated_at":"2026-01-25T17:26:18.77501454-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-loco","depends_on_id":"tv-wisp-wisp-exo0","type":"parent-child","created_at":"2026-01-25T17:26:18.966237188-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-loco","depends_on_id":"tv-wisp-wisp-y04j","type":"blocks","created_at":"2026-01-25T17:26:19.164704304-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-lqdma","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:07:30.66834793-08:00","updated_at":"2026-01-25T22:07:30.66834797-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-lqdma","depends_on_id":"tv-wisp-wisp-mrf18","type":"parent-child","created_at":"2026-01-25T22:07:31.730778839-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-lqdma","depends_on_id":"tv-wisp-wisp-8gw3q","type":"blocks","created_at":"2026-01-25T22:07:32.796536644-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-lt2f","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-eov5 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:10.040944367-08:00","updated_at":"2026-01-25T17:41:10.040944437-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-lt2f","depends_on_id":"tv-wisp-wisp-wv5q","type":"parent-child","created_at":"2026-01-25T17:41:10.221380386-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-lt2f","depends_on_id":"tv-wisp-wisp-e4hz","type":"blocks","created_at":"2026-01-25T17:41:10.557029718-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ltd","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-v0lg\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:30.020806867-08:00","updated_at":"2026-01-25T14:39:47.746898745-08:00","closed_at":"2026-01-25T14:39:47.746898745-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ltd","depends_on_id":"tv-wisp-wisp-nmn","type":"parent-child","created_at":"2026-01-25T14:38:30.025306033-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ltd","depends_on_id":"tv-wisp-wisp-7cp","type":"blocks","created_at":"2026-01-25T14:38:30.044297164-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ltua","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:09.955041096-08:00","updated_at":"2026-01-25T16:09:10.659346063-08:00","closed_at":"2026-01-25T16:09:10.659346063-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ltua","depends_on_id":"tv-wisp-wisp-jocg","type":"parent-child","created_at":"2026-01-25T16:07:10.042891497-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ltua","depends_on_id":"tv-wisp-wisp-bkam","type":"blocks","created_at":"2026-01-25T16:07:10.160670545-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-lw5","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T14:37:36.494386857-08:00","updated_at":"2026-01-25T14:37:36.494386897-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-lw9q","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-v0lg\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:44.69048777-08:00","updated_at":"2026-01-25T19:26:22.105713184-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-lw9q","depends_on_id":"tv-wisp-wisp-07f2","type":"parent-child","created_at":"2026-01-25T19:16:45.207713045-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-lw9q","depends_on_id":"tv-wisp-wisp-gymz","type":"blocks","created_at":"2026-01-25T19:16:45.756997057-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-lyrd","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:46:56.903113261-08:00","updated_at":"2026-01-25T17:46:56.903113301-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-lyrd","depends_on_id":"tv-wisp-wisp-l96l","type":"parent-child","created_at":"2026-01-25T17:46:57.217492593-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-lyrd","depends_on_id":"tv-wisp-wisp-92k1","type":"blocks","created_at":"2026-01-25T17:46:57.616177522-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-lz7o","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-fwrl\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:39.840835355-08:00","updated_at":"2026-01-25T17:33:28.397668389-08:00","closed_at":"2026-01-25T17:33:28.397668389-08:00","close_reason":"Branch polecat/rictus-mkuhn64r is clean and up to date with origin/main.","dependencies":[{"issue_id":"tv-wisp-wisp-lz7o","depends_on_id":"tv-wisp-wisp-r2dz","type":"parent-child","created_at":"2026-01-25T17:31:39.881913999-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-lz7o","depends_on_id":"tv-wisp-wisp-exkn","type":"blocks","created_at":"2026-01-25T17:31:40.120933179-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-m0s49","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"closed","priority":2,"issue_type":"epic","assignee":"tribal_village/witness","created_at":"2026-01-25T22:03:47.94320155-08:00","updated_at":"2026-01-25T22:07:16.460262872-08:00","closed_at":"2026-01-25T22:07:16.460262872-08:00","close_reason":"Patrol: No polecats, refinery running, Deacon down (escalated prior). Rig quiet.","ephemeral":true}
{"id":"tv-wisp-wisp-m1vl","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:11:22.63417031-08:00","updated_at":"2026-01-25T19:11:22.63417035-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-m4zj","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:50.538706682-08:00","updated_at":"2026-01-25T16:34:50.538706712-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-m4zj","depends_on_id":"tv-wisp-wisp-58fz","type":"parent-child","created_at":"2026-01-25T16:34:50.631188259-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-m4zj","depends_on_id":"tv-wisp-wisp-gwic","type":"blocks","created_at":"2026-01-25T16:34:50.797038704-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ma1","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:35:55.22253745-08:00","updated_at":"2026-01-25T14:35:55.22253749-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ma1","depends_on_id":"tv-wisp-wisp-9yt","type":"parent-child","created_at":"2026-01-25T14:35:55.230538492-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ma1","depends_on_id":"tv-wisp-wisp-7s9","type":"blocks","created_at":"2026-01-25T14:35:55.240583902-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mbrl","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-38ac\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:16.688471161-08:00","updated_at":"2026-01-25T19:17:59.030292385-08:00","closed_at":"2026-01-25T19:17:59.030292385-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-mbrl","depends_on_id":"tv-wisp-wisp-2pyz","type":"parent-child","created_at":"2026-01-25T19:16:16.755503358-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-mbrl","depends_on_id":"tv-wisp-wisp-qk4v","type":"blocks","created_at":"2026-01-25T19:16:17.227289983-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mbwu","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-433\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:36.717850609-08:00","updated_at":"2026-01-25T15:09:36.717850659-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-mbwu","depends_on_id":"tv-wisp-wisp-f3bu","type":"parent-child","created_at":"2026-01-25T15:09:36.789207776-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-mbwu","depends_on_id":"tv-wisp-wisp-f7lr","type":"blocks","created_at":"2026-01-25T15:09:36.849947718-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mcak","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/\u003cbranch\u003e`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"\u003csource_issue\u003e\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:38:02.238215143-08:00","updated_at":"2026-01-25T21:38:02.238215183-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-mcak","depends_on_id":"tv-wisp-wisp-chaw","type":"parent-child","created_at":"2026-01-25T21:38:03.206574082-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-mcak","depends_on_id":"tv-wisp-wisp-ol79","type":"blocks","created_at":"2026-01-25T21:38:04.239101917-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mdl6","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:25:31.732996566-08:00","updated_at":"2026-01-25T17:25:31.732996626-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-me0a9","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:22:18.713773925-08:00","updated_at":"2026-01-25T22:22:18.713773985-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-me0a9","depends_on_id":"tv-wisp-wisp-7vv82","type":"parent-child","created_at":"2026-01-25T22:22:19.345244993-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-me0a9","depends_on_id":"tv-wisp-wisp-vb6z8","type":"blocks","created_at":"2026-01-25T22:22:20.494358932-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mef2","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:38.469774277-08:00","updated_at":"2026-01-25T21:11:38.469774347-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-mef2","depends_on_id":"tv-wisp-wisp-obm9","type":"parent-child","created_at":"2026-01-25T21:11:38.677457333-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-mef2","depends_on_id":"tv-wisp-wisp-c4i2","type":"blocks","created_at":"2026-01-25T21:11:39.561238882-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mf7","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:20.303470833-08:00","updated_at":"2026-01-25T13:51:03.328860346-08:00","closed_at":"2026-01-25T13:51:03.328860346-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-mf7","depends_on_id":"tv-wisp-wisp-735","type":"parent-child","created_at":"2026-01-25T13:45:20.313310472-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-mf7","depends_on_id":"tv-wisp-wisp-dwz","type":"blocks","created_at":"2026-01-25T13:45:20.328289012-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mggzz","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:25:19.472264184-08:00","updated_at":"2026-01-25T22:25:19.472264234-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-mggzz","depends_on_id":"tv-wisp-wisp-fl6o4","type":"parent-child","created_at":"2026-01-25T22:25:20.167171739-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-mggzz","depends_on_id":"tv-wisp-wisp-rixkn","type":"blocks","created_at":"2026-01-25T22:25:21.359733249-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mj4k","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-jnik)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-jnik\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:58.600983399-08:00","updated_at":"2026-01-25T17:44:58.600983459-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-mj4k","depends_on_id":"tv-wisp-wisp-do23","type":"parent-child","created_at":"2026-01-25T17:44:58.772599817-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-mj4k","depends_on_id":"tv-wisp-wisp-1x88","type":"blocks","created_at":"2026-01-25T17:44:59.155367247-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mlscr","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:15:21.195449585-08:00","updated_at":"2026-01-25T22:15:21.195449625-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-mlscr","depends_on_id":"tv-wisp-wisp-y02ot","type":"parent-child","created_at":"2026-01-25T22:15:21.462661425-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-mlscr","depends_on_id":"tv-wisp-wisp-7jpje","type":"blocks","created_at":"2026-01-25T22:15:22.676000218-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mlwr","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-8ro           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-8ro\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:06:21.218781106-08:00","updated_at":"2026-01-25T17:24:33.583504545-08:00","closed_at":"2026-01-25T17:24:33.583504545-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-mlwr","depends_on_id":"tv-wisp-wisp-pysf","type":"parent-child","created_at":"2026-01-25T16:06:21.22284784-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mmg4","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-gddu should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:46:56.902473245-08:00","updated_at":"2026-01-25T17:46:56.902473285-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-mmg4","depends_on_id":"tv-wisp-wisp-l96l","type":"parent-child","created_at":"2026-01-25T17:46:57.115567843-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-mmg4","depends_on_id":"tv-wisp-wisp-sy48","type":"blocks","created_at":"2026-01-25T17:46:57.510968548-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mni","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-25T14:41:43.850172709-08:00","updated_at":"2026-01-25T19:09:48.490818286-08:00","closed_at":"2026-01-25T19:09:48.490818286-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-wisp-mnj7","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-gc5x\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:19.123309277-08:00","updated_at":"2026-01-25T16:34:33.168060595-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-mnj7","depends_on_id":"tv-wisp-wisp-inif","type":"parent-child","created_at":"2026-01-25T16:07:19.239904644-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-mnj7","depends_on_id":"tv-wisp-wisp-vi2a","type":"blocks","created_at":"2026-01-25T16:07:19.355844387-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mrf18","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T22:07:30.663157448-08:00","updated_at":"2026-01-25T22:07:30.663157488-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-mrn4g","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:22:18.714464282-08:00","updated_at":"2026-01-25T22:22:18.714464332-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-mrn4g","depends_on_id":"tv-wisp-wisp-7vv82","type":"parent-child","created_at":"2026-01-25T22:22:19.470380639-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-mrn4g","depends_on_id":"tv-wisp-wisp-me0a9","type":"blocks","created_at":"2026-01-25T22:22:20.619993594-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mro8","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-jnik\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-jnik --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:58.602967455-08:00","updated_at":"2026-01-25T17:44:58.602967505-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-mro8","depends_on_id":"tv-wisp-wisp-do23","type":"parent-child","created_at":"2026-01-25T17:44:58.969107661-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-mro8","depends_on_id":"tv-wisp-wisp-naa4","type":"blocks","created_at":"2026-01-25T17:44:59.346663538-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mt9u","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T15:09:54.801676708-08:00","updated_at":"2026-01-25T15:09:54.801676758-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-mtvw","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-kmy2\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:24:16.632358509-08:00","updated_at":"2026-01-25T17:24:16.632358539-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-mtvw","depends_on_id":"tv-wisp-wisp-d08y","type":"parent-child","created_at":"2026-01-25T17:24:16.662276558-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-mtvw","depends_on_id":"tv-wisp-wisp-u5gn","type":"blocks","created_at":"2026-01-25T17:24:16.875063318-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mux3g","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:15:21.197985372-08:00","updated_at":"2026-01-25T22:15:21.197985432-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-mux3g","depends_on_id":"tv-wisp-wisp-y02ot","type":"parent-child","created_at":"2026-01-25T22:15:21.989143919-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-mux3g","depends_on_id":"tv-wisp-wisp-i4zuo","type":"blocks","created_at":"2026-01-25T22:15:23.21336646-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mw4gq","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:31:06.902546022-08:00","updated_at":"2026-01-25T22:31:06.902546063-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-mw4gq","depends_on_id":"tv-wisp-wisp-4nh4e","type":"parent-child","created_at":"2026-01-25T22:31:07.807190987-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-mw4gq","depends_on_id":"tv-wisp-wisp-ezeox","type":"blocks","created_at":"2026-01-25T22:31:08.993610837-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mwr","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:36.495817452-08:00","updated_at":"2026-01-25T14:43:40.437441421-08:00","closed_at":"2026-01-25T14:43:40.437441421-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-mwr","depends_on_id":"tv-wisp-wisp-lw5","type":"parent-child","created_at":"2026-01-25T14:37:36.504538402-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-mwr","depends_on_id":"tv-wisp-wisp-wak","type":"blocks","created_at":"2026-01-25T14:37:36.51623108-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mxw5","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:40.89130177-08:00","updated_at":"2026-01-25T20:17:08.705832599-08:00","closed_at":"2026-01-25T20:17:08.705832599-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-mxw5","depends_on_id":"tv-wisp-wisp-oa0y","type":"parent-child","created_at":"2026-01-25T20:07:41.478090793-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-mxw5","depends_on_id":"tv-wisp-wisp-0w6e","type":"blocks","created_at":"2026-01-25T20:07:42.186357046-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-mylm","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T16:54:45.028971527-08:00","updated_at":"2026-01-25T16:54:45.028971577-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-mzr","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-j1jx).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-j1jx\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:52:53.984304996-08:00","updated_at":"2026-01-25T14:52:53.984305036-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-mzr","depends_on_id":"tv-wisp-wisp-7h8","type":"parent-child","created_at":"2026-01-25T14:52:53.995277875-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-mzr","depends_on_id":"tv-wisp-wisp-73k","type":"blocks","created_at":"2026-01-25T14:52:54.027871432-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-n05p","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-l0oc\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:52.921618124-08:00","updated_at":"2026-01-25T17:26:43.610545258-08:00","closed_at":"2026-01-25T17:26:43.610545258-08:00","close_reason":"N/A - duplicate of tv-r0vv, already merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-n05p","depends_on_id":"tv-wisp-wisp-6pbk","type":"parent-child","created_at":"2026-01-25T17:23:52.945198458-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-n05p","depends_on_id":"tv-wisp-wisp-oe6h","type":"blocks","created_at":"2026-01-25T17:23:53.126909938-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-n2f8","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-z20\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:15:52.544947315-08:00","updated_at":"2026-01-25T19:15:52.544947355-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-n2f8","depends_on_id":"tv-wisp-wisp-zkv0","type":"parent-child","created_at":"2026-01-25T19:15:52.607543278-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-n2f8","depends_on_id":"tv-wisp-wisp-rgzx","type":"blocks","created_at":"2026-01-25T19:15:53.095390631-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-n3rx","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:45:07.963186355-08:00","updated_at":"2026-01-25T17:56:33.591704346-08:00","closed_at":"2026-01-25T17:56:33.591704346-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-wisp-n658","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-l0oc)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-l0oc\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:28:18.59487708-08:00","updated_at":"2026-01-25T17:28:18.59487712-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-n658","depends_on_id":"tv-wisp-wisp-p9hy","type":"parent-child","created_at":"2026-01-25T17:28:18.675287994-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-n658","depends_on_id":"tv-wisp-wisp-u9pi","type":"blocks","created_at":"2026-01-25T17:28:18.900106481-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-n7tw","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-y1kfh\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-y1kfh --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:40.89248055-08:00","updated_at":"2026-01-25T20:17:31.661629337-08:00","closed_at":"2026-01-25T20:17:31.661629337-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-n7tw","depends_on_id":"tv-wisp-wisp-oa0y","type":"parent-child","created_at":"2026-01-25T20:07:41.562943838-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-n7tw","depends_on_id":"tv-wisp-wisp-mxw5","type":"blocks","created_at":"2026-01-25T20:07:42.27760538-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-n8y","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-02pb\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:11.987753514-08:00","updated_at":"2026-01-25T22:17:22.526332573-08:00","closed_at":"2026-01-25T22:17:22.526332573-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-n8y","depends_on_id":"tv-wisp-wisp-jdo","type":"parent-child","created_at":"2026-01-25T14:38:12.005056542-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-n8y","depends_on_id":"tv-wisp-wisp-a96","type":"blocks","created_at":"2026-01-25T14:38:12.021957349-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-n92d","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-puj)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-puj\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:52.558272137-08:00","updated_at":"2026-01-25T19:12:25.42750484-08:00","closed_at":"2026-01-25T19:12:25.42750484-08:00","close_reason":"Work already completed and merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-n92d","depends_on_id":"tv-wisp-wisp-kls4","type":"parent-child","created_at":"2026-01-25T19:10:52.727710362-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-n92d","depends_on_id":"tv-wisp-wisp-rrbq","type":"blocks","created_at":"2026-01-25T19:10:53.211271473-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-n9ch","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-cx6z)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-cx6z\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:21:13.444953597-08:00","updated_at":"2026-01-25T20:21:13.444953657-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-n9ch","depends_on_id":"tv-wisp-wisp-5nrw","type":"parent-child","created_at":"2026-01-25T20:21:13.701691368-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-n9ch","depends_on_id":"tv-wisp-wisp-s89e","type":"blocks","created_at":"2026-01-25T20:21:14.383260693-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-na45","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-y1kfh\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:40.893078507-08:00","updated_at":"2026-01-25T20:17:31.923593885-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-na45","depends_on_id":"tv-wisp-wisp-oa0y","type":"parent-child","created_at":"2026-01-25T20:07:41.661283481-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-na45","depends_on_id":"tv-wisp-wisp-n7tw","type":"blocks","created_at":"2026-01-25T20:07:42.358979089-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-naa4","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:58.602455799-08:00","updated_at":"2026-01-25T17:44:58.602455859-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-naa4","depends_on_id":"tv-wisp-wisp-do23","type":"parent-child","created_at":"2026-01-25T17:44:58.921918532-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-naa4","depends_on_id":"tv-wisp-wisp-a32d","type":"blocks","created_at":"2026-01-25T17:44:59.301144988-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-nagv","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:34.709592423-08:00","updated_at":"2026-01-25T20:13:37.925839093-08:00","closed_at":"2026-01-25T20:13:37.925839093-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-nagv","depends_on_id":"tv-wisp-wisp-cj2u","type":"parent-child","created_at":"2026-01-25T20:07:35.445279007-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-nagv","depends_on_id":"tv-wisp-wisp-f495","type":"blocks","created_at":"2026-01-25T20:07:36.245797137-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-nawc","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-ilh           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-ilh\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:26:18.771562373-08:00","updated_at":"2026-01-25T17:26:18.771562433-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-nawc","depends_on_id":"tv-wisp-wisp-exo0","type":"parent-child","created_at":"2026-01-25T17:26:18.776142015-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-nbuz6","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:12:14.190123194-08:00","updated_at":"2026-01-25T22:12:14.190123224-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-nbuz6","depends_on_id":"tv-wisp-wisp-dbfyj","type":"parent-child","created_at":"2026-01-25T22:12:14.680891485-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-nbuz6","depends_on_id":"tv-wisp-wisp-0oesx","type":"blocks","created_at":"2026-01-25T22:12:15.772472001-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-nc70","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-z9d7).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-z9d7\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:07:58.872529531-08:00","updated_at":"2026-01-25T15:07:58.872529571-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-nc70","depends_on_id":"tv-wisp-wisp-hroa","type":"parent-child","created_at":"2026-01-25T15:07:58.88699489-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-nc70","depends_on_id":"tv-wisp-wisp-jpki","type":"blocks","created_at":"2026-01-25T15:07:58.951198284-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ncuy","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-32y6           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-32y6\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:30:06.22637738-08:00","updated_at":"2026-01-25T15:30:06.22637742-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ncuy","depends_on_id":"tv-wisp-wisp-x8yu","type":"parent-child","created_at":"2026-01-25T15:30:06.228883404-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ndlh","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:28.583191003-08:00","updated_at":"2026-01-25T17:23:28.583191063-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ndlh","depends_on_id":"tv-wisp-wisp-1gtx","type":"parent-child","created_at":"2026-01-25T17:23:28.712236164-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ndlh","depends_on_id":"tv-wisp-wisp-ejeo","type":"blocks","created_at":"2026-01-25T17:23:28.884563631-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ndm0","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-c85p).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-c85p\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:15:24.711278188-08:00","updated_at":"2026-01-25T20:15:24.711278238-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ndm0","depends_on_id":"tv-wisp-wisp-40l7","type":"parent-child","created_at":"2026-01-25T20:15:24.884831344-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ndm0","depends_on_id":"tv-wisp-wisp-satn","type":"blocks","created_at":"2026-01-25T20:15:25.543487859-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ngxx","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-k0or\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:23:52.356522566-08:00","updated_at":"2026-01-25T19:23:52.356522616-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ngxx","depends_on_id":"tv-wisp-wisp-hd5u","type":"parent-child","created_at":"2026-01-25T19:23:52.882221849-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ngxx","depends_on_id":"tv-wisp-wisp-smc2","type":"blocks","created_at":"2026-01-25T19:23:53.400953242-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-nhlw","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-rmos)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-rmos\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:42:26.527231529-08:00","updated_at":"2026-01-25T16:43:22.254779045-08:00","closed_at":"2026-01-25T16:43:22.254779045-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-nhlw","depends_on_id":"tv-wisp-wisp-pij2","type":"parent-child","created_at":"2026-01-25T16:42:26.581912005-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-nhlw","depends_on_id":"tv-wisp-wisp-26sx","type":"blocks","created_at":"2026-01-25T16:42:26.739868422-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-nitf","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:18.804659527-08:00","updated_at":"2026-01-25T15:09:18.804659567-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-nitf","depends_on_id":"tv-wisp-wisp-86en","type":"parent-child","created_at":"2026-01-25T15:09:18.838913507-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-nitf","depends_on_id":"tv-wisp-wisp-7sxa","type":"blocks","created_at":"2026-01-25T15:09:18.892867785-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-nk10","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-d6jo should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:57:57.424901707-08:00","updated_at":"2026-01-25T19:57:57.424901747-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-nk10","depends_on_id":"tv-wisp-wisp-rah4","type":"parent-child","created_at":"2026-01-25T19:57:57.738940681-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-nk10","depends_on_id":"tv-wisp-wisp-cwkg","type":"blocks","created_at":"2026-01-25T19:57:58.3284506-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-nlmo","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-32y6\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:28.159107489-08:00","updated_at":"2026-01-25T16:09:07.310259833-08:00","closed_at":"2026-01-25T16:09:07.310259833-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-nlmo","depends_on_id":"tv-wisp-wisp-59hk","type":"parent-child","created_at":"2026-01-25T16:07:28.180138355-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-nlmo","depends_on_id":"tv-wisp-wisp-osxc","type":"blocks","created_at":"2026-01-25T16:07:28.307572236-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-nmn","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-25T14:38:30.020012217-08:00","updated_at":"2026-01-25T19:13:17.329252195-08:00","closed_at":"2026-01-25T19:13:17.329252195-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-wisp-nmv6u","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:15:21.200243096-08:00","updated_at":"2026-01-25T22:15:21.200243146-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-nmv6u","depends_on_id":"tv-wisp-wisp-y02ot","type":"parent-child","created_at":"2026-01-25T22:15:22.404524583-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-nmv6u","depends_on_id":"tv-wisp-wisp-y3cij","type":"blocks","created_at":"2026-01-25T22:15:23.615458966-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-nnxc","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:06.921081233-08:00","updated_at":"2026-01-25T21:00:06.921081293-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-nnxc","depends_on_id":"tv-wisp-wisp-6imy","type":"parent-child","created_at":"2026-01-25T21:00:07.474574381-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-nnxc","depends_on_id":"tv-wisp-wisp-holh","type":"blocks","created_at":"2026-01-25T21:00:08.370194166-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-nohd","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-wdia)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-wdia\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:28.490336762-08:00","updated_at":"2026-01-25T17:37:28.490336822-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-nohd","depends_on_id":"tv-wisp-wisp-08mh","type":"parent-child","created_at":"2026-01-25T17:37:28.599813144-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-nohd","depends_on_id":"tv-wisp-wisp-e6vf","type":"blocks","created_at":"2026-01-25T17:37:28.90901012-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-norj","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-cbg\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:51.069700675-08:00","updated_at":"2026-01-25T19:22:36.574848719-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-norj","depends_on_id":"tv-wisp-wisp-v2zi","type":"parent-child","created_at":"2026-01-25T19:13:51.541678454-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-norj","depends_on_id":"tv-wisp-wisp-oi1i","type":"blocks","created_at":"2026-01-25T19:13:52.026896865-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-nwzj","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-m1fr\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:41.665898088-08:00","updated_at":"2026-01-25T17:50:14.554690617-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-nwzj","depends_on_id":"tv-wisp-wisp-kb77","type":"parent-child","created_at":"2026-01-25T17:34:41.952740539-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-nwzj","depends_on_id":"tv-wisp-wisp-x6jf","type":"blocks","created_at":"2026-01-25T17:34:42.215224793-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-o1gr","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-cbg)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-cbg\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:51.066615214-08:00","updated_at":"2026-01-25T19:21:22.831690721-08:00","closed_at":"2026-01-25T19:21:22.831690721-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-o1gr","depends_on_id":"tv-wisp-wisp-v2zi","type":"parent-child","created_at":"2026-01-25T19:13:51.246059624-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-o1gr","depends_on_id":"tv-wisp-wisp-eoce","type":"blocks","created_at":"2026-01-25T19:13:51.739319259-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-o2kf","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-0pkq           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-0pkq\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:28.755272686-08:00","updated_at":"2026-01-25T20:20:28.755272726-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-o2kf","depends_on_id":"tv-wisp-wisp-tcnq","type":"parent-child","created_at":"2026-01-25T20:20:28.761187006-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-o2u","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-2bk)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-2bk\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:47.968959562-08:00","updated_at":"2026-01-25T14:51:59.425290084-08:00","closed_at":"2026-01-25T14:51:59.425290084-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-o2u","depends_on_id":"tv-wisp-wisp-7ym","type":"parent-child","created_at":"2026-01-25T14:38:47.978668518-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-o2u","depends_on_id":"tv-wisp-wisp-dmi","type":"blocks","created_at":"2026-01-25T14:38:48.000780686-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-oa0y","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T20:07:40.886141195-08:00","updated_at":"2026-01-25T20:07:40.886141256-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-obc","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:31:40.706196266-08:00","updated_at":"2026-01-25T14:31:40.706196296-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-obc","depends_on_id":"tv-wisp-wisp-8rd","type":"parent-child","created_at":"2026-01-25T14:31:40.714820569-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-obc","depends_on_id":"tv-wisp-wisp-7sn","type":"blocks","created_at":"2026-01-25T14:31:40.723163117-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-obm9","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T21:11:38.466984326-08:00","updated_at":"2026-01-25T21:11:38.466984387-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-ocdc","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:15.599336785-08:00","updated_at":"2026-01-25T17:36:06.795472225-08:00","closed_at":"2026-01-25T17:36:06.795472225-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ocdc","depends_on_id":"tv-wisp-wisp-ce9t","type":"parent-child","created_at":"2026-01-25T17:31:15.796435052-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ocdc","depends_on_id":"tv-wisp-wisp-ggr9","type":"blocks","created_at":"2026-01-25T17:31:16.026881003-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-od67","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:38.47439674-08:00","updated_at":"2026-01-25T21:11:38.4743968-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-od67","depends_on_id":"tv-wisp-wisp-obm9","type":"parent-child","created_at":"2026-01-25T21:11:39.367404771-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-od67","depends_on_id":"tv-wisp-wisp-kt4g","type":"blocks","created_at":"2026-01-25T21:11:40.237518895-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ode8","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-318k)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-318k\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:20:52.492014868-08:00","updated_at":"2026-01-25T19:20:52.492014918-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ode8","depends_on_id":"tv-wisp-wisp-wkqr","type":"parent-child","created_at":"2026-01-25T19:20:52.688978913-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ode8","depends_on_id":"tv-wisp-wisp-7q91","type":"blocks","created_at":"2026-01-25T19:20:53.210828125-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-oe6h","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-l0oc           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-l0oc\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:52.92113422-08:00","updated_at":"2026-01-25T17:26:33.495070617-08:00","closed_at":"2026-01-25T17:26:33.495070617-08:00","close_reason":"Feature already implemented as tv-r0vv - duplicate issue","dependencies":[{"issue_id":"tv-wisp-wisp-oe6h","depends_on_id":"tv-wisp-wisp-6pbk","type":"parent-child","created_at":"2026-01-25T17:23:52.923994031-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-oefm","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-z20)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-z20\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:15:52.546049052-08:00","updated_at":"2026-01-25T19:15:52.546049082-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-oefm","depends_on_id":"tv-wisp-wisp-zkv0","type":"parent-child","created_at":"2026-01-25T19:15:52.733979107-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-oefm","depends_on_id":"tv-wisp-wisp-2efs","type":"blocks","created_at":"2026-01-25T19:15:53.263788136-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ofx","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-cbg\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-cbg --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:54.025917236-08:00","updated_at":"2026-01-25T14:37:54.025917277-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ofx","depends_on_id":"tv-wisp-wisp-c1i","type":"parent-child","created_at":"2026-01-25T14:37:54.038021783-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ofx","depends_on_id":"tv-wisp-wisp-bv6","type":"blocks","created_at":"2026-01-25T14:37:54.051767912-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-oh02","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-k0or\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:23:52.352567472-08:00","updated_at":"2026-01-25T19:23:52.352567532-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-oh02","depends_on_id":"tv-wisp-wisp-hd5u","type":"parent-child","created_at":"2026-01-25T19:23:52.423566075-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-oh02","depends_on_id":"tv-wisp-wisp-2dv8","type":"blocks","created_at":"2026-01-25T19:23:52.947074867-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-oi1i","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-cbg\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-cbg --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:51.069152852-08:00","updated_at":"2026-01-25T19:22:36.363835733-08:00","closed_at":"2026-01-25T19:22:36.363835733-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-oi1i","depends_on_id":"tv-wisp-wisp-v2zi","type":"parent-child","created_at":"2026-01-25T19:13:51.485499973-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-oi1i","depends_on_id":"tv-wisp-wisp-fku2","type":"blocks","created_at":"2026-01-25T19:13:51.970887039-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-oif7","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-z7q5\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:30:52.061965137-08:00","updated_at":"2026-01-25T17:33:13.50476818-08:00","closed_at":"2026-01-25T17:33:13.50476818-08:00","close_reason":"Not needed - feature already implemented","dependencies":[{"issue_id":"tv-wisp-wisp-oif7","depends_on_id":"tv-wisp-wisp-xx0i","type":"parent-child","created_at":"2026-01-25T17:30:52.091070507-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-oif7","depends_on_id":"tv-wisp-wisp-zcn7","type":"blocks","created_at":"2026-01-25T17:30:52.318109419-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ok01","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-upwa\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:38.83733751-08:00","updated_at":"2026-01-25T16:54:38.83733756-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ok01","depends_on_id":"tv-wisp-wisp-i7i6","type":"parent-child","created_at":"2026-01-25T16:54:38.973242822-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ok01","depends_on_id":"tv-wisp-wisp-65l9","type":"blocks","created_at":"2026-01-25T16:54:39.121562144-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ol79","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:38:02.237776546-08:00","updated_at":"2026-01-25T21:38:02.237776586-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ol79","depends_on_id":"tv-wisp-wisp-chaw","type":"parent-child","created_at":"2026-01-25T21:38:03.104863024-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-ol79","depends_on_id":"tv-wisp-wisp-2yk7","type":"blocks","created_at":"2026-01-25T21:38:04.135114988-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-oli2p","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:25:19.468315709-08:00","updated_at":"2026-01-25T22:25:19.468315739-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-oli2p","depends_on_id":"tv-wisp-wisp-fl6o4","type":"parent-child","created_at":"2026-01-25T22:25:19.476045266-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-om46","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:21:13.446183258-08:00","updated_at":"2026-01-25T20:21:13.446183318-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-om46","depends_on_id":"tv-wisp-wisp-5nrw","type":"parent-child","created_at":"2026-01-25T20:21:13.868823193-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-om46","depends_on_id":"tv-wisp-wisp-oyjt","type":"blocks","created_at":"2026-01-25T20:21:14.55413467-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-onxs","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:15:24.712471495-08:00","updated_at":"2026-01-25T20:15:24.712471535-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-onxs","depends_on_id":"tv-wisp-wisp-40l7","type":"parent-child","created_at":"2026-01-25T20:15:25.124601064-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-onxs","depends_on_id":"tv-wisp-wisp-w7qf","type":"blocks","created_at":"2026-01-25T20:15:25.785102764-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-oorg","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-z7q5\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-z7q5 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:30:52.063962208-08:00","updated_at":"2026-01-25T17:33:14.572543823-08:00","closed_at":"2026-01-25T17:33:14.572543823-08:00","close_reason":"Not needed - feature already implemented","dependencies":[{"issue_id":"tv-wisp-wisp-oorg","depends_on_id":"tv-wisp-wisp-xx0i","type":"parent-child","created_at":"2026-01-25T17:30:52.261678545-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-oorg","depends_on_id":"tv-wisp-wisp-jzyw","type":"blocks","created_at":"2026-01-25T17:30:52.507897286-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-opd6l","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:04:38.992592201-08:00","updated_at":"2026-01-25T22:04:38.992592261-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-opd6l","depends_on_id":"tv-wisp-wisp-0u79m","type":"parent-child","created_at":"2026-01-25T22:04:39.354035355-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-opd6l","depends_on_id":"tv-wisp-wisp-twx5b","type":"blocks","created_at":"2026-01-25T22:04:40.403082063-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-opxi","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-o168).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-o168\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:47.704620653-08:00","updated_at":"2026-01-25T17:37:47.704620703-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-opxi","depends_on_id":"tv-wisp-wisp-9ksa","type":"parent-child","created_at":"2026-01-25T17:37:47.784164949-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-opxi","depends_on_id":"tv-wisp-wisp-1o3d","type":"blocks","created_at":"2026-01-25T17:37:48.073464188-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-oqjr","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-8ro)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-8ro\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:06:21.220885536-08:00","updated_at":"2026-01-25T16:06:21.220885596-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-oqjr","depends_on_id":"tv-wisp-wisp-pysf","type":"parent-child","created_at":"2026-01-25T16:06:21.261716652-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-oqjr","depends_on_id":"tv-wisp-wisp-efu9","type":"blocks","created_at":"2026-01-25T16:06:21.361326344-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-oruc","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:47:52.486322447-08:00","updated_at":"2026-01-25T19:47:52.486322487-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-orv6","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:38.471796283-08:00","updated_at":"2026-01-25T21:11:38.471796333-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-orv6","depends_on_id":"tv-wisp-wisp-obm9","type":"parent-child","created_at":"2026-01-25T21:11:38.962673432-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-orv6","depends_on_id":"tv-wisp-wisp-sxij","type":"blocks","created_at":"2026-01-25T21:11:39.848199569-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-osxc","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-32y6           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-32y6\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:28.15869528-08:00","updated_at":"2026-01-25T16:08:43.990012412-08:00","closed_at":"2026-01-25T16:08:43.990012412-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-osxc","depends_on_id":"tv-wisp-wisp-59hk","type":"parent-child","created_at":"2026-01-25T16:07:28.162132928-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ov2k","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-5d7t\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:56:36.373967431-08:00","updated_at":"2026-01-25T19:56:36.373967471-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ov2k","depends_on_id":"tv-wisp-wisp-vlrj","type":"parent-child","created_at":"2026-01-25T19:56:36.448889385-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ov2k","depends_on_id":"tv-wisp-wisp-a30e","type":"blocks","created_at":"2026-01-25T19:56:37.042689756-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ov9","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-z20\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:44.986690278-08:00","updated_at":"2026-01-25T13:46:08.78258165-08:00","closed_at":"2026-01-25T13:46:08.78258165-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ov9","depends_on_id":"tv-wisp-wisp-548","type":"parent-child","created_at":"2026-01-25T13:44:44.989185782-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ov9","depends_on_id":"tv-wisp-wisp-seb","type":"blocks","created_at":"2026-01-25T13:44:44.995339244-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-oxeh","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:27:41.561496639-08:00","updated_at":"2026-01-25T19:27:41.561496679-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-oxeh","depends_on_id":"tv-wisp-wisp-dreg","type":"parent-child","created_at":"2026-01-25T19:27:41.895979669-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-oxeh","depends_on_id":"tv-wisp-wisp-b1ij","type":"blocks","created_at":"2026-01-25T19:27:42.442854782-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-oxmj","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:27:22.431024329-08:00","updated_at":"2026-01-25T17:27:22.43102438-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-oxmj","depends_on_id":"tv-wisp-wisp-jyha","type":"parent-child","created_at":"2026-01-25T17:27:22.575087651-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-oxmj","depends_on_id":"tv-wisp-wisp-lfg5","type":"blocks","created_at":"2026-01-25T17:27:22.780397224-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-oyjt","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-cx6z should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:21:13.445583145-08:00","updated_at":"2026-01-25T20:21:13.445583235-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-oyjt","depends_on_id":"tv-wisp-wisp-5nrw","type":"parent-child","created_at":"2026-01-25T20:21:13.784976305-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-oyjt","depends_on_id":"tv-wisp-wisp-n9ch","type":"blocks","created_at":"2026-01-25T20:21:14.468021812-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-oyy9","title":"Check refinery mail","description":"Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: \u003cbranch\u003e\n# Issue: \u003cissue-id\u003e\n# Polecat: \u003cpolecat-name\u003e\n# MR: \u003cmr-bead-id\u003e\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:38:02.234027863-08:00","updated_at":"2026-01-25T21:38:02.234027903-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-oyy9","depends_on_id":"tv-wisp-wisp-chaw","type":"parent-child","created_at":"2026-01-25T21:38:02.239259539-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ozki","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-l0oc\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-l0oc --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:52.923301337-08:00","updated_at":"2026-01-25T17:26:48.217020066-08:00","closed_at":"2026-01-25T17:26:48.217020066-08:00","close_reason":"N/A - duplicate of tv-r0vv, already merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-ozki","depends_on_id":"tv-wisp-wisp-6pbk","type":"parent-child","created_at":"2026-01-25T17:23:53.084872417-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ozki","depends_on_id":"tv-wisp-wisp-8hl6","type":"blocks","created_at":"2026-01-25T17:23:53.255144155-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-p1k","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-02pb           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-02pb\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:11.98621107-08:00","updated_at":"2026-01-25T14:40:19.667595532-08:00","closed_at":"2026-01-25T14:40:19.667595532-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-p1k","depends_on_id":"tv-wisp-wisp-jdo","type":"parent-child","created_at":"2026-01-25T14:38:11.988317169-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-p3xq","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-d6jo\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-d6jo --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:57:57.426138947-08:00","updated_at":"2026-01-25T19:57:57.426138987-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-p3xq","depends_on_id":"tv-wisp-wisp-rah4","type":"parent-child","created_at":"2026-01-25T19:57:57.956232315-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-p3xq","depends_on_id":"tv-wisp-wisp-gnur","type":"blocks","created_at":"2026-01-25T19:57:58.547848596-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-p4e1","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T15:04:39.644325887-08:00","updated_at":"2026-01-25T15:04:39.644325937-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-p4ru","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-38ac\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:16.694339548-08:00","updated_at":"2026-01-25T19:20:53.798741898-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-p4ru","depends_on_id":"tv-wisp-wisp-2pyz","type":"parent-child","created_at":"2026-01-25T19:16:17.169838084-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-p4ru","depends_on_id":"tv-wisp-wisp-9fwb","type":"blocks","created_at":"2026-01-25T19:16:17.637017027-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-p4yy","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-8b8\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:54.803674386-08:00","updated_at":"2026-01-25T15:09:54.803674466-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-p4yy","depends_on_id":"tv-wisp-wisp-mt9u","type":"parent-child","created_at":"2026-01-25T15:09:54.817231067-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-p4yy","depends_on_id":"tv-wisp-wisp-sw37","type":"blocks","created_at":"2026-01-25T15:09:54.886709527-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-p7va","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-433 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:36.716324311-08:00","updated_at":"2026-01-25T15:09:36.716324371-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-p7va","depends_on_id":"tv-wisp-wisp-f3bu","type":"parent-child","created_at":"2026-01-25T15:09:36.757048807-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-p7va","depends_on_id":"tv-wisp-wisp-zx7c","type":"blocks","created_at":"2026-01-25T15:09:36.819336387-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-p8w0","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-0pkq\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:28.755709012-08:00","updated_at":"2026-01-25T20:20:28.755709052-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-p8w0","depends_on_id":"tv-wisp-wisp-tcnq","type":"parent-child","created_at":"2026-01-25T20:20:28.859848482-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-p8w0","depends_on_id":"tv-wisp-wisp-o2kf","type":"blocks","created_at":"2026-01-25T20:20:29.53491562-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-p9hy","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:28:18.592888305-08:00","updated_at":"2026-01-25T17:28:18.592888335-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-p9q5","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:27:41.561900563-08:00","updated_at":"2026-01-25T19:27:41.561900603-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-p9q5","depends_on_id":"tv-wisp-wisp-dreg","type":"parent-child","created_at":"2026-01-25T19:27:41.961696891-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-p9q5","depends_on_id":"tv-wisp-wisp-oxeh","type":"blocks","created_at":"2026-01-25T19:27:42.511568789-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-pal6","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:53.467117065-08:00","updated_at":"2026-01-25T22:20:16.855796948-08:00","closed_at":"2026-01-25T22:20:16.855796948-08:00","close_reason":"Tests already verified passing in earlier step","dependencies":[{"issue_id":"tv-wisp-wisp-pal6","depends_on_id":"tv-wisp-wisp-v9eo","type":"parent-child","created_at":"2026-01-25T19:11:53.750463729-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-pal6","depends_on_id":"tv-wisp-wisp-2stk","type":"blocks","created_at":"2026-01-25T19:11:54.200251735-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-pbew","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-395fz\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:26.37956088-08:00","updated_at":"2026-01-25T20:15:52.84191142-08:00","closed_at":"2026-01-25T20:15:52.84191142-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-pbew","depends_on_id":"tv-wisp-wisp-1k5c","type":"parent-child","created_at":"2026-01-25T20:07:26.621095397-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-pbew","depends_on_id":"tv-wisp-wisp-gnvl","type":"blocks","created_at":"2026-01-25T20:07:28.135912661-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-pdl6","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-uor5).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-uor5\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:15.597536322-08:00","updated_at":"2026-01-25T17:34:42.998133737-08:00","closed_at":"2026-01-25T17:34:42.998133737-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-pdl6","depends_on_id":"tv-wisp-wisp-ce9t","type":"parent-child","created_at":"2026-01-25T17:31:15.661044283-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-pdl6","depends_on_id":"tv-wisp-wisp-urr7","type":"blocks","created_at":"2026-01-25T17:31:15.906734621-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ph67","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-02f7 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:45.031487591-08:00","updated_at":"2026-01-25T16:54:45.031487641-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ph67","depends_on_id":"tv-wisp-wisp-mylm","type":"parent-child","created_at":"2026-01-25T16:54:45.114082676-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ph67","depends_on_id":"tv-wisp-wisp-2in3","type":"blocks","created_at":"2026-01-25T16:54:45.276565255-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-pi1d","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-kmy2 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:24:16.633335212-08:00","updated_at":"2026-01-25T17:24:16.633335253-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-pi1d","depends_on_id":"tv-wisp-wisp-d08y","type":"parent-child","created_at":"2026-01-25T17:24:16.760819838-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-pi1d","depends_on_id":"tv-wisp-wisp-vlfw","type":"blocks","created_at":"2026-01-25T17:24:16.941491687-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-pij2","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T16:42:26.52536854-08:00","updated_at":"2026-01-25T16:42:26.52536858-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-pj6","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:43:48.146019319-08:00","updated_at":"2026-01-25T14:43:48.146019359-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-pj6","depends_on_id":"tv-wisp-wisp-uuf","type":"parent-child","created_at":"2026-01-25T14:43:48.166212789-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-pj6","depends_on_id":"tv-wisp-wisp-dbk","type":"blocks","created_at":"2026-01-25T14:43:48.193215596-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-pmf","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-v0lg)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-v0lg\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:30.021214126-08:00","updated_at":"2026-01-25T14:44:21.399411407-08:00","closed_at":"2026-01-25T14:44:21.399411407-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-pmf","depends_on_id":"tv-wisp-wisp-nmn","type":"parent-child","created_at":"2026-01-25T14:38:30.030294553-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-pmf","depends_on_id":"tv-wisp-wisp-w48","type":"blocks","created_at":"2026-01-25T14:38:30.049370824-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-pmw3","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-ilh\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:27:22.432440504-08:00","updated_at":"2026-01-25T17:28:22.686750947-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-pmw3","depends_on_id":"tv-wisp-wisp-jyha","type":"parent-child","created_at":"2026-01-25T17:27:22.650001565-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-pmw3","depends_on_id":"tv-wisp-wisp-cz0l","type":"blocks","created_at":"2026-01-25T17:27:22.858755759-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-popmb","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:59:15.40292127-08:00","updated_at":"2026-01-25T21:59:15.40292131-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-popmb","depends_on_id":"tv-wisp-wisp-9y6rc","type":"parent-child","created_at":"2026-01-25T21:59:16.433918467-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-popmb","depends_on_id":"tv-wisp-wisp-uoyo1","type":"blocks","created_at":"2026-01-25T21:59:17.478784431-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-psa9","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-k0gj)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-k0gj\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:52.490439341-08:00","updated_at":"2026-01-25T19:55:21.424998081-08:00","closed_at":"2026-01-25T19:55:21.424998081-08:00","close_reason":"Extracted magic numbers into named constants for improved readability","dependencies":[{"issue_id":"tv-wisp-wisp-psa9","depends_on_id":"tv-wisp-wisp-oruc","type":"parent-child","created_at":"2026-01-25T19:47:52.712411392-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-psa9","depends_on_id":"tv-wisp-wisp-ebyo","type":"blocks","created_at":"2026-01-25T19:47:53.282538679-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-pvef","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:24:16.633880461-08:00","updated_at":"2026-01-25T17:24:16.633880501-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-pvef","depends_on_id":"tv-wisp-wisp-d08y","type":"parent-child","created_at":"2026-01-25T17:24:16.809536543-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-pvef","depends_on_id":"tv-wisp-wisp-248j","type":"blocks","created_at":"2026-01-25T17:24:16.99160585-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-pysf","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T16:06:21.218082512-08:00","updated_at":"2026-01-25T16:06:21.218082552-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-q0p","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-c035\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-c035 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:45.571211879-08:00","updated_at":"2026-01-25T13:53:47.262224699-08:00","closed_at":"2026-01-25T13:53:47.262224699-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-q0p","depends_on_id":"tv-wisp-wisp-45i","type":"parent-child","created_at":"2026-01-25T13:44:45.577995563-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-q0p","depends_on_id":"tv-wisp-wisp-039","type":"blocks","created_at":"2026-01-25T13:44:45.585395073-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-q1n","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-v0lg should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:30.021401059-08:00","updated_at":"2026-01-25T14:44:49.754318154-08:00","closed_at":"2026-01-25T14:44:49.754318154-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-q1n","depends_on_id":"tv-wisp-wisp-nmn","type":"parent-child","created_at":"2026-01-25T14:38:30.032963372-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-q1n","depends_on_id":"tv-wisp-wisp-pmf","type":"blocks","created_at":"2026-01-25T14:38:30.05179928-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-q30o","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-o168\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-o168 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:47.707018692-08:00","updated_at":"2026-01-25T17:37:47.707018752-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-q30o","depends_on_id":"tv-wisp-wisp-9ksa","type":"parent-child","created_at":"2026-01-25T17:37:47.966444376-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-q30o","depends_on_id":"tv-wisp-wisp-16um","type":"blocks","created_at":"2026-01-25T17:37:48.264272234-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-q428o","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:19:52.884253398-08:00","updated_at":"2026-01-25T22:19:52.884253428-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-q428o","depends_on_id":"tv-wisp-wisp-ep1u6","type":"parent-child","created_at":"2026-01-25T22:19:53.130540364-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-q428o","depends_on_id":"tv-wisp-wisp-8280k","type":"blocks","created_at":"2026-01-25T22:19:54.227133578-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-q42t","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-p5yr)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-p5yr\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:57.546574795-08:00","updated_at":"2026-01-25T19:53:42.279883576-08:00","closed_at":"2026-01-25T19:53:42.279883576-08:00","close_reason":"Extracted 6 helper procs from initTeams to module level, added docstrings","dependencies":[{"issue_id":"tv-wisp-wisp-q42t","depends_on_id":"tv-wisp-wisp-hhw1","type":"parent-child","created_at":"2026-01-25T19:47:57.782279779-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-q42t","depends_on_id":"tv-wisp-wisp-2ij5","type":"blocks","created_at":"2026-01-25T19:47:58.373963465-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-q452","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:38.836224239-08:00","updated_at":"2026-01-25T16:54:38.836224299-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-q452","depends_on_id":"tv-wisp-wisp-i7i6","type":"parent-child","created_at":"2026-01-25T16:54:38.924492754-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-q452","depends_on_id":"tv-wisp-wisp-48a3","type":"blocks","created_at":"2026-01-25T16:54:39.063644806-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-q4tz","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:37:56.128843092-08:00","updated_at":"2026-01-25T21:37:56.128843132-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-q4tz","depends_on_id":"tv-wisp-wisp-rfc8","type":"parent-child","created_at":"2026-01-25T21:37:56.866327868-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-q4tz","depends_on_id":"tv-wisp-wisp-th7i","type":"blocks","created_at":"2026-01-25T21:37:57.786175847-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-q4z6","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-i8sz\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:33:12.904778817-08:00","updated_at":"2026-01-25T17:33:12.904778847-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-q4z6","depends_on_id":"tv-wisp-wisp-bs1f","type":"parent-child","created_at":"2026-01-25T17:33:13.167332789-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-q4z6","depends_on_id":"tv-wisp-wisp-xf47","type":"blocks","created_at":"2026-01-25T17:33:13.435111168-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-q6ts","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-jfi6)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-jfi6\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:41.923204547-08:00","updated_at":"2026-01-25T16:54:41.923204607-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-q6ts","depends_on_id":"tv-wisp-wisp-2w49","type":"parent-child","created_at":"2026-01-25T16:54:41.985513445-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-q6ts","depends_on_id":"tv-wisp-wisp-e709","type":"blocks","created_at":"2026-01-25T16:54:42.130990491-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-q7cu","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-433\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:57.565891235-08:00","updated_at":"2026-01-25T15:04:57.565891265-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-q7cu","depends_on_id":"tv-wisp-wisp-hl2y","type":"parent-child","created_at":"2026-01-25T15:04:57.610312599-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-q7cu","depends_on_id":"tv-wisp-wisp-acc4","type":"blocks","created_at":"2026-01-25T15:04:57.656592884-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-q93v","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-6e991\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:34.710968743-08:00","updated_at":"2026-01-25T20:18:14.028672961-08:00","closed_at":"2026-01-25T20:18:14.028672961-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-q93v","depends_on_id":"tv-wisp-wisp-cj2u","type":"parent-child","created_at":"2026-01-25T20:07:35.621166075-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-q93v","depends_on_id":"tv-wisp-wisp-dxwn","type":"blocks","created_at":"2026-01-25T20:07:36.47782166-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-q9s2","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:52.491547649-08:00","updated_at":"2026-01-25T19:55:55.439339043-08:00","closed_at":"2026-01-25T19:55:55.439339043-08:00","close_reason":"Tests blocked by pre-existing compile error in spawn.nim (tv-wisp-5pvuv). Changes are pure constant extraction refactoring with no logic changes.","dependencies":[{"issue_id":"tv-wisp-wisp-q9s2","depends_on_id":"tv-wisp-wisp-oruc","type":"parent-child","created_at":"2026-01-25T19:47:52.856665776-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-q9s2","depends_on_id":"tv-wisp-wisp-wz32","type":"blocks","created_at":"2026-01-25T19:47:53.433253973-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-qeft","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-oyub should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:45:07.966707231-08:00","updated_at":"2026-01-25T17:55:13.628049384-08:00","closed_at":"2026-01-25T17:55:13.628049384-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-qeft","depends_on_id":"tv-wisp-wisp-n3rx","type":"parent-child","created_at":"2026-01-25T17:45:08.151324188-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-qeft","depends_on_id":"tv-wisp-wisp-ivo9","type":"blocks","created_at":"2026-01-25T17:45:08.528236201-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-qesx","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:13:16.029936988-08:00","updated_at":"2026-01-25T22:16:09.567874088-08:00","closed_at":"2026-01-25T22:16:09.567874088-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-wisp-qh2x","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-z20\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:15:52.549585826-08:00","updated_at":"2026-01-25T19:15:52.549585866-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-qh2x","depends_on_id":"tv-wisp-wisp-zkv0","type":"parent-child","created_at":"2026-01-25T19:15:53.022805376-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-qh2x","depends_on_id":"tv-wisp-wisp-3i6b","type":"blocks","created_at":"2026-01-25T19:15:53.58207431-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-qhaz4","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:12:14.191015987-08:00","updated_at":"2026-01-25T22:12:14.191016017-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-qhaz4","depends_on_id":"tv-wisp-wisp-dbfyj","type":"parent-child","created_at":"2026-01-25T22:12:14.920128918-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-qhaz4","depends_on_id":"tv-wisp-wisp-eyqhr","type":"blocks","created_at":"2026-01-25T22:12:16.017022583-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-qizi","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-8b8).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-8b8\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:21.908375867-08:00","updated_at":"2026-01-25T15:04:21.908375917-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-qizi","depends_on_id":"tv-wisp-wisp-wxnw","type":"parent-child","created_at":"2026-01-25T15:04:21.926621319-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-qizi","depends_on_id":"tv-wisp-wisp-rjqc","type":"blocks","created_at":"2026-01-25T15:04:21.965212152-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-qk4v","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-38ac           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-38ac\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:16.68783318-08:00","updated_at":"2026-01-25T19:17:34.596560743-08:00","closed_at":"2026-01-25T19:17:34.596560743-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-qk4v","depends_on_id":"tv-wisp-wisp-2pyz","type":"parent-child","created_at":"2026-01-25T19:16:16.695640317-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-qkid","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-v0lg\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-v0lg --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:21.058882399-08:00","updated_at":"2026-01-25T19:13:02.920174626-08:00","closed_at":"2026-01-25T19:13:02.920174626-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-qkid","depends_on_id":"tv-wisp-wisp-22vo","type":"parent-child","created_at":"2026-01-25T19:10:21.454381169-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-qkid","depends_on_id":"tv-wisp-wisp-eez8","type":"blocks","created_at":"2026-01-25T19:10:21.882945224-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-qm1ll","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:25:19.473712944-08:00","updated_at":"2026-01-25T22:25:19.473713014-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-qm1ll","depends_on_id":"tv-wisp-wisp-fl6o4","type":"parent-child","created_at":"2026-01-25T22:25:20.421839371-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-qm1ll","depends_on_id":"tv-wisp-wisp-htt8v","type":"blocks","created_at":"2026-01-25T22:25:21.62057215-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-qm9q","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:47.995068475-08:00","updated_at":"2026-01-25T15:29:47.995068555-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-qm9q","depends_on_id":"tv-wisp-wisp-9umu","type":"parent-child","created_at":"2026-01-25T15:29:48.066529963-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-qm9q","depends_on_id":"tv-wisp-wisp-3mcf","type":"blocks","created_at":"2026-01-25T15:29:48.162342009-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-qocq","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-02pb\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:16.032593698-08:00","updated_at":"2026-01-25T19:15:22.363403346-08:00","closed_at":"2026-01-25T19:15:22.363403346-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-qocq","depends_on_id":"tv-wisp-wisp-qesx","type":"parent-child","created_at":"2026-01-25T19:13:16.099284687-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-qocq","depends_on_id":"tv-wisp-wisp-zbpq","type":"blocks","created_at":"2026-01-25T19:13:16.530091074-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-qqlz","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:57:57.425322493-08:00","updated_at":"2026-01-25T19:57:57.425322533-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-qqlz","depends_on_id":"tv-wisp-wisp-rah4","type":"parent-child","created_at":"2026-01-25T19:57:57.812410356-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-qqlz","depends_on_id":"tv-wisp-wisp-nk10","type":"blocks","created_at":"2026-01-25T19:57:58.401126192-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-qrsi","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-bbok\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:32:03.801458433-08:00","updated_at":"2026-01-25T17:32:03.801458464-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-qrsi","depends_on_id":"tv-wisp-wisp-19n1","type":"parent-child","created_at":"2026-01-25T17:32:04.081600404-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-qrsi","depends_on_id":"tv-wisp-wisp-956e","type":"blocks","created_at":"2026-01-25T17:32:04.350910871-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-qvq5","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-3ns).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-3ns\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:53.466065141-08:00","updated_at":"2026-01-25T22:19:32.756298603-08:00","closed_at":"2026-01-25T22:19:32.756298603-08:00","close_reason":"All tests pass including builder flee behavior test","dependencies":[{"issue_id":"tv-wisp-wisp-qvq5","depends_on_id":"tv-wisp-wisp-v9eo","type":"parent-child","created_at":"2026-01-25T19:11:53.587113119-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-qvq5","depends_on_id":"tv-wisp-wisp-93nx","type":"blocks","created_at":"2026-01-25T19:11:54.025187133-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-qycs","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:41.759552405-08:00","updated_at":"2026-01-25T21:57:16.049530043-08:00","closed_at":"2026-01-25T21:57:16.049530043-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-qycs","depends_on_id":"tv-wisp-wisp-lanr","type":"parent-child","created_at":"2026-01-25T21:00:42.081510814-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-qycs","depends_on_id":"tv-wisp-wisp-3px2","type":"blocks","created_at":"2026-01-25T21:00:42.961953741-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-r017","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-6e991\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:34.706215559-08:00","updated_at":"2026-01-25T20:09:11.628920842-08:00","closed_at":"2026-01-25T20:09:11.628920842-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-r017","depends_on_id":"tv-wisp-wisp-cj2u","type":"parent-child","created_at":"2026-01-25T20:07:34.833252518-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-r017","depends_on_id":"tv-wisp-wisp-2v9u","type":"blocks","created_at":"2026-01-25T20:07:35.78940736-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-r026","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:54.805372175-08:00","updated_at":"2026-01-25T15:09:54.805372235-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-r026","depends_on_id":"tv-wisp-wisp-mt9u","type":"parent-child","created_at":"2026-01-25T15:09:54.852801223-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-r026","depends_on_id":"tv-wisp-wisp-ueg2","type":"blocks","created_at":"2026-01-25T15:09:54.920743425-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-r1v","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-cbg\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:54.02607258-08:00","updated_at":"2026-01-25T14:37:54.02607261-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-r1v","depends_on_id":"tv-wisp-wisp-c1i","type":"parent-child","created_at":"2026-01-25T14:37:54.039637246-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-r1v","depends_on_id":"tv-wisp-wisp-ofx","type":"blocks","created_at":"2026-01-25T14:37:54.053593723-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-r2dz","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:31:39.838286614-08:00","updated_at":"2026-01-25T17:31:39.838286654-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-r392","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:41.924000305-08:00","updated_at":"2026-01-25T16:54:41.924000365-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-r392","depends_on_id":"tv-wisp-wisp-2w49","type":"parent-child","created_at":"2026-01-25T16:54:42.020424979-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-r392","depends_on_id":"tv-wisp-wisp-8m7u","type":"blocks","created_at":"2026-01-25T16:54:42.171190833-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-r4fu","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-fwrl\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-fwrl --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:39.843657897-08:00","updated_at":"2026-01-25T17:39:32.677274962-08:00","closed_at":"2026-01-25T17:39:32.677274962-08:00","close_reason":"Committed: feat: Implement Mangonel 1-tile side prong AoE (tv-fwrl)","dependencies":[{"issue_id":"tv-wisp-wisp-r4fu","depends_on_id":"tv-wisp-wisp-r2dz","type":"parent-child","created_at":"2026-01-25T17:31:40.053481732-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-r4fu","depends_on_id":"tv-wisp-wisp-b1ke","type":"blocks","created_at":"2026-01-25T17:31:40.336840046-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-r5ll","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-5o2p\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:55.301173501-08:00","updated_at":"2026-01-25T17:34:55.301173561-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-r5ll","depends_on_id":"tv-wisp-wisp-2t2z","type":"parent-child","created_at":"2026-01-25T17:34:55.599896961-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-r5ll","depends_on_id":"tv-wisp-wisp-yxfu","type":"blocks","created_at":"2026-01-25T17:34:55.874231396-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-r69g","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-fwrl)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-fwrl\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:39.841852535-08:00","updated_at":"2026-01-25T17:37:50.058413523-08:00","closed_at":"2026-01-25T17:37:50.058413523-08:00","close_reason":"Changed Mangonel AoE from 2-tile to 1-tile side prongs per siege_fortifications_plan.md spec.","dependencies":[{"issue_id":"tv-wisp-wisp-r69g","depends_on_id":"tv-wisp-wisp-r2dz","type":"parent-child","created_at":"2026-01-25T17:31:39.939895536-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-r69g","depends_on_id":"tv-wisp-wisp-c53f","type":"blocks","created_at":"2026-01-25T17:31:40.19098858-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-r6ph6","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:19:52.884700951-08:00","updated_at":"2026-01-25T22:19:52.884700991-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-r6ph6","depends_on_id":"tv-wisp-wisp-ep1u6","type":"parent-child","created_at":"2026-01-25T22:19:53.251427587-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-r6ph6","depends_on_id":"tv-wisp-wisp-q428o","type":"blocks","created_at":"2026-01-25T22:19:54.352615443-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-r731o","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (hq-cv-x5kp2)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: hq-cv-x5kp2\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:57.669744577-08:00","updated_at":"2026-01-25T21:54:57.669744607-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-r731o","depends_on_id":"tv-wisp-wisp-i45n5","type":"parent-child","created_at":"2026-01-25T21:54:58.05724719-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-r731o","depends_on_id":"tv-wisp-wisp-7dr6d","type":"blocks","created_at":"2026-01-25T21:54:58.9494729-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-r7vf","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-395fz should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:26.384426314-08:00","updated_at":"2026-01-25T20:17:44.049283557-08:00","closed_at":"2026-01-25T20:17:44.049283557-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-r7vf","depends_on_id":"tv-wisp-wisp-1k5c","type":"parent-child","created_at":"2026-01-25T20:07:27.06026254-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-r7vf","depends_on_id":"tv-wisp-wisp-y87s","type":"blocks","created_at":"2026-01-25T20:07:28.610396798-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-r90u","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-dtqk should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:40:01.323737856-08:00","updated_at":"2026-01-25T17:40:01.323737916-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-r90u","depends_on_id":"tv-wisp-wisp-f2ka","type":"parent-child","created_at":"2026-01-25T17:40:01.560028167-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-r90u","depends_on_id":"tv-wisp-wisp-y53n","type":"blocks","created_at":"2026-01-25T17:40:02.056280138-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ra0f","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-h2uu           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-h2uu\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:09.953434036-08:00","updated_at":"2026-01-25T16:07:45.710354481-08:00","closed_at":"2026-01-25T16:07:45.710354481-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ra0f","depends_on_id":"tv-wisp-wisp-jocg","type":"parent-child","created_at":"2026-01-25T16:07:09.956457481-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rah4","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:57:57.421807551-08:00","updated_at":"2026-01-25T19:57:57.421807591-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-rd1","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:11.987217672-08:00","updated_at":"2026-01-25T14:53:36.700625977-08:00","closed_at":"2026-01-25T14:53:36.700625977-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-rd1","depends_on_id":"tv-wisp-wisp-jdo","type":"parent-child","created_at":"2026-01-25T14:38:11.99924324-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-rd1","depends_on_id":"tv-wisp-wisp-b23","type":"blocks","created_at":"2026-01-25T14:38:12.015660594-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rfc8","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T21:37:56.124361694-08:00","updated_at":"2026-01-25T21:37:56.124361734-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-rgl2","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:47.417476872-08:00","updated_at":"2026-01-25T16:39:52.626053466-08:00","closed_at":"2026-01-25T16:39:52.626053466-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-rgl2","depends_on_id":"tv-wisp-wisp-71un","type":"parent-child","created_at":"2026-01-25T16:34:47.515290458-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-rgl2","depends_on_id":"tv-wisp-wisp-sa6j","type":"blocks","created_at":"2026-01-25T16:34:47.637154276-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rgzx","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-z20           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-z20\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:15:52.54449984-08:00","updated_at":"2026-01-25T19:15:52.54449988-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-rgzx","depends_on_id":"tv-wisp-wisp-zkv0","type":"parent-child","created_at":"2026-01-25T19:15:52.550178583-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rhcv","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-ilh\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-ilh --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:28.584080284-08:00","updated_at":"2026-01-25T17:23:28.584080344-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-rhcv","depends_on_id":"tv-wisp-wisp-1gtx","type":"parent-child","created_at":"2026-01-25T17:23:28.752665002-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-rhcv","depends_on_id":"tv-wisp-wisp-znuc","type":"blocks","created_at":"2026-01-25T17:23:28.92897182-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ri9m","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:26.387397621-08:00","updated_at":"2026-01-25T20:18:11.95237718-08:00","closed_at":"2026-01-25T20:18:11.95237718-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ri9m","depends_on_id":"tv-wisp-wisp-1k5c","type":"parent-child","created_at":"2026-01-25T20:07:27.439923149-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ri9m","depends_on_id":"tv-wisp-wisp-kuma","type":"blocks","created_at":"2026-01-25T20:07:28.870675099-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rihb","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-gc5x).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-gc5x\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:19.120545747-08:00","updated_at":"2026-01-25T16:10:36.203672345-08:00","closed_at":"2026-01-25T16:10:36.203672345-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-rihb","depends_on_id":"tv-wisp-wisp-inif","type":"parent-child","created_at":"2026-01-25T16:07:19.155166044-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-rihb","depends_on_id":"tv-wisp-wisp-e9vw","type":"blocks","created_at":"2026-01-25T16:07:19.267933304-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rixkn","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:25:19.471509142-08:00","updated_at":"2026-01-25T22:25:19.471509202-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-rixkn","depends_on_id":"tv-wisp-wisp-fl6o4","type":"parent-child","created_at":"2026-01-25T22:25:20.040093656-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-rixkn","depends_on_id":"tv-wisp-wisp-6pl46","type":"blocks","created_at":"2026-01-25T22:25:21.228923634-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rjqc","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-8b8\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:21.90786329-08:00","updated_at":"2026-01-25T15:04:21.90786335-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-rjqc","depends_on_id":"tv-wisp-wisp-wxnw","type":"parent-child","created_at":"2026-01-25T15:04:21.91845311-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-rjqc","depends_on_id":"tv-wisp-wisp-xnh8","type":"blocks","created_at":"2026-01-25T15:04:21.960486119-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rkg","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-cbg\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:54.024860469-08:00","updated_at":"2026-01-25T14:37:54.024860509-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-rkg","depends_on_id":"tv-wisp-wisp-c1i","type":"parent-child","created_at":"2026-01-25T14:37:54.028196795-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-rkg","depends_on_id":"tv-wisp-wisp-s94","type":"blocks","created_at":"2026-01-25T14:37:54.041345545-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rkp7","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:54.805726416-08:00","updated_at":"2026-01-25T15:09:54.805726486-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-rkp7","depends_on_id":"tv-wisp-wisp-mt9u","type":"parent-child","created_at":"2026-01-25T15:09:54.861145366-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-rkp7","depends_on_id":"tv-wisp-wisp-r026","type":"blocks","created_at":"2026-01-25T15:09:54.929026955-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rlj4","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:39.647589109-08:00","updated_at":"2026-01-25T15:04:39.647589169-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-rlj4","depends_on_id":"tv-wisp-wisp-p4e1","type":"parent-child","created_at":"2026-01-25T15:04:39.674072218-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rn6c0","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show hq-cv-bsv3u           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: hq-cv-bsv3u\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:17.682225464-08:00","updated_at":"2026-01-25T21:54:17.682225505-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-rn6c0","depends_on_id":"tv-wisp-wisp-zyr6q","type":"parent-child","created_at":"2026-01-25T21:54:17.689486707-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rnfo","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:20:52.494009352-08:00","updated_at":"2026-01-25T19:20:52.494009402-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-rnfo","depends_on_id":"tv-wisp-wisp-wkqr","type":"parent-child","created_at":"2026-01-25T19:20:52.89039486-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-rnfo","depends_on_id":"tv-wisp-wisp-h4a3","type":"blocks","created_at":"2026-01-25T19:20:53.393871278-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rnig","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-v9cm\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:16:29.376851133-08:00","updated_at":"2026-01-25T15:16:29.376851173-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-rnig","depends_on_id":"tv-wisp-wisp-xsuu","type":"parent-child","created_at":"2026-01-25T15:16:29.446265234-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-rnig","depends_on_id":"tv-wisp-wisp-ujm1","type":"blocks","created_at":"2026-01-25T15:16:29.517426112-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rnp5","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-uor5\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:15.600328959-08:00","updated_at":"2026-01-25T17:31:15.600329009-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-rnp5","depends_on_id":"tv-wisp-wisp-ce9t","type":"parent-child","created_at":"2026-01-25T17:31:15.851427027-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-rnp5","depends_on_id":"tv-wisp-wisp-4rt5","type":"blocks","created_at":"2026-01-25T17:31:16.093751627-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rqt83","title":"Check refinery mail","description":"Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: \u003cbranch\u003e\n# Issue: \u003cissue-id\u003e\n# Polecat: \u003cpolecat-name\u003e\n# MR: \u003cmr-bead-id\u003e\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:46:06.930461854-08:00","updated_at":"2026-01-25T22:46:06.930461894-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-rqt83","depends_on_id":"tv-wisp-wisp-rqw9g","type":"parent-child","created_at":"2026-01-25T22:46:06.936178027-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rqw9g","title":"mol-refinery-patrol","description":"Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to main one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────\u003e│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch \u0026 rebase            │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge \u0026 push              │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │\u003c─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T22:46:06.929394246-08:00","updated_at":"2026-01-25T22:46:06.929394286-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-rrbq","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-puj).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-puj\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:52.557666746-08:00","updated_at":"2026-01-25T19:12:25.243772284-08:00","closed_at":"2026-01-25T19:12:25.243772284-08:00","close_reason":"Work already completed and merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-rrbq","depends_on_id":"tv-wisp-wisp-kls4","type":"parent-child","created_at":"2026-01-25T19:10:52.671052778-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-rrbq","depends_on_id":"tv-wisp-wisp-5idx","type":"blocks","created_at":"2026-01-25T19:10:53.154494826-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-rtdi","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-puj should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:52.558693223-08:00","updated_at":"2026-01-25T19:12:25.737176686-08:00","closed_at":"2026-01-25T19:12:25.737176686-08:00","close_reason":"Work already completed and merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-rtdi","depends_on_id":"tv-wisp-wisp-kls4","type":"parent-child","created_at":"2026-01-25T19:10:52.784239898-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-rtdi","depends_on_id":"tv-wisp-wisp-n92d","type":"blocks","created_at":"2026-01-25T19:10:53.266811792-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-s0rr","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:16:29.376046062-08:00","updated_at":"2026-01-25T15:16:29.376046102-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-s0rr","depends_on_id":"tv-wisp-wisp-xsuu","type":"parent-child","created_at":"2026-01-25T15:16:29.420357433-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-s0rr","depends_on_id":"tv-wisp-wisp-116p","type":"blocks","created_at":"2026-01-25T15:16:29.490576575-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-s1bc","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-upwa\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:38.834582268-08:00","updated_at":"2026-01-25T16:54:38.834582319-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-s1bc","depends_on_id":"tv-wisp-wisp-i7i6","type":"parent-child","created_at":"2026-01-25T16:54:38.85920733-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-s1bc","depends_on_id":"tv-wisp-wisp-appc","type":"blocks","created_at":"2026-01-25T16:54:38.989813815-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-s2hq","title":"Check refinery mail","description":"Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: \u003cbranch\u003e\n# Issue: \u003cissue-id\u003e\n# Polecat: \u003cpolecat-name\u003e\n# MR: \u003cmr-bead-id\u003e\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:41.221122224-08:00","updated_at":"2026-01-25T21:11:41.221122254-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-s2hq","depends_on_id":"tv-wisp-wisp-jva9","type":"parent-child","created_at":"2026-01-25T21:11:41.226304944-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-s45m","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:10.491086525-08:00","updated_at":"2026-01-25T21:00:10.491086585-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-s45m","depends_on_id":"tv-wisp-wisp-u7fv","type":"parent-child","created_at":"2026-01-25T21:00:11.3302299-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-s45m","depends_on_id":"tv-wisp-wisp-2h7f","type":"blocks","created_at":"2026-01-25T21:00:12.388433075-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-s6r3","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-02f7\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:45.032989629-08:00","updated_at":"2026-01-25T16:54:45.032989689-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-s6r3","depends_on_id":"tv-wisp-wisp-mylm","type":"parent-child","created_at":"2026-01-25T16:54:45.200999592-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-s6r3","depends_on_id":"tv-wisp-wisp-ukyj","type":"blocks","created_at":"2026-01-25T16:54:45.353573605-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-s7ov","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-h2uu should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:09.954497892-08:00","updated_at":"2026-01-25T16:08:56.054744569-08:00","closed_at":"2026-01-25T16:08:56.054744569-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-s7ov","depends_on_id":"tv-wisp-wisp-jocg","type":"parent-child","created_at":"2026-01-25T16:07:10.01668583-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-s7ov","depends_on_id":"tv-wisp-wisp-sdyy","type":"blocks","created_at":"2026-01-25T16:07:10.134596604-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-s881","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-318k\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:20:52.48980407-08:00","updated_at":"2026-01-25T19:20:52.489804111-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-s881","depends_on_id":"tv-wisp-wisp-wkqr","type":"parent-child","created_at":"2026-01-25T19:20:52.563000607-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-s881","depends_on_id":"tv-wisp-wisp-fi67","type":"blocks","created_at":"2026-01-25T19:20:53.086532281-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-s89e","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-cx6z).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-cx6z\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:21:13.444332625-08:00","updated_at":"2026-01-25T20:21:13.444332685-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-s89e","depends_on_id":"tv-wisp-wisp-5nrw","type":"parent-child","created_at":"2026-01-25T20:21:13.618351869-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-s89e","depends_on_id":"tv-wisp-wisp-zuyo","type":"blocks","created_at":"2026-01-25T20:21:14.299026571-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-s8bnc","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:04:38.993960155-08:00","updated_at":"2026-01-25T22:04:38.993960215-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-s8bnc","depends_on_id":"tv-wisp-wisp-0u79m","type":"parent-child","created_at":"2026-01-25T22:04:39.585090932-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-s8bnc","depends_on_id":"tv-wisp-wisp-thxik","type":"blocks","created_at":"2026-01-25T22:04:40.633897191-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-s94","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-cbg           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-cbg\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:54.024650072-08:00","updated_at":"2026-01-25T14:37:54.024650122-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-s94","depends_on_id":"tv-wisp-wisp-c1i","type":"parent-child","created_at":"2026-01-25T14:37:54.026391523-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-s9x","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:56:57.64367974-08:00","updated_at":"2026-01-25T14:56:57.64367978-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-s9x","depends_on_id":"tv-wisp-wisp-d0l","type":"parent-child","created_at":"2026-01-25T14:56:57.672931973-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-sa6j","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:47.417092013-08:00","updated_at":"2026-01-25T16:39:37.254383062-08:00","closed_at":"2026-01-25T16:39:37.254383062-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-sa6j","depends_on_id":"tv-wisp-wisp-71un","type":"parent-child","created_at":"2026-01-25T16:34:47.500347538-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-sa6j","depends_on_id":"tv-wisp-wisp-6zhy","type":"blocks","created_at":"2026-01-25T16:34:47.621996835-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-satn","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-c85p\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:15:24.710855148-08:00","updated_at":"2026-01-25T20:15:24.710855188-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-satn","depends_on_id":"tv-wisp-wisp-40l7","type":"parent-child","created_at":"2026-01-25T20:15:24.796888508-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-satn","depends_on_id":"tv-wisp-wisp-v09c","type":"blocks","created_at":"2026-01-25T20:15:25.459923978-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-scm6","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-v0lg should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:21.05785458-08:00","updated_at":"2026-01-25T19:12:57.286193653-08:00","closed_at":"2026-01-25T19:12:57.286193653-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-scm6","depends_on_id":"tv-wisp-wisp-22vo","type":"parent-child","created_at":"2026-01-25T19:10:21.278057097-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-scm6","depends_on_id":"tv-wisp-wisp-cea0","type":"blocks","created_at":"2026-01-25T19:10:21.719490811-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-sd3a","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-v9cm).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-v9cm\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:16:29.375307134-08:00","updated_at":"2026-01-25T15:16:29.375307174-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-sd3a","depends_on_id":"tv-wisp-wisp-xsuu","type":"parent-child","created_at":"2026-01-25T15:16:29.394893219-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-sd3a","depends_on_id":"tv-wisp-wisp-jjf8","type":"blocks","created_at":"2026-01-25T15:16:29.463617975-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-sdyy","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-h2uu)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-h2uu\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:09.954259988-08:00","updated_at":"2026-01-25T16:08:44.729621596-08:00","closed_at":"2026-01-25T16:08:44.729621596-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-sdyy","depends_on_id":"tv-wisp-wisp-jocg","type":"parent-child","created_at":"2026-01-25T16:07:10.00197825-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-sdyy","depends_on_id":"tv-wisp-wisp-ueon","type":"blocks","created_at":"2026-01-25T16:07:10.121608725-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-seb","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-z20           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-z20\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:44.986459689-08:00","updated_at":"2026-01-25T13:45:59.834029924-08:00","closed_at":"2026-01-25T13:45:59.834029924-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-seb","depends_on_id":"tv-wisp-wisp-548","type":"parent-child","created_at":"2026-01-25T13:44:44.988181333-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-sez1","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:48:28.901286284-08:00","updated_at":"2026-01-25T17:48:28.901286324-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-sez1","depends_on_id":"tv-wisp-wisp-kic6","type":"parent-child","created_at":"2026-01-25T17:48:29.169853225-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-sez1","depends_on_id":"tv-wisp-wisp-5g1z","type":"blocks","created_at":"2026-01-25T17:48:29.560665426-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-sh19","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:15:52.548314873-08:00","updated_at":"2026-01-25T19:15:52.548314923-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-sh19","depends_on_id":"tv-wisp-wisp-zkv0","type":"parent-child","created_at":"2026-01-25T19:15:52.91023718-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-sh19","depends_on_id":"tv-wisp-wisp-jcfq","type":"blocks","created_at":"2026-01-25T19:15:53.439762519-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-shk6t","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:12:14.192138102-08:00","updated_at":"2026-01-25T22:12:14.192138142-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-shk6t","depends_on_id":"tv-wisp-wisp-dbfyj","type":"parent-child","created_at":"2026-01-25T22:12:15.159567232-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-shk6t","depends_on_id":"tv-wisp-wisp-it46v","type":"blocks","created_at":"2026-01-25T22:12:16.262801672-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-sib4","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-ilh should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:26:18.77341353-08:00","updated_at":"2026-01-25T17:26:18.77341358-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-sib4","depends_on_id":"tv-wisp-wisp-exo0","type":"parent-child","created_at":"2026-01-25T17:26:18.883297807-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-sib4","depends_on_id":"tv-wisp-wisp-7aes","type":"blocks","created_at":"2026-01-25T17:26:19.089032024-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-sjb5","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-395fz\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-395fz --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:26.388847668-08:00","updated_at":"2026-01-25T20:18:30.634430384-08:00","closed_at":"2026-01-25T20:18:30.634430384-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-sjb5","depends_on_id":"tv-wisp-wisp-1k5c","type":"parent-child","created_at":"2026-01-25T20:07:27.671119376-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-sjb5","depends_on_id":"tv-wisp-wisp-ri9m","type":"blocks","created_at":"2026-01-25T20:07:29.027901068-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-skdy","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:33:12.903880379-08:00","updated_at":"2026-01-25T17:41:48.120292333-08:00","closed_at":"2026-01-25T17:41:48.120292333-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-skdy","depends_on_id":"tv-wisp-wisp-bs1f","type":"parent-child","created_at":"2026-01-25T17:33:13.072377924-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-skdy","depends_on_id":"tv-wisp-wisp-u37h","type":"blocks","created_at":"2026-01-25T17:33:13.330799035-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-smc2","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-k0or\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-k0or --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:23:52.355936803-08:00","updated_at":"2026-01-25T19:23:52.355936863-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-smc2","depends_on_id":"tv-wisp-wisp-hd5u","type":"parent-child","created_at":"2026-01-25T19:23:52.816230155-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-smc2","depends_on_id":"tv-wisp-wisp-d2gv","type":"blocks","created_at":"2026-01-25T19:23:53.336824977-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-snk1","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-zngh).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-zngh\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:50.537675105-08:00","updated_at":"2026-01-25T16:34:50.537675145-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-snk1","depends_on_id":"tv-wisp-wisp-58fz","type":"parent-child","created_at":"2026-01-25T16:34:50.574877832-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-snk1","depends_on_id":"tv-wisp-wisp-2bsy","type":"blocks","created_at":"2026-01-25T16:34:50.742955758-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-snwtg","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T22:31:06.900564865-08:00","updated_at":"2026-01-25T22:32:02.899489895-08:00","closed_at":"2026-01-25T22:32:02.899489895-08:00","close_reason":"No active polecats.","dependencies":[{"issue_id":"tv-wisp-wisp-snwtg","depends_on_id":"tv-wisp-wisp-4nh4e","type":"parent-child","created_at":"2026-01-25T22:31:07.2895833-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-snwtg","depends_on_id":"tv-wisp-wisp-u9o1i","type":"blocks","created_at":"2026-01-25T22:31:08.463856925-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-sq5","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:56:39.841687189-08:00","updated_at":"2026-01-25T14:56:39.841687219-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-sq5","depends_on_id":"tv-wisp-wisp-g5f","type":"parent-child","created_at":"2026-01-25T14:56:39.857930639-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-sq5","depends_on_id":"tv-wisp-wisp-4ut","type":"blocks","created_at":"2026-01-25T14:56:39.89079817-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-srgi","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-02pb).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-02pb\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:16.033486896-08:00","updated_at":"2026-01-25T19:16:58.00930381-08:00","closed_at":"2026-01-25T19:16:58.00930381-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-srgi","depends_on_id":"tv-wisp-wisp-qesx","type":"parent-child","created_at":"2026-01-25T19:13:16.152482993-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-srgi","depends_on_id":"tv-wisp-wisp-qocq","type":"blocks","created_at":"2026-01-25T19:13:16.584669598-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-svrwl","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:25:19.469421808-08:00","updated_at":"2026-01-25T22:25:19.469421848-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-svrwl","depends_on_id":"tv-wisp-wisp-fl6o4","type":"parent-child","created_at":"2026-01-25T22:25:19.766300827-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-svrwl","depends_on_id":"tv-wisp-wisp-xeezs","type":"blocks","created_at":"2026-01-25T22:25:20.963328878-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-sw37","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-8b8           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-8b8\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:54.802849086-08:00","updated_at":"2026-01-25T15:09:54.802849126-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-sw37","depends_on_id":"tv-wisp-wisp-mt9u","type":"parent-child","created_at":"2026-01-25T15:09:54.807207019-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-sxij","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:38.471123827-08:00","updated_at":"2026-01-25T21:11:38.471123878-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-sxij","depends_on_id":"tv-wisp-wisp-obm9","type":"parent-child","created_at":"2026-01-25T21:11:38.865636252-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-sxij","depends_on_id":"tv-wisp-wisp-iww0","type":"blocks","created_at":"2026-01-25T21:11:39.75209419-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-sy48","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-gddu)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-gddu\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:46:56.902123783-08:00","updated_at":"2026-01-25T17:46:56.902123823-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-sy48","depends_on_id":"tv-wisp-wisp-l96l","type":"parent-child","created_at":"2026-01-25T17:46:57.061933838-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-sy48","depends_on_id":"tv-wisp-wisp-ga88","type":"blocks","created_at":"2026-01-25T17:46:57.459704399-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-szdz","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:41.224652678-08:00","updated_at":"2026-01-25T21:11:41.224652708-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-szdz","depends_on_id":"tv-wisp-wisp-jva9","type":"parent-child","created_at":"2026-01-25T21:11:42.09598688-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-szdz","depends_on_id":"tv-wisp-wisp-acoo","type":"blocks","created_at":"2026-01-25T21:11:43.107325048-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-szhjx","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:12:14.188205649-08:00","updated_at":"2026-01-25T22:12:14.188205689-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-szhjx","depends_on_id":"tv-wisp-wisp-dbfyj","type":"parent-child","created_at":"2026-01-25T22:12:14.19323531-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-szi","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:30.021573014-08:00","updated_at":"2026-01-25T14:45:33.389605602-08:00","closed_at":"2026-01-25T14:45:33.389605602-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-szi","depends_on_id":"tv-wisp-wisp-nmn","type":"parent-child","created_at":"2026-01-25T14:38:30.035240813-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-szi","depends_on_id":"tv-wisp-wisp-q1n","type":"blocks","created_at":"2026-01-25T14:38:30.05428837-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-t1g2","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:06.918146181-08:00","updated_at":"2026-01-25T21:00:06.918146242-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-t1g2","depends_on_id":"tv-wisp-wisp-6imy","type":"parent-child","created_at":"2026-01-25T21:00:07.109864657-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-t1g2","depends_on_id":"tv-wisp-wisp-t6l5","type":"blocks","created_at":"2026-01-25T21:00:07.989486362-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-t1yt","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:36.717078919-08:00","updated_at":"2026-01-25T15:09:36.717078979-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-t1yt","depends_on_id":"tv-wisp-wisp-f3bu","type":"parent-child","created_at":"2026-01-25T15:09:36.773979615-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-t1yt","depends_on_id":"tv-wisp-wisp-0ozn","type":"blocks","created_at":"2026-01-25T15:09:36.834440236-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-t344","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-gc5x)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-gc5x\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:19.121017328-08:00","updated_at":"2026-01-25T16:10:36.30109123-08:00","closed_at":"2026-01-25T16:10:36.30109123-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-t344","depends_on_id":"tv-wisp-wisp-inif","type":"parent-child","created_at":"2026-01-25T16:07:19.169396122-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-t344","depends_on_id":"tv-wisp-wisp-rihb","type":"blocks","created_at":"2026-01-25T16:07:19.283231957-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-t52jy","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:19:52.887656107-08:00","updated_at":"2026-01-25T22:19:52.887656147-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-t52jy","depends_on_id":"tv-wisp-wisp-ep1u6","type":"parent-child","created_at":"2026-01-25T22:19:53.982916227-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-t52jy","depends_on_id":"tv-wisp-wisp-ba3xq","type":"blocks","created_at":"2026-01-25T22:19:55.111536023-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-t5ze","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:52.92275109-08:00","updated_at":"2026-01-25T17:26:48.179958397-08:00","closed_at":"2026-01-25T17:26:48.179958397-08:00","close_reason":"N/A - duplicate of tv-r0vv, already merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-t5ze","depends_on_id":"tv-wisp-wisp-6pbk","type":"parent-child","created_at":"2026-01-25T17:23:53.037390078-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-t5ze","depends_on_id":"tv-wisp-wisp-amcn","type":"blocks","created_at":"2026-01-25T17:23:53.211571246-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-t6l5","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:06.917474837-08:00","updated_at":"2026-01-25T21:00:06.917474908-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-t6l5","depends_on_id":"tv-wisp-wisp-6imy","type":"parent-child","created_at":"2026-01-25T21:00:07.020258212-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-t6l5","depends_on_id":"tv-wisp-wisp-h1hp","type":"blocks","created_at":"2026-01-25T21:00:07.889451501-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-t7j2d","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:59:15.399550692-08:00","updated_at":"2026-01-25T21:59:15.399550732-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-t7j2d","depends_on_id":"tv-wisp-wisp-9y6rc","type":"parent-child","created_at":"2026-01-25T21:59:15.863511934-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-t7j2d","depends_on_id":"tv-wisp-wisp-guyft","type":"blocks","created_at":"2026-01-25T21:59:16.894440066-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-t7yc","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-ilh\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:28.581300683-08:00","updated_at":"2026-01-25T17:23:28.581300753-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-t7yc","depends_on_id":"tv-wisp-wisp-1gtx","type":"parent-child","created_at":"2026-01-25T17:23:28.61650795-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-t7yc","depends_on_id":"tv-wisp-wisp-ymb5","type":"blocks","created_at":"2026-01-25T17:23:28.796283485-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-t97at","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:06:20.677091718-08:00","updated_at":"2026-01-25T22:06:20.677091758-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-t97at","depends_on_id":"tv-wisp-wisp-6rbz8","type":"parent-child","created_at":"2026-01-25T22:06:21.368725453-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-t97at","depends_on_id":"tv-wisp-wisp-z3mz8","type":"blocks","created_at":"2026-01-25T22:06:22.425779233-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-taqt","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-32y6)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-32y6\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:28.159864663-08:00","updated_at":"2026-01-25T16:10:51.933532516-08:00","closed_at":"2026-01-25T16:10:51.933532516-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-taqt","depends_on_id":"tv-wisp-wisp-59hk","type":"parent-child","created_at":"2026-01-25T16:07:28.216947568-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-taqt","depends_on_id":"tv-wisp-wisp-uwcw","type":"blocks","created_at":"2026-01-25T16:07:28.33765965-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tc1y","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:30:06.227763405-08:00","updated_at":"2026-01-25T15:30:06.227763435-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-tc1y","depends_on_id":"tv-wisp-wisp-x8yu","type":"parent-child","created_at":"2026-01-25T15:30:06.291890734-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-tc1y","depends_on_id":"tv-wisp-wisp-bscu","type":"blocks","created_at":"2026-01-25T15:30:06.386229193-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tcnq","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T20:20:28.754445958-08:00","updated_at":"2026-01-25T20:20:28.754445998-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-te09","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-m1fr           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-m1fr\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:41.663191593-08:00","updated_at":"2026-01-25T17:37:33.099046499-08:00","closed_at":"2026-01-25T17:37:33.099046499-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-te09","depends_on_id":"tv-wisp-wisp-kb77","type":"parent-child","created_at":"2026-01-25T17:34:41.666344833-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tf7g","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:57:16.179342571-08:00","updated_at":"2026-01-25T14:57:16.179342611-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-tf7g","depends_on_id":"tv-wisp-wisp-l8h","type":"parent-child","created_at":"2026-01-25T14:57:16.207804575-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-tf7g","depends_on_id":"tv-wisp-wisp-324k","type":"blocks","created_at":"2026-01-25T14:57:16.242756925-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tft","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:36.495974409-08:00","updated_at":"2026-01-25T14:44:03.636090372-08:00","closed_at":"2026-01-25T14:44:03.636090372-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-tft","depends_on_id":"tv-wisp-wisp-lw5","type":"parent-child","created_at":"2026-01-25T14:37:36.506072061-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-tft","depends_on_id":"tv-wisp-wisp-mwr","type":"blocks","created_at":"2026-01-25T14:37:36.517697112-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tg1yh","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:59:15.398567071-08:00","updated_at":"2026-01-25T21:59:15.398567111-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-tg1yh","depends_on_id":"tv-wisp-wisp-9y6rc","type":"parent-child","created_at":"2026-01-25T21:59:15.632847182-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-tg1yh","depends_on_id":"tv-wisp-wisp-tjuot","type":"blocks","created_at":"2026-01-25T21:59:16.660273743-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tg8h","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-eov5\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:10.043249642-08:00","updated_at":"2026-01-25T17:41:10.043249712-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-tg8h","depends_on_id":"tv-wisp-wisp-wv5q","type":"parent-child","created_at":"2026-01-25T17:41:10.384916683-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-tg8h","depends_on_id":"tv-wisp-wisp-6oei","type":"blocks","created_at":"2026-01-25T17:41:10.725112426-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-th7i","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:37:56.128389598-08:00","updated_at":"2026-01-25T21:37:56.128389638-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-th7i","depends_on_id":"tv-wisp-wisp-rfc8","type":"parent-child","created_at":"2026-01-25T21:37:56.766891591-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-th7i","depends_on_id":"tv-wisp-wisp-29ar","type":"blocks","created_at":"2026-01-25T21:37:57.68311087-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-thca","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:16:29.376324862-08:00","updated_at":"2026-01-25T15:16:29.376324892-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-thca","depends_on_id":"tv-wisp-wisp-xsuu","type":"parent-child","created_at":"2026-01-25T15:16:29.428935405-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-thca","depends_on_id":"tv-wisp-wisp-s0rr","type":"blocks","created_at":"2026-01-25T15:16:29.499566545-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-thxik","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:04:38.993300489-08:00","updated_at":"2026-01-25T22:04:38.993300549-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-thxik","depends_on_id":"tv-wisp-wisp-0u79m","type":"parent-child","created_at":"2026-01-25T22:04:39.469830089-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-thxik","depends_on_id":"tv-wisp-wisp-opd6l","type":"blocks","created_at":"2026-01-25T22:04:40.517837003-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-thyd","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-wdia           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-wdia\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:37:28.488714372-08:00","updated_at":"2026-01-25T17:37:28.488714442-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-thyd","depends_on_id":"tv-wisp-wisp-08mh","type":"parent-child","created_at":"2026-01-25T17:37:28.493410743-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tjuot","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:59:15.398050319-08:00","updated_at":"2026-01-25T21:59:15.398050359-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-tjuot","depends_on_id":"tv-wisp-wisp-9y6rc","type":"parent-child","created_at":"2026-01-25T21:59:15.518228565-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-tjuot","depends_on_id":"tv-wisp-wisp-0e1o5","type":"blocks","created_at":"2026-01-25T21:59:16.545893124-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tjzui","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:46:06.934625256-08:00","updated_at":"2026-01-25T22:46:06.934625296-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-tjzui","depends_on_id":"tv-wisp-wisp-rqw9g","type":"parent-child","created_at":"2026-01-25T22:46:08.062713029-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-tjzui","depends_on_id":"tv-wisp-wisp-gdm0o","type":"blocks","created_at":"2026-01-25T22:46:09.40600671-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tltx","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:25:24.606593196-08:00","updated_at":"2026-01-25T19:25:24.606593226-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-tltx","depends_on_id":"tv-wisp-wisp-y86p","type":"parent-child","created_at":"2026-01-25T19:25:25.038039368-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-tltx","depends_on_id":"tv-wisp-wisp-akl9","type":"blocks","created_at":"2026-01-25T19:25:25.577725186-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tmzn","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-y1kfh\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:40.888140979-08:00","updated_at":"2026-01-25T20:09:08.041815554-08:00","closed_at":"2026-01-25T20:09:08.041815554-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-tmzn","depends_on_id":"tv-wisp-wisp-oa0y","type":"parent-child","created_at":"2026-01-25T20:07:40.996824403-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-tmzn","depends_on_id":"tv-wisp-wisp-zs85","type":"blocks","created_at":"2026-01-25T20:07:41.748380054-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-to2k","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-gddu\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-gddu --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:46:56.903428299-08:00","updated_at":"2026-01-25T17:46:56.903428339-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-to2k","depends_on_id":"tv-wisp-wisp-l96l","type":"parent-child","created_at":"2026-01-25T17:46:57.264419552-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-to2k","depends_on_id":"tv-wisp-wisp-lyrd","type":"blocks","created_at":"2026-01-25T17:46:57.663480864-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tos","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-agd\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:35:55.221625802-08:00","updated_at":"2026-01-25T14:35:55.221625832-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-tos","depends_on_id":"tv-wisp-wisp-9yt","type":"parent-child","created_at":"2026-01-25T14:35:55.224572039-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-tos","depends_on_id":"tv-wisp-wisp-9it","type":"blocks","created_at":"2026-01-25T14:35:55.234253531-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tpw6a","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:06:20.678405456-08:00","updated_at":"2026-01-25T22:06:20.678405496-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-tpw6a","depends_on_id":"tv-wisp-wisp-6rbz8","type":"parent-child","created_at":"2026-01-25T22:06:21.714398866-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-tpw6a","depends_on_id":"tv-wisp-wisp-j7tm9","type":"blocks","created_at":"2026-01-25T22:06:22.779144028-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-trc8","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-ilh)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-ilh\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:27:22.430084525-08:00","updated_at":"2026-01-25T17:27:22.430084575-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-trc8","depends_on_id":"tv-wisp-wisp-jyha","type":"parent-child","created_at":"2026-01-25T17:27:22.524049864-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-trc8","depends_on_id":"tv-wisp-wisp-vbus","type":"blocks","created_at":"2026-01-25T17:27:22.727091632-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tsh1","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:52.559093911-08:00","updated_at":"2026-01-25T19:12:31.526566319-08:00","closed_at":"2026-01-25T19:12:31.526566319-08:00","close_reason":"Work already completed and merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-tsh1","depends_on_id":"tv-wisp-wisp-kls4","type":"parent-child","created_at":"2026-01-25T19:10:52.84261006-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-tsh1","depends_on_id":"tv-wisp-wisp-rtdi","type":"blocks","created_at":"2026-01-25T19:10:53.327254183-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ttuv","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:22:12.959209596-08:00","updated_at":"2026-01-25T19:22:12.959209636-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ttuv","depends_on_id":"tv-wisp-wisp-zver","type":"parent-child","created_at":"2026-01-25T19:22:13.268525505-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ttuv","depends_on_id":"tv-wisp-wisp-3wko","type":"blocks","created_at":"2026-01-25T19:22:13.802131199-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tv1g","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-cbg\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:51.065125312-08:00","updated_at":"2026-01-25T19:15:40.149876881-08:00","closed_at":"2026-01-25T19:15:40.149876881-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-tv1g","depends_on_id":"tv-wisp-wisp-v2zi","type":"parent-child","created_at":"2026-01-25T19:13:51.126343853-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-tv1g","depends_on_id":"tv-wisp-wisp-49aa","type":"blocks","created_at":"2026-01-25T19:13:51.612005121-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tvd","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-02pb)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-02pb\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:11.986842233-08:00","updated_at":"2026-01-25T14:44:02.119658571-08:00","closed_at":"2026-01-25T14:44:02.119658571-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-tvd","depends_on_id":"tv-wisp-wisp-jdo","type":"parent-child","created_at":"2026-01-25T14:38:11.99484442-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-tvd","depends_on_id":"tv-wisp-wisp-ajc","type":"blocks","created_at":"2026-01-25T14:38:12.011649737-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tvyg","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-jd9\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-jd9 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:25:31.737217608-08:00","updated_at":"2026-01-25T17:31:26.732896991-08:00","closed_at":"2026-01-25T17:31:26.732896991-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-tvyg","depends_on_id":"tv-wisp-wisp-mdl6","type":"parent-child","created_at":"2026-01-25T17:25:31.9119483-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-tvyg","depends_on_id":"tv-wisp-wisp-boed","type":"blocks","created_at":"2026-01-25T17:25:32.102420898-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tw7q","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:15:24.712844963-08:00","updated_at":"2026-01-25T20:15:24.712845003-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-tw7q","depends_on_id":"tv-wisp-wisp-40l7","type":"parent-child","created_at":"2026-01-25T20:15:25.205558979-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-tw7q","depends_on_id":"tv-wisp-wisp-onxs","type":"blocks","created_at":"2026-01-25T20:15:25.870874075-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tw96","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-z9d7 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:07:58.872992345-08:00","updated_at":"2026-01-25T15:07:58.872992375-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-tw96","depends_on_id":"tv-wisp-wisp-hroa","type":"parent-child","created_at":"2026-01-25T15:07:58.89984272-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-tw96","depends_on_id":"tv-wisp-wisp-3zd8","type":"blocks","created_at":"2026-01-25T15:07:58.967026426-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-twx5b","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:04:38.991808842-08:00","updated_at":"2026-01-25T22:04:38.991808903-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-twx5b","depends_on_id":"tv-wisp-wisp-0u79m","type":"parent-child","created_at":"2026-01-25T22:04:39.239553713-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-twx5b","depends_on_id":"tv-wisp-wisp-jwsg2","type":"blocks","created_at":"2026-01-25T22:04:40.282218942-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tx40","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:38.468269757-08:00","updated_at":"2026-01-25T21:11:38.468269807-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-tx40","depends_on_id":"tv-wisp-wisp-obm9","type":"parent-child","created_at":"2026-01-25T21:11:38.475415573-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tya1","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:16.035798332-08:00","updated_at":"2026-01-25T19:18:14.308732426-08:00","closed_at":"2026-01-25T19:18:14.308732426-08:00","close_reason":"N/A - work already merged","dependencies":[{"issue_id":"tv-wisp-wisp-tya1","depends_on_id":"tv-wisp-wisp-qesx","type":"parent-child","created_at":"2026-01-25T19:13:16.37037571-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-tya1","depends_on_id":"tv-wisp-wisp-2wm1","type":"blocks","created_at":"2026-01-25T19:13:16.812332456-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-tzba9","title":"Check for more work","description":"More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:46:06.93367551-08:00","updated_at":"2026-01-25T22:46:06.93367555-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-tzba9","depends_on_id":"tv-wisp-wisp-rqw9g","type":"parent-child","created_at":"2026-01-25T22:46:07.790839484-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-tzba9","depends_on_id":"tv-wisp-wisp-5ypiz","type":"blocks","created_at":"2026-01-25T22:46:09.137994839-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-u098","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-h2uu)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-h2uu\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:29.793449287-08:00","updated_at":"2026-01-25T15:29:29.793449327-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-u098","depends_on_id":"tv-wisp-wisp-87al","type":"parent-child","created_at":"2026-01-25T15:29:29.823519944-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-u098","depends_on_id":"tv-wisp-wisp-vhk6","type":"blocks","created_at":"2026-01-25T15:29:29.898909257-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-u37h","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-i8sz should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:33:12.903560612-08:00","updated_at":"2026-01-25T17:41:22.442543988-08:00","closed_at":"2026-01-25T17:41:22.442543988-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-u37h","depends_on_id":"tv-wisp-wisp-bs1f","type":"parent-child","created_at":"2026-01-25T17:33:13.038834578-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-u37h","depends_on_id":"tv-wisp-wisp-0xf4","type":"blocks","created_at":"2026-01-25T17:33:13.297579945-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-u4ao4","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:06:20.674322035-08:00","updated_at":"2026-01-25T22:06:20.674322065-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-u4ao4","depends_on_id":"tv-wisp-wisp-6rbz8","type":"parent-child","created_at":"2026-01-25T22:06:20.67898777-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-u4ss","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-oyub).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-oyub\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:45:07.965540301-08:00","updated_at":"2026-01-25T17:48:39.598416116-08:00","closed_at":"2026-01-25T17:48:39.598416116-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-u4ss","depends_on_id":"tv-wisp-wisp-n3rx","type":"parent-child","created_at":"2026-01-25T17:45:08.062136242-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-u4ss","depends_on_id":"tv-wisp-wisp-f823","type":"blocks","created_at":"2026-01-25T17:45:08.418786815-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-u5gn","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-kmy2           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-kmy2\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:24:16.631712943-08:00","updated_at":"2026-01-25T17:24:16.631712993-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-u5gn","depends_on_id":"tv-wisp-wisp-d08y","type":"parent-child","created_at":"2026-01-25T17:24:16.635400599-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-u6ol","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-746p)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-746p\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:38.427836606-08:00","updated_at":"2026-01-25T17:44:38.427836636-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-u6ol","depends_on_id":"tv-wisp-wisp-7urn","type":"parent-child","created_at":"2026-01-25T17:44:38.564944356-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-u6ol","depends_on_id":"tv-wisp-wisp-212e","type":"blocks","created_at":"2026-01-25T17:44:38.90803062-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-u6yk","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-02pb\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:16.036801916-08:00","updated_at":"2026-01-25T21:57:39.062298745-08:00","closed_at":"2026-01-25T21:57:39.062298745-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-u6yk","depends_on_id":"tv-wisp-wisp-qesx","type":"parent-child","created_at":"2026-01-25T19:13:16.477633401-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-u6yk","depends_on_id":"tv-wisp-wisp-ek38","type":"blocks","created_at":"2026-01-25T19:13:16.924798641-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-u7fv","title":"mol-refinery-patrol","description":"Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to main one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────\u003e│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch \u0026 rebase            │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge \u0026 push              │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │\u003c─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T21:00:10.48234066-08:00","updated_at":"2026-01-25T21:00:10.48234078-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-u9o1i","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T22:31:06.900066971-08:00","updated_at":"2026-01-25T22:32:02.629916762-08:00","closed_at":"2026-01-25T22:32:02.629916762-08:00","close_reason":"Refinery running.","dependencies":[{"issue_id":"tv-wisp-wisp-u9o1i","depends_on_id":"tv-wisp-wisp-4nh4e","type":"parent-child","created_at":"2026-01-25T22:31:07.161416941-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-u9o1i","depends_on_id":"tv-wisp-wisp-xywsg","type":"blocks","created_at":"2026-01-25T22:31:08.332935876-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-u9pi","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-l0oc).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-l0oc\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:28:18.594506188-08:00","updated_at":"2026-01-25T17:28:18.594506228-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-u9pi","depends_on_id":"tv-wisp-wisp-p9hy","type":"parent-child","created_at":"2026-01-25T17:28:18.649122592-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-u9pi","depends_on_id":"tv-wisp-wisp-h2op","type":"blocks","created_at":"2026-01-25T17:28:18.870285069-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-uamv","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:19.122540171-08:00","updated_at":"2026-01-25T16:12:02.619362493-08:00","closed_at":"2026-01-25T16:12:02.619362493-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-uamv","depends_on_id":"tv-wisp-wisp-inif","type":"parent-child","created_at":"2026-01-25T16:07:19.211032599-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-uamv","depends_on_id":"tv-wisp-wisp-g2i9","type":"blocks","created_at":"2026-01-25T16:07:19.326186204-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-uan7","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-l0oc).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-l0oc\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:52.921924827-08:00","updated_at":"2026-01-25T17:26:43.63694148-08:00","closed_at":"2026-01-25T17:26:43.63694148-08:00","close_reason":"N/A - duplicate of tv-r0vv, already merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-uan7","depends_on_id":"tv-wisp-wisp-6pbk","type":"parent-child","created_at":"2026-01-25T17:23:52.965835396-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-uan7","depends_on_id":"tv-wisp-wisp-n05p","type":"blocks","created_at":"2026-01-25T17:23:53.147858899-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ud7x","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:10:12.273986138-08:00","updated_at":"2026-01-25T19:10:12.273986178-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-ud83","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-gc5x           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-gc5x\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:19.119554176-08:00","updated_at":"2026-01-25T16:08:20.899704187-08:00","closed_at":"2026-01-25T16:08:20.899704187-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ud83","depends_on_id":"tv-wisp-wisp-inif","type":"parent-child","created_at":"2026-01-25T16:07:19.123904989-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ueg2","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-8b8 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:54.804964384-08:00","updated_at":"2026-01-25T15:09:54.804964434-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ueg2","depends_on_id":"tv-wisp-wisp-mt9u","type":"parent-child","created_at":"2026-01-25T15:09:54.842021254-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ueg2","depends_on_id":"tv-wisp-wisp-08co","type":"blocks","created_at":"2026-01-25T15:09:54.91232304-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ueon","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-h2uu).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-h2uu\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:09.95399316-08:00","updated_at":"2026-01-25T16:08:19.821015266-08:00","closed_at":"2026-01-25T16:08:19.821015266-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ueon","depends_on_id":"tv-wisp-wisp-jocg","type":"parent-child","created_at":"2026-01-25T16:07:09.984847126-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ueon","depends_on_id":"tv-wisp-wisp-2s9s","type":"blocks","created_at":"2026-01-25T16:07:10.108606129-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ugj","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:40.048243795-08:00","updated_at":"2026-01-25T13:51:06.732105478-08:00","closed_at":"2026-01-25T13:51:06.732105478-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ugj","depends_on_id":"tv-wisp-wisp-c60","type":"parent-child","created_at":"2026-01-25T13:45:40.067248405-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ugj","depends_on_id":"tv-wisp-wisp-9s2","type":"blocks","created_at":"2026-01-25T13:45:40.091306346-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-uha6","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-l0oc)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-l0oc\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:52.922222102-08:00","updated_at":"2026-01-25T17:26:43.664637599-08:00","closed_at":"2026-01-25T17:26:43.664637599-08:00","close_reason":"N/A - duplicate of tv-r0vv, already merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-uha6","depends_on_id":"tv-wisp-wisp-6pbk","type":"parent-child","created_at":"2026-01-25T17:23:52.98632597-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-uha6","depends_on_id":"tv-wisp-wisp-uan7","type":"blocks","created_at":"2026-01-25T17:23:53.169046705-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ujddb","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:22:18.710952361-08:00","updated_at":"2026-01-25T22:22:18.710952431-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ujddb","depends_on_id":"tv-wisp-wisp-7vv82","type":"parent-child","created_at":"2026-01-25T22:22:18.844592969-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-ujddb","depends_on_id":"tv-wisp-wisp-8k98p","type":"blocks","created_at":"2026-01-25T22:22:19.976040571-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-uji6","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:37:56.129312487-08:00","updated_at":"2026-01-25T21:37:56.129312527-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-uji6","depends_on_id":"tv-wisp-wisp-rfc8","type":"parent-child","created_at":"2026-01-25T21:37:56.967921533-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-uji6","depends_on_id":"tv-wisp-wisp-q4tz","type":"blocks","created_at":"2026-01-25T21:37:57.887650431-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ujlk","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:21:13.446794091-08:00","updated_at":"2026-01-25T20:21:13.446794151-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ujlk","depends_on_id":"tv-wisp-wisp-5nrw","type":"parent-child","created_at":"2026-01-25T20:21:13.955111851-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ujlk","depends_on_id":"tv-wisp-wisp-om46","type":"blocks","created_at":"2026-01-25T20:21:14.664143988-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ujm1","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-v9cm\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-v9cm --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:16:29.376607989-08:00","updated_at":"2026-01-25T15:16:29.376608029-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ujm1","depends_on_id":"tv-wisp-wisp-xsuu","type":"parent-child","created_at":"2026-01-25T15:16:29.43752533-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ujm1","depends_on_id":"tv-wisp-wisp-thca","type":"blocks","created_at":"2026-01-25T15:16:29.508498528-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ukyj","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-02f7\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-02f7 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:54:45.032617914-08:00","updated_at":"2026-01-25T16:54:45.032617974-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ukyj","depends_on_id":"tv-wisp-wisp-mylm","type":"parent-child","created_at":"2026-01-25T16:54:45.180194133-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ukyj","depends_on_id":"tv-wisp-wisp-5fc4","type":"blocks","created_at":"2026-01-25T16:54:45.334174134-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-um0v","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:06:21.221467773-08:00","updated_at":"2026-01-25T16:06:21.221467813-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-um0v","depends_on_id":"tv-wisp-wisp-pysf","type":"parent-child","created_at":"2026-01-25T16:06:21.286330659-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-um0v","depends_on_id":"tv-wisp-wisp-54yd","type":"blocks","created_at":"2026-01-25T16:06:21.385819856-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-uoyo1","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:59:15.4024109-08:00","updated_at":"2026-01-25T21:59:15.40241094-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-uoyo1","depends_on_id":"tv-wisp-wisp-9y6rc","type":"parent-child","created_at":"2026-01-25T21:59:16.318801492-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-uoyo1","depends_on_id":"tv-wisp-wisp-xez0z","type":"blocks","created_at":"2026-01-25T21:59:17.359601586-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-upwb","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-02pb)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-02pb\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:16.03416923-08:00","updated_at":"2026-01-25T19:17:56.911247656-08:00","closed_at":"2026-01-25T19:17:56.911247656-08:00","close_reason":"Work already implemented in commit f87c58e on main","dependencies":[{"issue_id":"tv-wisp-wisp-upwb","depends_on_id":"tv-wisp-wisp-qesx","type":"parent-child","created_at":"2026-01-25T19:13:16.207505405-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-upwb","depends_on_id":"tv-wisp-wisp-srgi","type":"blocks","created_at":"2026-01-25T19:13:16.6428467-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ur0o","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-376f           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-376f\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:25:24.603866124-08:00","updated_at":"2026-01-25T19:25:24.603866164-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ur0o","depends_on_id":"tv-wisp-wisp-y86p","type":"parent-child","created_at":"2026-01-25T19:25:24.607994442-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-uraue","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"hooked","priority":2,"issue_type":"epic","assignee":"tribal_village/witness","created_at":"2026-01-25T22:26:07.448965177-08:00","updated_at":"2026-01-25T22:26:15.362018395-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-urqv","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:28.759132009-08:00","updated_at":"2026-01-25T20:20:28.759132069-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-urqv","depends_on_id":"tv-wisp-wisp-tcnq","type":"parent-child","created_at":"2026-01-25T20:20:29.290045154-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-urqv","depends_on_id":"tv-wisp-wisp-yixs","type":"blocks","created_at":"2026-01-25T20:20:29.958211395-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-urr7","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-uor5\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:15.597044924-08:00","updated_at":"2026-01-25T17:34:34.937507163-08:00","closed_at":"2026-01-25T17:34:34.937507163-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-urr7","depends_on_id":"tv-wisp-wisp-ce9t","type":"parent-child","created_at":"2026-01-25T17:31:15.633231189-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-urr7","depends_on_id":"tv-wisp-wisp-24r5","type":"blocks","created_at":"2026-01-25T17:31:15.87900361-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-uuf","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T14:43:48.1430911-08:00","updated_at":"2026-01-25T14:43:48.14309114-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-uv3u","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-rmos\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:43.849814265-08:00","updated_at":"2026-01-25T16:35:59.19226732-08:00","closed_at":"2026-01-25T16:35:59.19226732-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-uv3u","depends_on_id":"tv-wisp-wisp-zble","type":"parent-child","created_at":"2026-01-25T16:34:43.87259783-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-uv3u","depends_on_id":"tv-wisp-wisp-cw52","type":"blocks","created_at":"2026-01-25T16:34:43.998664269-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-uwcw","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-32y6).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-32y6\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:28.159497317-08:00","updated_at":"2026-01-25T16:09:56.073612225-08:00","closed_at":"2026-01-25T16:09:56.073612225-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-uwcw","depends_on_id":"tv-wisp-wisp-59hk","type":"parent-child","created_at":"2026-01-25T16:07:28.196135341-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-uwcw","depends_on_id":"tv-wisp-wisp-nlmo","type":"blocks","created_at":"2026-01-25T16:07:28.322220545-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-uzzy","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-433 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:57.564954306-08:00","updated_at":"2026-01-25T15:04:57.564954346-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-uzzy","depends_on_id":"tv-wisp-wisp-hl2y","type":"parent-child","created_at":"2026-01-25T15:04:57.588242359-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-uzzy","depends_on_id":"tv-wisp-wisp-z3hu","type":"blocks","created_at":"2026-01-25T15:04:57.633045066-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-v09c","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-c85p           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-c85p\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:15:24.710383437-08:00","updated_at":"2026-01-25T20:15:24.710383487-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-v09c","depends_on_id":"tv-wisp-wisp-40l7","type":"parent-child","created_at":"2026-01-25T20:15:24.714136774-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-v0bl","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-8z2q\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-8z2q --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:54.760132673-08:00","updated_at":"2026-01-25T17:48:43.473772432-08:00","closed_at":"2026-01-25T17:48:43.473772432-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-v0bl","depends_on_id":"tv-wisp-wisp-kdbr","type":"parent-child","created_at":"2026-01-25T17:41:55.07488884-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-v0bl","depends_on_id":"tv-wisp-wisp-brkd","type":"blocks","created_at":"2026-01-25T17:41:55.416971763-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-v0eu","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-rmos           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-rmos\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:42:26.526120143-08:00","updated_at":"2026-01-25T16:43:06.595734183-08:00","closed_at":"2026-01-25T16:43:06.595734183-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-v0eu","depends_on_id":"tv-wisp-wisp-pij2","type":"parent-child","created_at":"2026-01-25T16:42:26.529215624-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-v1sg","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-395fz).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-395fz\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:26.381073805-08:00","updated_at":"2026-01-25T20:16:41.944041023-08:00","closed_at":"2026-01-25T20:16:41.944041023-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-v1sg","depends_on_id":"tv-wisp-wisp-1k5c","type":"parent-child","created_at":"2026-01-25T20:07:26.811994833-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-v1sg","depends_on_id":"tv-wisp-wisp-pbew","type":"blocks","created_at":"2026-01-25T20:07:28.35806352-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-v26","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-3ns           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-3ns\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:20.301119057-08:00","updated_at":"2026-01-25T13:47:07.723329937-08:00","closed_at":"2026-01-25T13:47:07.723329937-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-v26","depends_on_id":"tv-wisp-wisp-735","type":"parent-child","created_at":"2026-01-25T13:45:20.304590246-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-v2zi","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:13:51.063380655-08:00","updated_at":"2026-01-25T19:13:51.063380715-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-v3bf9","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:06:20.674829679-08:00","updated_at":"2026-01-25T22:06:20.674829719-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-v3bf9","depends_on_id":"tv-wisp-wisp-6rbz8","type":"parent-child","created_at":"2026-01-25T22:06:20.794076753-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-v3bf9","depends_on_id":"tv-wisp-wisp-u4ao4","type":"blocks","created_at":"2026-01-25T22:06:21.82990177-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-v3u","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-z20).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-z20\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:44.986871355-08:00","updated_at":"2026-01-25T13:47:37.830626166-08:00","closed_at":"2026-01-25T13:47:37.830626166-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-v3u","depends_on_id":"tv-wisp-wisp-548","type":"parent-child","created_at":"2026-01-25T13:44:44.989969922-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-v3u","depends_on_id":"tv-wisp-wisp-ov9","type":"blocks","created_at":"2026-01-25T13:44:44.996103045-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-v541","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-96g).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-96g\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:22.63585722-08:00","updated_at":"2026-01-25T21:57:09.983735086-08:00","closed_at":"2026-01-25T21:57:09.983735086-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-v541","depends_on_id":"tv-wisp-wisp-m1vl","type":"parent-child","created_at":"2026-01-25T19:11:22.749773091-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-v541","depends_on_id":"tv-wisp-wisp-bxae","type":"blocks","created_at":"2026-01-25T19:11:23.170417-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-v68r","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-gddu\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:46:56.903745201-08:00","updated_at":"2026-01-25T17:46:56.903745241-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-v68r","depends_on_id":"tv-wisp-wisp-l96l","type":"parent-child","created_at":"2026-01-25T17:46:57.309960433-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-v68r","depends_on_id":"tv-wisp-wisp-to2k","type":"blocks","created_at":"2026-01-25T17:46:57.716207704-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-v6os","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-ilh\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:26:18.772057057-08:00","updated_at":"2026-01-25T17:26:18.772057107-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-v6os","depends_on_id":"tv-wisp-wisp-exo0","type":"parent-child","created_at":"2026-01-25T17:26:18.802521195-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-v6os","depends_on_id":"tv-wisp-wisp-nawc","type":"blocks","created_at":"2026-01-25T17:26:19.015041625-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-v7c9","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-d6jo           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-d6jo\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:57:57.422745201-08:00","updated_at":"2026-01-25T19:57:57.422745241-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-v7c9","depends_on_id":"tv-wisp-wisp-rah4","type":"parent-child","created_at":"2026-01-25T19:57:57.427109619-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-v8c0l","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:06:20.675316383-08:00","updated_at":"2026-01-25T22:06:20.675316423-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-v8c0l","depends_on_id":"tv-wisp-wisp-6rbz8","type":"parent-child","created_at":"2026-01-25T22:06:20.909192566-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-v8c0l","depends_on_id":"tv-wisp-wisp-v3bf9","type":"blocks","created_at":"2026-01-25T22:06:21.951942206-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-v9eo","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:11:53.464496021-08:00","updated_at":"2026-01-25T19:11:53.464496061-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-vb6z8","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:22:18.713083426-08:00","updated_at":"2026-01-25T22:22:18.713083476-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-vb6z8","depends_on_id":"tv-wisp-wisp-7vv82","type":"parent-child","created_at":"2026-01-25T22:22:19.220294151-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-vb6z8","depends_on_id":"tv-wisp-wisp-d0lym","type":"blocks","created_at":"2026-01-25T22:22:20.355053979-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-vbri","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-ilh\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:28.58456025-08:00","updated_at":"2026-01-25T17:23:28.5845603-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-vbri","depends_on_id":"tv-wisp-wisp-1gtx","type":"parent-child","created_at":"2026-01-25T17:23:28.776263179-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-vbri","depends_on_id":"tv-wisp-wisp-rhcv","type":"blocks","created_at":"2026-01-25T17:23:28.95154326-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-vbus","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-ilh).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-ilh\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T17:27:22.429636628-08:00","updated_at":"2026-01-25T17:30:37.998421668-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-vbus","depends_on_id":"tv-wisp-wisp-jyha","type":"parent-child","created_at":"2026-01-25T17:27:22.497776281-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-vbus","depends_on_id":"tv-wisp-wisp-cev1","type":"blocks","created_at":"2026-01-25T17:27:22.701661904-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-vgxa","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-v0lg           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-v0lg\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:44.685969654-08:00","updated_at":"2026-01-25T19:18:03.191765252-08:00","closed_at":"2026-01-25T19:18:03.191765252-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-vgxa","depends_on_id":"tv-wisp-wisp-07f2","type":"parent-child","created_at":"2026-01-25T19:16:44.691051212-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-vhk6","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-h2uu).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-h2uu\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:29.793206645-08:00","updated_at":"2026-01-25T15:29:29.793206685-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-vhk6","depends_on_id":"tv-wisp-wisp-87al","type":"parent-child","created_at":"2026-01-25T15:29:29.813413834-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-vhk6","depends_on_id":"tv-wisp-wisp-0yvm","type":"blocks","created_at":"2026-01-25T15:29:29.889097026-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-vi2a","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-gc5x\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-gc5x --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:19.122920831-08:00","updated_at":"2026-01-25T16:12:15.464774787-08:00","closed_at":"2026-01-25T16:12:15.464774787-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-vi2a","depends_on_id":"tv-wisp-wisp-inif","type":"parent-child","created_at":"2026-01-25T16:07:19.225067533-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-vi2a","depends_on_id":"tv-wisp-wisp-uamv","type":"blocks","created_at":"2026-01-25T16:07:19.341360595-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-vimb","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-8z2q           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-8z2q\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:54.75746459-08:00","updated_at":"2026-01-25T17:43:17.206587507-08:00","closed_at":"2026-01-25T17:43:17.206587507-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-vimb","depends_on_id":"tv-wisp-wisp-kdbr","type":"parent-child","created_at":"2026-01-25T17:41:54.761572592-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-vjt","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-j1jx)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-j1jx\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:52:53.984508416-08:00","updated_at":"2026-01-25T14:52:53.984508447-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-vjt","depends_on_id":"tv-wisp-wisp-7h8","type":"parent-child","created_at":"2026-01-25T14:52:53.998333228-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-vjt","depends_on_id":"tv-wisp-wisp-mzr","type":"blocks","created_at":"2026-01-25T14:52:54.031032533-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-vkvy","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:52.491930875-08:00","updated_at":"2026-01-25T19:56:22.27407028-08:00","closed_at":"2026-01-25T19:56:22.27407028-08:00","close_reason":"Workspace clean, branch pushed to origin","dependencies":[{"issue_id":"tv-wisp-wisp-vkvy","depends_on_id":"tv-wisp-wisp-oruc","type":"parent-child","created_at":"2026-01-25T19:47:52.927674551-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-vkvy","depends_on_id":"tv-wisp-wisp-q9s2","type":"blocks","created_at":"2026-01-25T19:47:53.509897885-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-vlfw","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-kmy2)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-kmy2\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:24:16.633044179-08:00","updated_at":"2026-01-25T17:24:16.633044219-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-vlfw","depends_on_id":"tv-wisp-wisp-d08y","type":"parent-child","created_at":"2026-01-25T17:24:16.727534521-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-vlfw","depends_on_id":"tv-wisp-wisp-d7oe","type":"blocks","created_at":"2026-01-25T17:24:16.919159654-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-vlrj","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:56:36.372462021-08:00","updated_at":"2026-01-25T19:56:36.372462051-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-vqmu","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-3ns\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-3ns --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:53.467833923-08:00","updated_at":"2026-01-25T22:21:19.925917478-08:00","closed_at":"2026-01-25T22:21:19.925917478-08:00","close_reason":"Feature already merged to main - no new work to prepare","dependencies":[{"issue_id":"tv-wisp-wisp-vqmu","depends_on_id":"tv-wisp-wisp-v9eo","type":"parent-child","created_at":"2026-01-25T19:11:53.858856919-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-vqmu","depends_on_id":"tv-wisp-wisp-zqy7","type":"blocks","created_at":"2026-01-25T19:11:54.313209848-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-vuot2","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (hq-cv-gzu6g)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: hq-cv-gzu6g\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:55:16.25346092-08:00","updated_at":"2026-01-25T21:55:16.25346097-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-vuot2","depends_on_id":"tv-wisp-wisp-y04mr","type":"parent-child","created_at":"2026-01-25T21:55:16.617898341-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-vuot2","depends_on_id":"tv-wisp-wisp-ljh6d","type":"blocks","created_at":"2026-01-25T21:55:17.569429716-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-vvnmb","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:19:52.883274417-08:00","updated_at":"2026-01-25T22:19:52.883274447-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-vvnmb","depends_on_id":"tv-wisp-wisp-ep1u6","type":"parent-child","created_at":"2026-01-25T22:19:52.888263136-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-vvq1","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:37:56.12746227-08:00","updated_at":"2026-01-25T21:37:56.12746231-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-vvq1","depends_on_id":"tv-wisp-wisp-rfc8","type":"parent-child","created_at":"2026-01-25T21:37:56.564872206-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-vvq1","depends_on_id":"tv-wisp-wisp-wqty","type":"blocks","created_at":"2026-01-25T21:37:57.479822099-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-vzoz","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-p5yr\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-p5yr --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:57.548461457-08:00","updated_at":"2026-01-25T19:55:23.630456989-08:00","closed_at":"2026-01-25T19:55:23.630456989-08:00","close_reason":"Completion notes added, beads synced","dependencies":[{"issue_id":"tv-wisp-wisp-vzoz","depends_on_id":"tv-wisp-wisp-hhw1","type":"parent-child","created_at":"2026-01-25T19:47:58.086295032-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-vzoz","depends_on_id":"tv-wisp-wisp-6pcx","type":"blocks","created_at":"2026-01-25T19:47:58.671732419-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-w21e","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-38ac).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-38ac\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:16.689056163-08:00","updated_at":"2026-01-25T19:18:17.922846346-08:00","closed_at":"2026-01-25T19:18:17.922846346-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-w21e","depends_on_id":"tv-wisp-wisp-2pyz","type":"parent-child","created_at":"2026-01-25T19:16:16.812953854-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-w21e","depends_on_id":"tv-wisp-wisp-mbrl","type":"blocks","created_at":"2026-01-25T19:16:17.285047603-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-w48","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-v0lg).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-v0lg\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:30.02100928-08:00","updated_at":"2026-01-25T14:40:37.638978259-08:00","closed_at":"2026-01-25T14:40:37.638978259-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-w48","depends_on_id":"tv-wisp-wisp-nmn","type":"parent-child","created_at":"2026-01-25T14:38:30.027623279-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-w48","depends_on_id":"tv-wisp-wisp-ltd","type":"blocks","created_at":"2026-01-25T14:38:30.046633295-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-w4v8q","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before hq-cv-x5kp2\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:57.668514878-08:00","updated_at":"2026-01-25T21:54:57.668514918-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-w4v8q","depends_on_id":"tv-wisp-wisp-i45n5","type":"parent-child","created_at":"2026-01-25T21:54:57.815542306-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-w4v8q","depends_on_id":"tv-wisp-wisp-j8aa1","type":"blocks","created_at":"2026-01-25T21:54:58.718589011-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-w50m","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-b3n\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:39.648739757-08:00","updated_at":"2026-01-25T15:04:39.648739797-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-w50m","depends_on_id":"tv-wisp-wisp-p4e1","type":"parent-child","created_at":"2026-01-25T15:04:39.689354066-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-w54v","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-gc5x\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:47.991804327-08:00","updated_at":"2026-01-25T15:29:47.991804387-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-w54v","depends_on_id":"tv-wisp-wisp-9umu","type":"parent-child","created_at":"2026-01-25T15:29:48.009533515-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-w54v","depends_on_id":"tv-wisp-wisp-eg99","type":"blocks","created_at":"2026-01-25T15:29:48.101438023-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-w6aq","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:16:44.688921586-08:00","updated_at":"2026-01-25T19:25:11.914077465-08:00","closed_at":"2026-01-25T19:25:11.914077465-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-w6aq","depends_on_id":"tv-wisp-wisp-07f2","type":"parent-child","created_at":"2026-01-25T19:16:44.994763365-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-w6aq","depends_on_id":"tv-wisp-wisp-krxe","type":"blocks","created_at":"2026-01-25T19:16:45.539193304-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-w7qf","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-c85p should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:15:24.712076738-08:00","updated_at":"2026-01-25T20:15:24.712076778-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-w7qf","depends_on_id":"tv-wisp-wisp-40l7","type":"parent-child","created_at":"2026-01-25T20:15:25.042563083-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-w7qf","depends_on_id":"tv-wisp-wisp-3i2i","type":"blocks","created_at":"2026-01-25T20:15:25.70574167-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-w973","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:06.922960072-08:00","updated_at":"2026-01-25T21:00:06.922960132-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-w973","depends_on_id":"tv-wisp-wisp-6imy","type":"parent-child","created_at":"2026-01-25T21:00:07.768586125-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-w973","depends_on_id":"tv-wisp-wisp-xhxl","type":"blocks","created_at":"2026-01-25T21:00:08.653005782-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-wak","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-96g should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:36.495656748-08:00","updated_at":"2026-01-25T14:43:25.318807653-08:00","closed_at":"2026-01-25T14:43:25.318807653-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-wak","depends_on_id":"tv-wisp-wisp-lw5","type":"parent-child","created_at":"2026-01-25T14:37:36.50276072-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-wak","depends_on_id":"tv-wisp-wisp-6px","type":"blocks","created_at":"2026-01-25T14:37:36.514784976-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-wkqr","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:20:52.488491149-08:00","updated_at":"2026-01-25T19:20:52.488491189-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-wl5t","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-8z2q)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-8z2q\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:54.758608246-08:00","updated_at":"2026-01-25T17:46:07.698661211-08:00","closed_at":"2026-01-25T17:46:07.698661211-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-wl5t","depends_on_id":"tv-wisp-wisp-kdbr","type":"parent-child","created_at":"2026-01-25T17:41:54.893989237-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-wl5t","depends_on_id":"tv-wisp-wisp-5isr","type":"blocks","created_at":"2026-01-25T17:41:55.240273096-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-wpma","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:21.909824471-08:00","updated_at":"2026-01-25T15:04:21.909824532-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-wpma","depends_on_id":"tv-wisp-wisp-wxnw","type":"parent-child","created_at":"2026-01-25T15:04:21.945704644-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-wpma","depends_on_id":"tv-wisp-wisp-fik8","type":"blocks","created_at":"2026-01-25T15:04:21.987228373-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-wqty","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:37:56.126978008-08:00","updated_at":"2026-01-25T21:37:56.126978038-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-wqty","depends_on_id":"tv-wisp-wisp-rfc8","type":"parent-child","created_at":"2026-01-25T21:37:56.459887894-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-wqty","depends_on_id":"tv-wisp-wisp-jfsj","type":"blocks","created_at":"2026-01-25T21:37:57.380537113-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ws6p","title":"Run test suite","description":"Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:38:02.235552633-08:00","updated_at":"2026-01-25T21:38:02.235552673-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ws6p","depends_on_id":"tv-wisp-wisp-chaw","type":"parent-child","created_at":"2026-01-25T21:38:02.571817331-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-ws6p","depends_on_id":"tv-wisp-wisp-iles","type":"blocks","created_at":"2026-01-25T21:38:03.622887786-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-wsw7","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/\u003cbranch\u003e`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"\u003csource_issue\u003e\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:41.225175855-08:00","updated_at":"2026-01-25T21:11:41.225175885-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-wsw7","depends_on_id":"tv-wisp-wisp-jva9","type":"parent-child","created_at":"2026-01-25T21:11:42.199064231-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-wsw7","depends_on_id":"tv-wisp-wisp-szdz","type":"blocks","created_at":"2026-01-25T21:11:43.205331127-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-wtky","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-v0lg\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:21.056667153-08:00","updated_at":"2026-01-25T19:12:56.71612464-08:00","closed_at":"2026-01-25T19:12:56.71612464-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-wtky","depends_on_id":"tv-wisp-wisp-22vo","type":"parent-child","created_at":"2026-01-25T19:10:21.110280544-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-wtky","depends_on_id":"tv-wisp-wisp-h114","type":"blocks","created_at":"2026-01-25T19:10:21.558755515-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-wto1","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-eov5\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:10.039377731-08:00","updated_at":"2026-01-25T17:41:10.039377791-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-wto1","depends_on_id":"tv-wisp-wisp-wv5q","type":"parent-child","created_at":"2026-01-25T17:41:10.090127363-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-wto1","depends_on_id":"tv-wisp-wisp-5snm","type":"blocks","created_at":"2026-01-25T17:41:10.424126453-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-wv5q","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:41:10.037608036-08:00","updated_at":"2026-01-25T17:41:10.037608096-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-wv9b","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-w43u\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:00.023488779-08:00","updated_at":"2026-01-25T17:41:00.023488829-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-wv9b","depends_on_id":"tv-wisp-wisp-0t3r","type":"parent-child","created_at":"2026-01-25T17:41:00.3565939-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-wv9b","depends_on_id":"tv-wisp-wisp-c1p8","type":"blocks","created_at":"2026-01-25T17:41:00.708032462-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-wwma","title":"Scan merge queue","description":"Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list \u003crig\u003e\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep \u003cbranch\u003e\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close \u003cmr-id\u003e --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:38:02.234590321-08:00","updated_at":"2026-01-25T21:38:02.234590361-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-wwma","depends_on_id":"tv-wisp-wisp-chaw","type":"parent-child","created_at":"2026-01-25T21:38:02.35412417-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-wwma","depends_on_id":"tv-wisp-wisp-oyy9","type":"blocks","created_at":"2026-01-25T21:38:03.41629354-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-wws1","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-puj\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-puj --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:52.559834393-08:00","updated_at":"2026-01-25T19:12:31.926604007-08:00","closed_at":"2026-01-25T19:12:31.926604007-08:00","close_reason":"Work already completed and merged to main","dependencies":[{"issue_id":"tv-wisp-wisp-wws1","depends_on_id":"tv-wisp-wisp-kls4","type":"parent-child","created_at":"2026-01-25T19:10:52.961482946-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-wws1","depends_on_id":"tv-wisp-wisp-fk0b","type":"blocks","created_at":"2026-01-25T19:10:53.435726911-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-wxnw","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T15:04:21.905408167-08:00","updated_at":"2026-01-25T15:04:21.905408227-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-wyv","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-j1jx should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:52:53.984706166-08:00","updated_at":"2026-01-25T14:52:53.984706196-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-wyv","depends_on_id":"tv-wisp-wisp-7h8","type":"parent-child","created_at":"2026-01-25T14:52:54.002403118-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-wyv","depends_on_id":"tv-wisp-wisp-vjt","type":"blocks","created_at":"2026-01-25T14:52:54.034082807-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-wz32","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-k0gj should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:52.491104162-08:00","updated_at":"2026-01-25T19:55:42.495288627-08:00","closed_at":"2026-01-25T19:55:42.495288627-08:00","close_reason":"Self-review complete: changes are clean, only step.nim modified with constant extraction","dependencies":[{"issue_id":"tv-wisp-wisp-wz32","depends_on_id":"tv-wisp-wisp-oruc","type":"parent-child","created_at":"2026-01-25T19:47:52.784140271-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-wz32","depends_on_id":"tv-wisp-wisp-psa9","type":"blocks","created_at":"2026-01-25T19:47:53.357776437-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-x4j7a","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:25:19.474419986-08:00","updated_at":"2026-01-25T22:25:19.474420046-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-x4j7a","depends_on_id":"tv-wisp-wisp-fl6o4","type":"parent-child","created_at":"2026-01-25T22:25:20.550427278-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-x4j7a","depends_on_id":"tv-wisp-wisp-qm1ll","type":"blocks","created_at":"2026-01-25T22:25:21.75621703-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-x5j8","title":"Check for more work","description":"More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:38:02.236886368-08:00","updated_at":"2026-01-25T21:38:02.236886408-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-x5j8","depends_on_id":"tv-wisp-wisp-chaw","type":"parent-child","created_at":"2026-01-25T21:38:02.888616096-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-x5j8","depends_on_id":"tv-wisp-wisp-gti7","type":"blocks","created_at":"2026-01-25T21:38:03.929544419-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-x5o5n","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:12:14.188708346-08:00","updated_at":"2026-01-25T22:12:14.188708387-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-x5o5n","depends_on_id":"tv-wisp-wisp-dbfyj","type":"parent-child","created_at":"2026-01-25T22:12:14.313203826-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-x5o5n","depends_on_id":"tv-wisp-wisp-szhjx","type":"blocks","created_at":"2026-01-25T22:12:15.399962159-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-x6jf","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-m1fr\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-m1fr --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:41.665578611-08:00","updated_at":"2026-01-25T17:50:03.49059901-08:00","closed_at":"2026-01-25T17:50:03.49059901-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-x6jf","depends_on_id":"tv-wisp-wisp-kb77","type":"parent-child","created_at":"2026-01-25T17:34:41.9211161-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-x6jf","depends_on_id":"tv-wisp-wisp-83m8","type":"blocks","created_at":"2026-01-25T17:34:42.18209352-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-x8hk","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-w43u).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-w43u\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:00.018873759-08:00","updated_at":"2026-01-25T17:41:00.018873799-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-x8hk","depends_on_id":"tv-wisp-wisp-0t3r","type":"parent-child","created_at":"2026-01-25T17:41:00.117470523-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-x8hk","depends_on_id":"tv-wisp-wisp-8m5z","type":"blocks","created_at":"2026-01-25T17:41:00.442839897-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-x8yu","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T15:30:06.225629786-08:00","updated_at":"2026-01-25T15:30:06.225629826-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-xbtm","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-8ro\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:06:21.222419079-08:00","updated_at":"2026-01-25T16:06:21.222419109-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xbtm","depends_on_id":"tv-wisp-wisp-pysf","type":"parent-child","created_at":"2026-01-25T16:06:21.323320523-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-xbtm","depends_on_id":"tv-wisp-wisp-xv16","type":"blocks","created_at":"2026-01-25T16:06:21.431873282-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xcql","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-1rmd           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-1rmd\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:12.274732401-08:00","updated_at":"2026-01-25T19:13:43.565428257-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xcql","depends_on_id":"tv-wisp-wisp-ud7x","type":"parent-child","created_at":"2026-01-25T19:10:12.278559246-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xddql","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:15:21.198784957-08:00","updated_at":"2026-01-25T22:15:21.198785017-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xddql","depends_on_id":"tv-wisp-wisp-y02ot","type":"parent-child","created_at":"2026-01-25T22:15:22.127283606-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-xddql","depends_on_id":"tv-wisp-wisp-mux3g","type":"blocks","created_at":"2026-01-25T22:15:23.348721682-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xdstk","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: hq-cv-gzu6g\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:55:16.255878328-08:00","updated_at":"2026-01-25T21:55:16.255878358-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xdstk","depends_on_id":"tv-wisp-wisp-y04mr","type":"parent-child","created_at":"2026-01-25T21:55:17.213229759-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-xdstk","depends_on_id":"tv-wisp-wisp-zyf6t","type":"blocks","created_at":"2026-01-25T21:55:18.135586071-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xeezs","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:25:19.468923716-08:00","updated_at":"2026-01-25T22:25:19.468923766-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xeezs","depends_on_id":"tv-wisp-wisp-fl6o4","type":"parent-child","created_at":"2026-01-25T22:25:19.61938908-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-xeezs","depends_on_id":"tv-wisp-wisp-oli2p","type":"blocks","created_at":"2026-01-25T22:25:20.805178266-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xez0z","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:59:15.40176502-08:00","updated_at":"2026-01-25T21:59:15.40176505-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xez0z","depends_on_id":"tv-wisp-wisp-9y6rc","type":"parent-child","created_at":"2026-01-25T21:59:16.205290284-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-xez0z","depends_on_id":"tv-wisp-wisp-2frvc","type":"blocks","created_at":"2026-01-25T21:59:17.243233936-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xf47","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-i8sz\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-i8sz --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:33:12.904488785-08:00","updated_at":"2026-01-25T17:43:08.167034173-08:00","closed_at":"2026-01-25T17:43:08.167034173-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-xf47","depends_on_id":"tv-wisp-wisp-bs1f","type":"parent-child","created_at":"2026-01-25T17:33:13.13639478-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-xf47","depends_on_id":"tv-wisp-wisp-gs7r","type":"blocks","created_at":"2026-01-25T17:33:13.396363482-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xgblc","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:17.686462293-08:00","updated_at":"2026-01-25T21:54:17.686462333-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xgblc","depends_on_id":"tv-wisp-wisp-zyr6q","type":"parent-child","created_at":"2026-01-25T21:54:18.242608285-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-xgblc","depends_on_id":"tv-wisp-wisp-kt1a6","type":"blocks","created_at":"2026-01-25T21:54:19.111616495-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xgi","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-cbg should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:54.0254167-08:00","updated_at":"2026-01-25T14:37:54.025416741-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xgi","depends_on_id":"tv-wisp-wisp-c1i","type":"parent-child","created_at":"2026-01-25T14:37:54.033105171-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-xgi","depends_on_id":"tv-wisp-wisp-19x","type":"blocks","created_at":"2026-01-25T14:37:54.046404366-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xhlf","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-746p\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-746p --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:38.429247841-08:00","updated_at":"2026-01-25T17:44:38.429247881-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xhlf","depends_on_id":"tv-wisp-wisp-7urn","type":"parent-child","created_at":"2026-01-25T17:44:38.742416661-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-xhlf","depends_on_id":"tv-wisp-wisp-ynhp","type":"blocks","created_at":"2026-01-25T17:44:39.093541818-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xhxl","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:06.922345725-08:00","updated_at":"2026-01-25T21:00:06.922345775-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xhxl","depends_on_id":"tv-wisp-wisp-6imy","type":"parent-child","created_at":"2026-01-25T21:00:07.660456646-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-xhxl","depends_on_id":"tv-wisp-wisp-16uj","type":"blocks","created_at":"2026-01-25T21:00:08.560277176-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xk01","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-32y6 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:07:28.160223293-08:00","updated_at":"2026-01-25T16:11:13.146782764-08:00","closed_at":"2026-01-25T16:11:13.146782764-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-xk01","depends_on_id":"tv-wisp-wisp-59hk","type":"parent-child","created_at":"2026-01-25T16:07:28.232199644-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-xk01","depends_on_id":"tv-wisp-wisp-taqt","type":"blocks","created_at":"2026-01-25T16:07:28.353085801-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xnb0","title":"Burn and respawn or loop","description":"End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:38:02.238655393-08:00","updated_at":"2026-01-25T21:38:02.238655423-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xnb0","depends_on_id":"tv-wisp-wisp-chaw","type":"parent-child","created_at":"2026-01-25T21:38:03.312194673-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-xnb0","depends_on_id":"tv-wisp-wisp-mcak","type":"blocks","created_at":"2026-01-25T21:38:04.345351341-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xnh8","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-8b8           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-8b8\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:21.90645993-08:00","updated_at":"2026-01-25T15:04:21.906459971-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xnh8","depends_on_id":"tv-wisp-wisp-wxnw","type":"parent-child","created_at":"2026-01-25T15:04:21.910998463-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xouj2","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:31:06.903534116-08:00","updated_at":"2026-01-25T22:31:06.903534156-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xouj2","depends_on_id":"tv-wisp-wisp-4nh4e","type":"parent-child","created_at":"2026-01-25T22:31:08.066929165-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-xouj2","depends_on_id":"tv-wisp-wisp-lfruf","type":"blocks","created_at":"2026-01-25T22:31:09.258840413-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xsn","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-96g           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-96g\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:37:36.494885029-08:00","updated_at":"2026-01-25T14:39:07.558932176-08:00","closed_at":"2026-01-25T14:39:07.558932176-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-xsn","depends_on_id":"tv-wisp-wisp-lw5","type":"parent-child","created_at":"2026-01-25T14:37:36.496722834-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xsuu","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-25T15:16:29.374035613-08:00","updated_at":"2026-01-25T15:19:31.020679502-08:00","closed_at":"2026-01-25T15:19:31.020679502-08:00","close_reason":"Molecule closed - task completed (simple sync, no steps needed)","ephemeral":true}
{"id":"tv-wisp-wisp-xv16","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-8ro\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-8ro --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:06:21.222113499-08:00","updated_at":"2026-01-25T16:06:21.222113539-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xv16","depends_on_id":"tv-wisp-wisp-pysf","type":"parent-child","created_at":"2026-01-25T16:06:21.311360813-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-xv16","depends_on_id":"tv-wisp-wisp-85tn","type":"blocks","created_at":"2026-01-25T16:06:21.413142821-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xvauu","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to hq-cv-x5kp2 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:54:57.67046476-08:00","updated_at":"2026-01-25T21:54:57.6704648-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xvauu","depends_on_id":"tv-wisp-wisp-i45n5","type":"parent-child","created_at":"2026-01-25T21:54:58.168025925-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-xvauu","depends_on_id":"tv-wisp-wisp-r731o","type":"blocks","created_at":"2026-01-25T21:54:59.060924119-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xvw","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-z20 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:44.987232788-08:00","updated_at":"2026-01-25T13:47:38.059819893-08:00","closed_at":"2026-01-25T13:47:38.059819893-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-xvw","depends_on_id":"tv-wisp-wisp-548","type":"parent-child","created_at":"2026-01-25T13:44:44.991513534-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-xvw","depends_on_id":"tv-wisp-wisp-hay","type":"blocks","created_at":"2026-01-25T13:44:44.997688315-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xx0i","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-25T17:30:52.060827482-08:00","updated_at":"2026-01-25T17:33:24.265693999-08:00","closed_at":"2026-01-25T17:33:24.265693999-08:00","close_reason":"All steps complete - feature was already implemented","ephemeral":true}
{"id":"tv-wisp-wisp-xxmc","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:06.918816203-08:00","updated_at":"2026-01-25T21:00:06.918816263-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xxmc","depends_on_id":"tv-wisp-wisp-6imy","type":"parent-child","created_at":"2026-01-25T21:00:07.200294609-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-xxmc","depends_on_id":"tv-wisp-wisp-t1g2","type":"blocks","created_at":"2026-01-25T21:00:08.083750686-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xyke","title":"Burn and respawn or loop","description":"End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:41.225648267-08:00","updated_at":"2026-01-25T21:11:41.225648307-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xyke","depends_on_id":"tv-wisp-wisp-jva9","type":"parent-child","created_at":"2026-01-25T21:11:42.30523038-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-xyke","depends_on_id":"tv-wisp-wisp-wsw7","type":"blocks","created_at":"2026-01-25T21:11:43.303760417-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xyv1c","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:52:19.641381203-08:00","updated_at":"2026-01-25T21:52:19.641381243-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-xyv1c","depends_on_id":"tv-wisp-wisp-f1fv","type":"parent-child","created_at":"2026-01-25T21:52:20.193229638-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-xyv1c","depends_on_id":"tv-wisp-wisp-hwmuv","type":"blocks","created_at":"2026-01-25T21:52:21.157462101-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-xywsg","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T22:31:06.899560371-08:00","updated_at":"2026-01-25T22:32:02.349795241-08:00","closed_at":"2026-01-25T22:32:02.349795241-08:00","close_reason":"No cleanup wisps.","dependencies":[{"issue_id":"tv-wisp-wisp-xywsg","depends_on_id":"tv-wisp-wisp-4nh4e","type":"parent-child","created_at":"2026-01-25T22:31:07.033428716-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-xywsg","depends_on_id":"tv-wisp-wisp-72m4e","type":"blocks","created_at":"2026-01-25T22:31:08.201464905-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-y02ot","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T22:15:21.193612687-08:00","updated_at":"2026-01-25T22:15:21.193612727-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-y04j","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:26:18.774577233-08:00","updated_at":"2026-01-25T17:26:18.774577293-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-y04j","depends_on_id":"tv-wisp-wisp-exo0","type":"parent-child","created_at":"2026-01-25T17:26:18.94033634-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-y04j","depends_on_id":"tv-wisp-wisp-lhb7","type":"blocks","created_at":"2026-01-25T17:26:19.139672139-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-y04mr","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T21:55:16.250461079-08:00","updated_at":"2026-01-25T21:55:16.250461129-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-y0ny","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:38.472451778-08:00","updated_at":"2026-01-25T21:11:38.472451828-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-y0ny","depends_on_id":"tv-wisp-wisp-obm9","type":"parent-child","created_at":"2026-01-25T21:11:39.061687173-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-y0ny","depends_on_id":"tv-wisp-wisp-orv6","type":"blocks","created_at":"2026-01-25T21:11:39.942682749-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-y2jk","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:55.300175707-08:00","updated_at":"2026-01-25T17:34:55.300175767-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-y2jk","depends_on_id":"tv-wisp-wisp-2t2z","type":"parent-child","created_at":"2026-01-25T17:34:55.533016029-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-y2jk","depends_on_id":"tv-wisp-wisp-yctt","type":"blocks","created_at":"2026-01-25T17:34:55.806104518-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-y3cij","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:15:21.199510134-08:00","updated_at":"2026-01-25T22:15:21.199510204-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-y3cij","depends_on_id":"tv-wisp-wisp-y02ot","type":"parent-child","created_at":"2026-01-25T22:15:22.271802649-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-y3cij","depends_on_id":"tv-wisp-wisp-xddql","type":"blocks","created_at":"2026-01-25T22:15:23.482415158-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-y53n","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-dtqk)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-dtqk\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:40:01.323112759-08:00","updated_at":"2026-01-25T17:40:01.323112819-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-y53n","depends_on_id":"tv-wisp-wisp-f2ka","type":"parent-child","created_at":"2026-01-25T17:40:01.499394133-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-y53n","depends_on_id":"tv-wisp-wisp-f9m4","type":"blocks","created_at":"2026-01-25T17:40:01.993797311-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-y86p","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:25:24.602994196-08:00","updated_at":"2026-01-25T19:25:24.602994236-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-y87s","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-wisp-395fz)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-wisp-395fz\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:26.382798745-08:00","updated_at":"2026-01-25T20:17:27.886072771-08:00","closed_at":"2026-01-25T20:17:27.886072771-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-y87s","depends_on_id":"tv-wisp-wisp-1k5c","type":"parent-child","created_at":"2026-01-25T20:07:26.931186415-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-y87s","depends_on_id":"tv-wisp-wisp-v1sg","type":"blocks","created_at":"2026-01-25T20:07:28.481787433-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-yanb","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-376f\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:25:24.607344889-08:00","updated_at":"2026-01-25T19:25:24.607344929-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-yanb","depends_on_id":"tv-wisp-wisp-y86p","type":"parent-child","created_at":"2026-01-25T19:25:25.1737793-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-yanb","depends_on_id":"tv-wisp-wisp-5exa","type":"blocks","created_at":"2026-01-25T19:25:25.713020879-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-yb91","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-433           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-433\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:36.714730787-08:00","updated_at":"2026-01-25T15:09:36.714730847-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-yb91","depends_on_id":"tv-wisp-wisp-f3bu","type":"parent-child","created_at":"2026-01-25T15:09:36.718781847-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-yctt","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:55.299482583-08:00","updated_at":"2026-01-25T17:34:55.299482653-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-yctt","depends_on_id":"tv-wisp-wisp-2t2z","type":"parent-child","created_at":"2026-01-25T17:34:55.50025084-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-yctt","depends_on_id":"tv-wisp-wisp-jl17","type":"blocks","created_at":"2026-01-25T17:34:55.772691919-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-yegom","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:59:15.400429-08:00","updated_at":"2026-01-25T21:59:15.40042905-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-yegom","depends_on_id":"tv-wisp-wisp-9y6rc","type":"parent-child","created_at":"2026-01-25T21:59:15.978497687-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-yegom","depends_on_id":"tv-wisp-wisp-t7j2d","type":"blocks","created_at":"2026-01-25T21:59:17.012695945-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-yh1","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:38:30.021767772-08:00","updated_at":"2026-01-25T14:45:56.385111795-08:00","closed_at":"2026-01-25T14:45:56.385111795-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-yh1","depends_on_id":"tv-wisp-wisp-nmn","type":"parent-child","created_at":"2026-01-25T14:38:30.037493286-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-yh1","depends_on_id":"tv-wisp-wisp-szi","type":"blocks","created_at":"2026-01-25T14:38:30.056886997-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-yixs","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:20:28.758483305-08:00","updated_at":"2026-01-25T20:20:28.758483375-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-yixs","depends_on_id":"tv-wisp-wisp-tcnq","type":"parent-child","created_at":"2026-01-25T20:20:29.203636142-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-yixs","depends_on_id":"tv-wisp-wisp-0w17","type":"blocks","created_at":"2026-01-25T20:20:29.874110082-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ymb5","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-ilh           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-ilh\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:28.580706794-08:00","updated_at":"2026-01-25T17:23:28.580706864-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ymb5","depends_on_id":"tv-wisp-wisp-1gtx","type":"parent-child","created_at":"2026-01-25T17:23:28.585262331-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ymb9","title":"Scan merge queue","description":"Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list \u003crig\u003e\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep \u003cbranch\u003e\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close \u003cmr-id\u003e --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:41.221628239-08:00","updated_at":"2026-01-25T21:11:41.221628279-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ymb9","depends_on_id":"tv-wisp-wisp-jva9","type":"parent-child","created_at":"2026-01-25T21:11:41.326746061-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-ymb9","depends_on_id":"tv-wisp-wisp-s2hq","type":"blocks","created_at":"2026-01-25T21:11:42.401907858-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ynhp","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:38.428907526-08:00","updated_at":"2026-01-25T17:44:38.428907566-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ynhp","depends_on_id":"tv-wisp-wisp-7urn","type":"parent-child","created_at":"2026-01-25T17:44:38.69923745-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ynhp","depends_on_id":"tv-wisp-wisp-f6pv","type":"blocks","created_at":"2026-01-25T17:44:39.048349097-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-yr96","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-gvv3).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-gvv3\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:48:28.900249918-08:00","updated_at":"2026-01-25T17:48:28.900249958-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-yr96","depends_on_id":"tv-wisp-wisp-kic6","type":"parent-child","created_at":"2026-01-25T17:48:29.002854848-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-yr96","depends_on_id":"tv-wisp-wisp-0cjv","type":"blocks","created_at":"2026-01-25T17:48:29.416089393-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ytfz","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:22.637582431-08:00","updated_at":"2026-01-25T21:59:31.003843675-08:00","closed_at":"2026-01-25T21:59:31.003843675-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ytfz","depends_on_id":"tv-wisp-wisp-m1vl","type":"parent-child","created_at":"2026-01-25T19:11:22.957703786-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ytfz","depends_on_id":"tv-wisp-wisp-hla4","type":"blocks","created_at":"2026-01-25T19:11:23.395100174-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ytof","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:10:21.058216125-08:00","updated_at":"2026-01-25T19:13:02.53118189-08:00","closed_at":"2026-01-25T19:13:02.53118189-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-ytof","depends_on_id":"tv-wisp-wisp-22vo","type":"parent-child","created_at":"2026-01-25T19:10:21.336980913-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ytof","depends_on_id":"tv-wisp-wisp-scm6","type":"blocks","created_at":"2026-01-25T19:10:21.774353033-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-yvsl","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-p5yr           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-p5yr\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:47:57.545223884-08:00","updated_at":"2026-01-25T19:48:54.068432346-08:00","closed_at":"2026-01-25T19:48:54.068432346-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-yvsl","depends_on_id":"tv-wisp-wisp-hhw1","type":"parent-child","created_at":"2026-01-25T19:47:57.549362478-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-yxfu","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-5o2p\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-5o2p --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:34:55.30069667-08:00","updated_at":"2026-01-25T17:34:55.30069673-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-yxfu","depends_on_id":"tv-wisp-wisp-2t2z","type":"parent-child","created_at":"2026-01-25T17:34:55.565797058-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-yxfu","depends_on_id":"tv-wisp-wisp-y2jk","type":"blocks","created_at":"2026-01-25T17:34:55.840329043-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-yytm","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-3ns           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-3ns\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:53.465291487-08:00","updated_at":"2026-01-25T22:17:14.677326135-08:00","closed_at":"2026-01-25T22:17:14.677326135-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-yytm","depends_on_id":"tv-wisp-wisp-v9eo","type":"parent-child","created_at":"2026-01-25T19:11:53.46866245-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-yzjj","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-c85p\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-c85p --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:15:24.713232937-08:00","updated_at":"2026-01-25T20:15:24.713232977-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-yzjj","depends_on_id":"tv-wisp-wisp-40l7","type":"parent-child","created_at":"2026-01-25T20:15:25.285185068-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-yzjj","depends_on_id":"tv-wisp-wisp-tw7q","type":"blocks","created_at":"2026-01-25T20:15:25.952527259-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-yzw","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-z20\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-z20 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:44:44.987687534-08:00","updated_at":"2026-01-25T13:47:43.82006328-08:00","closed_at":"2026-01-25T13:47:43.82006328-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-yzw","depends_on_id":"tv-wisp-wisp-548","type":"parent-child","created_at":"2026-01-25T13:44:44.993771837-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-yzw","depends_on_id":"tv-wisp-wisp-8u6","type":"blocks","created_at":"2026-01-25T13:44:45.000011689-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-z07z","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T16:34:43.851406539-08:00","updated_at":"2026-01-25T16:34:43.851406589-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-z07z","depends_on_id":"tv-wisp-wisp-zble","type":"parent-child","created_at":"2026-01-25T16:34:43.932361608-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-z07z","depends_on_id":"tv-wisp-wisp-j609","type":"blocks","created_at":"2026-01-25T16:34:44.055116921-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-z2c9","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-wisp-wx7d\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-wisp-wx7d --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:22:12.960021242-08:00","updated_at":"2026-01-25T19:22:12.960021272-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-z2c9","depends_on_id":"tv-wisp-wisp-zver","type":"parent-child","created_at":"2026-01-25T19:22:13.406492285-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-z2c9","depends_on_id":"tv-wisp-wisp-6r8r","type":"blocks","created_at":"2026-01-25T19:22:13.927007258-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-z3hu","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-433)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-433\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:57.56447993-08:00","updated_at":"2026-01-25T15:04:57.564479971-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-z3hu","depends_on_id":"tv-wisp-wisp-hl2y","type":"parent-child","created_at":"2026-01-25T15:04:57.582798427-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-z3mz8","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T22:06:20.676647133-08:00","updated_at":"2026-01-25T22:06:20.676647163-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-z3mz8","depends_on_id":"tv-wisp-wisp-6rbz8","type":"parent-child","created_at":"2026-01-25T22:06:21.253893158-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-z3mz8","depends_on_id":"tv-wisp-wisp-cubb2","type":"blocks","created_at":"2026-01-25T22:06:22.308894649-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-z407","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T21:00:41.758251987-08:00","updated_at":"2026-01-25T21:56:29.672436851-08:00","closed_at":"2026-01-25T21:56:29.672436851-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-z407","depends_on_id":"tv-wisp-wisp-lanr","type":"parent-child","created_at":"2026-01-25T21:00:41.894545266-08:00","created_by":"tribal_village/witness"},{"issue_id":"tv-wisp-wisp-z407","depends_on_id":"tv-wisp-wisp-0vwt","type":"blocks","created_at":"2026-01-25T21:00:42.768169348-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-z56b","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:38.47310098-08:00","updated_at":"2026-01-25T21:11:38.47310104-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-z56b","depends_on_id":"tv-wisp-wisp-obm9","type":"parent-child","created_at":"2026-01-25T21:11:39.163741383-08:00","created_by":"witness"},{"issue_id":"tv-wisp-wisp-z56b","depends_on_id":"tv-wisp-wisp-y0ny","type":"blocks","created_at":"2026-01-25T21:11:40.044962921-08:00","created_by":"witness"}],"ephemeral":true}
{"id":"tv-wisp-wisp-z5pk","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-746p should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:44:38.42821349-08:00","updated_at":"2026-01-25T17:44:38.42821353-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-z5pk","depends_on_id":"tv-wisp-wisp-7urn","type":"parent-child","created_at":"2026-01-25T17:44:38.605588242-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-z5pk","depends_on_id":"tv-wisp-wisp-u6ol","type":"blocks","created_at":"2026-01-25T17:44:38.957421652-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-z61v","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-d6jo\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:57:57.423394894-08:00","updated_at":"2026-01-25T19:57:57.423394924-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-z61v","depends_on_id":"tv-wisp-wisp-rah4","type":"parent-child","created_at":"2026-01-25T19:57:57.502530957-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-z61v","depends_on_id":"tv-wisp-wisp-v7c9","type":"blocks","created_at":"2026-01-25T19:57:58.100292089-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-zble","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T16:34:43.848394914-08:00","updated_at":"2026-01-25T16:34:43.848394974-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-zbpq","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-02pb           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-02pb\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:13:16.03133571-08:00","updated_at":"2026-01-25T19:15:01.725203389-08:00","closed_at":"2026-01-25T19:15:01.725203389-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-zbpq","depends_on_id":"tv-wisp-wisp-qesx","type":"parent-child","created_at":"2026-01-25T19:13:16.037562395-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-zcn7","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-z7q5           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-z7q5\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:30:52.06159732-08:00","updated_at":"2026-01-25T17:33:05.878419668-08:00","closed_at":"2026-01-25T17:33:05.878419668-08:00","close_reason":"Feature already implemented - no work needed","dependencies":[{"issue_id":"tv-wisp-wisp-zcn7","depends_on_id":"tv-wisp-wisp-xx0i","type":"parent-child","created_at":"2026-01-25T17:30:52.064932931-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-zcrr","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-wisp-6e991 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:34.708243806-08:00","updated_at":"2026-01-25T20:12:54.898229576-08:00","closed_at":"2026-01-25T20:12:54.898229576-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-zcrr","depends_on_id":"tv-wisp-wisp-cj2u","type":"parent-child","created_at":"2026-01-25T20:07:35.238524712-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-zcrr","depends_on_id":"tv-wisp-wisp-6ir1","type":"blocks","created_at":"2026-01-25T20:07:36.057754905-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-zhdk","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-8z2q\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:41:54.760735839-08:00","updated_at":"2026-01-25T17:48:52.24092175-08:00","closed_at":"2026-01-25T17:48:52.24092175-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-zhdk","depends_on_id":"tv-wisp-wisp-kdbr","type":"parent-child","created_at":"2026-01-25T17:41:55.115779889-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-zhdk","depends_on_id":"tv-wisp-wisp-v0bl","type":"blocks","created_at":"2026-01-25T17:41:55.469231314-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ziu","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-nz3n\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:43:48.144360273-08:00","updated_at":"2026-01-25T14:43:48.144360313-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ziu","depends_on_id":"tv-wisp-wisp-uuf","type":"parent-child","created_at":"2026-01-25T14:43:48.150774829-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ziu","depends_on_id":"tv-wisp-wisp-bq8","type":"blocks","created_at":"2026-01-25T14:43:48.176670708-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-zkv0","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:15:52.543595742-08:00","updated_at":"2026-01-25T19:15:52.543595782-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-zntb","title":"Run test suite","description":"Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:41.222527308-08:00","updated_at":"2026-01-25T21:11:41.222527348-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-zntb","depends_on_id":"tv-wisp-wisp-jva9","type":"parent-child","created_at":"2026-01-25T21:11:41.584425371-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-zntb","depends_on_id":"tv-wisp-wisp-49ng","type":"blocks","created_at":"2026-01-25T21:11:42.598502505-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wisp-znuc","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T17:23:28.583636094-08:00","updated_at":"2026-01-25T17:23:28.583636154-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-znuc","depends_on_id":"tv-wisp-wisp-1gtx","type":"parent-child","created_at":"2026-01-25T17:23:28.732204002-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-znuc","depends_on_id":"tv-wisp-wisp-ndlh","type":"blocks","created_at":"2026-01-25T17:23:28.906233388-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-zou","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-1rmd           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-1rmd\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T14:41:43.850811511-08:00","updated_at":"2026-01-25T14:45:04.673571363-08:00","closed_at":"2026-01-25T14:45:04.673571363-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-zou","depends_on_id":"tv-wisp-wisp-mni","type":"parent-child","created_at":"2026-01-25T14:41:43.852766358-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-zqy7","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:53.467457721-08:00","updated_at":"2026-01-25T22:20:38.846031042-08:00","closed_at":"2026-01-25T22:20:38.846031042-08:00","close_reason":"Workspace clean - removed compiled test binary","dependencies":[{"issue_id":"tv-wisp-wisp-zqy7","depends_on_id":"tv-wisp-wisp-v9eo","type":"parent-child","created_at":"2026-01-25T19:11:53.805488566-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-zqy7","depends_on_id":"tv-wisp-wisp-pal6","type":"blocks","created_at":"2026-01-25T19:11:54.258610085-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-zrij","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: tv-wisp-h2uu\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:29:29.79457641-08:00","updated_at":"2026-01-25T15:29:29.79457644-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-zrij","depends_on_id":"tv-wisp-wisp-87al","type":"parent-child","created_at":"2026-01-25T15:29:29.869916381-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-zrij","depends_on_id":"tv-wisp-wisp-ba7h","type":"blocks","created_at":"2026-01-25T15:29:29.947740936-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-zs85","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-wisp-y1kfh           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-wisp-y1kfh\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T20:07:40.887430001-08:00","updated_at":"2026-01-25T20:08:48.956669225-08:00","closed_at":"2026-01-25T20:08:48.956669225-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-zs85","depends_on_id":"tv-wisp-wisp-oa0y","type":"parent-child","created_at":"2026-01-25T20:07:40.894054299-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-ztlj","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (tv-wisp-k0or).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: tv-wisp-k0or\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:23:52.353138087-08:00","updated_at":"2026-01-25T19:23:52.353138147-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-ztlj","depends_on_id":"tv-wisp-wisp-hd5u","type":"parent-child","created_at":"2026-01-25T19:23:52.487284114-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-ztlj","depends_on_id":"tv-wisp-wisp-oh02","type":"blocks","created_at":"2026-01-25T19:23:53.012841932-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-zuod","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to tv-uor5 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:31:15.598455469-08:00","updated_at":"2026-01-25T17:35:50.711705345-08:00","closed_at":"2026-01-25T17:35:50.711705345-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-wisp-zuod","depends_on_id":"tv-wisp-wisp-ce9t","type":"parent-child","created_at":"2026-01-25T17:31:15.735814864-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-zuod","depends_on_id":"tv-wisp-wisp-7ap7","type":"blocks","created_at":"2026-01-25T17:31:15.964736137-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-zuyo","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before tv-wisp-cx6z\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T20:21:13.443667951-08:00","updated_at":"2026-01-25T20:21:13.443668011-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-zuyo","depends_on_id":"tv-wisp-wisp-5nrw","type":"parent-child","created_at":"2026-01-25T20:21:13.53538096-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-zuyo","depends_on_id":"tv-wisp-wisp-h8lq","type":"blocks","created_at":"2026-01-25T20:21:14.215067092-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-zver","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:22:12.955278657-08:00","updated_at":"2026-01-25T19:22:12.955278717-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-zx7c","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (tv-433)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: tv-433\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T15:09:36.715961564-08:00","updated_at":"2026-01-25T15:09:36.715961624-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-zx7c","depends_on_id":"tv-wisp-wisp-f3bu","type":"parent-child","created_at":"2026-01-25T15:09:36.747199003-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-zx7c","depends_on_id":"tv-wisp-wisp-95pi","type":"blocks","created_at":"2026-01-25T15:09:36.811764956-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-zxw","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show tv-agd\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update tv-agd --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:31:40.706347688-08:00","updated_at":"2026-01-25T14:31:40.706347718-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-zxw","depends_on_id":"tv-wisp-wisp-8rd","type":"parent-child","created_at":"2026-01-25T14:31:40.715823497-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-zxw","depends_on_id":"tv-wisp-wisp-obc","type":"blocks","created_at":"2026-01-25T14:31:40.724265881-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-zyf6t","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show hq-cv-gzu6g\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update hq-cv-gzu6g --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:55:16.255409139-08:00","updated_at":"2026-01-25T21:55:16.255409179-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-zyf6t","depends_on_id":"tv-wisp-wisp-y04mr","type":"parent-child","created_at":"2026-01-25T21:55:17.093469111-08:00","created_by":"mayor"},{"issue_id":"tv-wisp-wisp-zyf6t","depends_on_id":"tv-wisp-wisp-2fzmm","type":"blocks","created_at":"2026-01-25T21:55:18.022091478-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"tv-wisp-wisp-zyr6q","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T21:54:17.680895357-08:00","updated_at":"2026-01-25T21:54:17.680895527-08:00","ephemeral":true}
{"id":"tv-wisp-wisp-zysb","title":"Check for more work","description":"More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T21:11:41.223806698-08:00","updated_at":"2026-01-25T21:11:41.223806738-08:00","dependencies":[{"issue_id":"tv-wisp-wisp-zysb","depends_on_id":"tv-wisp-wisp-jva9","type":"parent-child","created_at":"2026-01-25T21:11:41.900174074-08:00","created_by":"refinery"},{"issue_id":"tv-wisp-wisp-zysb","depends_on_id":"tv-wisp-wisp-25mh","type":"blocks","created_at":"2026-01-25T21:11:42.90770418-08:00","created_by":"refinery"}],"ephemeral":true}
{"id":"tv-wisp-wx7d","title":"Add Monk conversion mechanic","description":"attached_molecule: tv-wisp-wisp-zver\nattached_at: 2026-01-26T03:22:14Z\ndispatched_by: mayor\n\nImplement AoE2-style monk conversion. Monks can convert enemy units over time. Faith recharge mechanic. Relics can be collected and garrisoned in monastery for gold generation.","status":"open","priority":2,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:18:11.973877324-08:00","created_by":"mayor","updated_at":"2026-01-25T22:25:59.762991734-08:00","labels":["aoe2","military"],"dependencies":[{"issue_id":"tv-wisp-wx7d","depends_on_id":"tv-wisp-wisp-zver","type":"blocks","created_at":"2026-01-25T19:22:14.153377507-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-xlji","title":"Refactor terrain.nim: Simplify generateRiver* (~565 lines)","description":"attached_molecule: tv-wisp-wisp-71un\nattached_at: 2026-01-26T00:34:48Z\ndispatched_by: mayor\n\n## Problem\nsrc/terrain.nim has generateRiver* spanning lines 647-1211 (~565 lines).\nThis is a complex procedural generation function with deep nesting.\n\n## Evidence\n- 83 lines at 6+ nesting levels\n- 34 lines at 8+ nesting levels\n- 32 lines at 10+ nesting levels\n\n## Suggested Approach\n1. Extract river segment generation into separate procs\n2. Extract tributary logic into helper functions\n3. Consider state machine pattern for river path generation\n4. Add clear phase comments or split into named phases\n\n## Files\n- src/terrain.nim:647-1211","notes":"Implemented: Extracted generateBranchPath and placeWaterPath helpers to eliminate duplicate code. Reduced generateRiver* from ~565 to ~430 lines (24% reduction). Converted inCorner template to closure for proper function passing.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T15:33:51.587234906-08:00","created_by":"tribal_village/crew/auditor","updated_at":"2026-01-25T22:26:00.266697859-08:00","dependencies":[{"issue_id":"tv-wisp-xlji","depends_on_id":"tv-wisp-wisp-71un","type":"blocks","created_at":"2026-01-25T16:34:47.749516897-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-xoxx","title":"Add Mining Camp upgrades","description":"Implement AoE2-style mining camp upgrades. Gold mining, gold shaft mining, stone mining, stone shaft mining. Each increases gather rate.","status":"open","priority":3,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T19:19:15.621633803-08:00","created_by":"mayor","updated_at":"2026-01-25T19:19:15.621633803-08:00","labels":["aoe2","economy"]}
{"id":"tv-wisp-xxip","title":"Merge: tv-wisp-rmos","description":"branch: polecat/furiosa-mkufphsf\ntarget: main\nsource_issue: tv-wisp-rmos\nrig: tribal_village\nworker: furiosa\nagent_bead: tv-tribal_village-polecat-furiosa\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T16:44:15.045343512-08:00","created_by":"tribal_village/polecats/furiosa","updated_at":"2026-01-25T16:46:59.645535412-08:00","closed_at":"2026-01-25T16:46:59.645537205-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-y1kfh","title":"Re-implement multiple builder construction speed bonus on new spawn.nim","description":"attached_molecule: tv-wisp-wisp-oa0y\nattached_at: 2026-01-26T04:07:43Z\ndispatched_by: mayor\n\nThe previous implementation conflicted with spawn.nim refactor. Re-implement the feature where multiple builders working on a structure increases construction speed, using the new refactored spawn.nim helpers.","status":"open","priority":1,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T20:06:18.485060875-08:00","created_by":"mayor","updated_at":"2026-01-25T22:25:28.272297035-08:00","labels":["aoe2","reimpl"],"dependencies":[{"issue_id":"tv-wisp-y1kfh","depends_on_id":"tv-wisp-wisp-oa0y","type":"blocks","created_at":"2026-01-25T20:07:42.545128767-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-ynor","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show tv-ch8           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: tv-ch8\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:51.187970328-08:00","updated_at":"2026-01-25T13:16:00.512458089-08:00","closed_at":"2026-01-25T13:16:00.512458089-08:00","close_reason":"Closed","ephemeral":true}
{"id":"tv-wisp-z9d7","title":"Compare AoE2 mechanics to tribal_village and identify missing features","description":"attached_molecule: tv-wisp-wisp-hroa\nattached_at: 2026-01-25T23:07:59Z\ndispatched_by: mayor\n\nResearch Age of Empires 2 game mechanics and compare them to our current tribal_village implementation. Goal is to identify mechanics we want to bring over.\n\n## First: Check existing docs\nLook in docs/ for any existing AoE2 analysis or design documents.\n\n## Core AoE2 Mechanics to Investigate\n\n### Economy \u0026 Resources\n- Villager gathering rates by resource type\n- Drop-off mechanics (town center, lumber camp, mining camp, mill)\n- Farm mechanics (reseeding, placement)\n- Market trading and tribute\n\n### Buildings\n- Building repair (villagers can repair damaged buildings)\n- Construction mechanics (multiple villagers speed up building)\n- Building armor classes\n- Garrison mechanics\n\n### Combat\n- Unit counter system (spearmen \u003e cavalry \u003e archers \u003e infantry)\n- Armor classes and attack bonuses\n- Formation mechanics\n- Patrol and attack-move behaviors\n- Stance modes (aggressive, defensive, stand ground, no attack)\n\n### Units\n- Villager combat capability\n- Military unit training queues\n- Unit upgrades and blacksmith techs\n- Monks and conversion mechanics\n\n### AI Behaviors\n- Villager flee behavior when attacked\n- Auto-rebuild/repair\n- Idle villager detection\n\n## Output\nCreate a summary doc or list of beads for mechanics we're missing or want to improve.","status":"open","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T15:06:56.98656275-08:00","created_by":"mayor","updated_at":"2026-01-25T22:26:18.819803632-08:00","dependencies":[{"issue_id":"tv-wisp-z9d7","depends_on_id":"tv-wisp-wisp-hroa","type":"blocks","created_at":"2026-01-25T15:07:59.071613485-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-z9eu","title":"Merge: tv-wisp-38ac","description":"branch: polecat/rictus-mkulprzy\ntarget: main\nsource_issue: tv-wisp-38ac\nrig: tribal_village\nworker: rictus\nagent_bead: tv-tribal_village-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":1,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T19:24:31.021921547-08:00","created_by":"tribal_village/polecats/rictus","updated_at":"2026-01-25T20:02:14.776560902-08:00","closed_at":"2026-01-25T20:02:14.776562445-08:00","labels":["gt:merge-request"],"ephemeral":true}
{"id":"tv-wisp-zdt","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T09:42:54.450350622-08:00","updated_at":"2026-01-25T09:46:09.71082098-08:00","closed_at":"2026-01-25T09:46:09.71082098-08:00","close_reason":"Closed","dependencies":[{"issue_id":"tv-wisp-zdt","depends_on_id":"tv-wisp-5mx","type":"blocks","created_at":"2026-01-25T09:42:54.467802224-08:00","created_by":"tribal_village/witness"}],"ephemeral":true}
{"id":"tv-wisp-zngh","title":"Reduce deep nesting in step.nim action handling","description":"attached_molecule: tv-wisp-wisp-58fz\nattached_at: 2026-01-26T00:34:51Z\ndispatched_by: mayor\n\n## Problem\nstep.nim has significant deeply nested code in action handling sections.\n\n## Evidence\n- 712 lines at 6+ nesting levels\n- 217 lines at 8+ nesting levels  \n- 57 lines at 10+ nesting levels\n\n## Root Cause\nThe step* function uses nested if/elif chains for:\n- Action type dispatch\n- Target validation\n- Building type checks\n- Terrain checks\n\n## Suggested Approach\n1. Use early returns/continues to flatten nesting\n2. Extract validation logic into predicate procs\n3. Consider table-driven dispatch for action handling\n4. Replace nested if building.kind checks with case statements\n\n## Example Pattern\nBefore: if x: if y: if z: doThing()\nAfter: if not x: continue; if not y: continue; if not z: continue; doThing()\n\n## Files\n- src/step.nim (throughout)","status":"open","priority":3,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T15:34:07.440327752-08:00","created_by":"tribal_village/crew/auditor","updated_at":"2026-01-25T22:26:23.630248756-08:00","dependencies":[{"issue_id":"tv-wisp-zngh","depends_on_id":"tv-wisp-wisp-58fz","type":"blocks","created_at":"2026-01-25T16:34:50.964308972-08:00","created_by":"mayor"}]}
{"id":"tv-wisp-zs9zw","title":"Digest: mol-witness-patrol","description":"Patrol cycle: Nuked 2 done polecats (furiosa, nux). Refinery running, no MRs. Deacon still down (already escalated). Inbox clean.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T22:03:00.502608672-08:00","updated_at":"2026-01-25T22:03:00.502608672-08:00","closed_at":"2026-01-25T22:03:00.502567596-08:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"tv-wisp-zs9zw","depends_on_id":"tv-wisp-wisp-5jv0g","type":"parent-child","created_at":"2026-01-25T22:03:00.503557235-08:00","created_by":"tribal_village/witness"}]}
{"id":"tv-xt5w","title":"Garbage collect orphaned polecat branches","description":"attached_molecule: tv-wisp-rrp6\nattached_at: 2026-01-25T21:36:55Z\ndispatched_by: mayor\n\nClean up orphaned polecat branches that have been verified as already merged to main.\n\n## Context\nToast reviewed 9 orphaned commits (tv-uogr) and confirmed all work was already merged to main. These branches can now be safely deleted.\n\n## Branches to Clean Up\nRun 'gt orphans --days=2' to get the current list, then delete branches that:\n1. Have no unique commits (already merged)\n2. Are older than 24h\n3. Match pattern 'polecat/*'\n\n## Commands\n```bash\n# List orphaned branches\ngt orphans --days=2\n\n# Delete a local branch\ngit branch -D \u003cbranch-name\u003e\n\n# If branches are remote, delete with:\ngit push origin --delete \u003cbranch-name\u003e\n```\n\n## Verification\nAfter cleanup, run 'gt orphans' again to confirm no orphans remain.\n\nReport back with count of branches deleted.","notes":"Deleted 5 orphaned polecat branches (merged to main, \u003e24h old):\n- polecat/furiosa/tv-sum1@mkss8xq5\n- polecat/nux/tv-w0r.6@mksovv5x\n- polecat/dementus/mt-mbjp@mkt716jq\n- polecat/furiosa/tv-perf@mkssd80q\n- polecat/nux/tv-readme@mkssea5e\n\nRemaining merged branches are all \u003c24h old (still warm).","status":"closed","priority":2,"issue_type":"task","owner":"richard@relh.net","created_at":"2026-01-25T13:36:32.084815752-08:00","created_by":"mayor","updated_at":"2026-01-25T22:30:18.011876968-08:00","closed_at":"2026-01-25T22:30:18.011876968-08:00","close_reason":"Closed","comments":[{"id":5,"issue_id":"tv-xt5w","author":"tribal_village/polecats/furiosa","text":"Additional cleanup: Deleted 5 more merged polecat branches (\u003e24h old):\n- polecat/cheedo/tv-oga7c@mktbso4m (25h)\n- polecat/cheedo/tv-vpgt@mktcyfbk (24h)  \n- polecat/goose/tv-w0r@mktd0to7 (25h)\n- polecat/nux/mt-5bf1@mkt6zdip (27h)\n- polecat/nux/tv-ecd0@mkt7uo4f (26h)\n\nTotal branches cleaned: 10 (5 previous + 5 now)\n\nRemaining state:\n- 26 orphaned commits exist (loose commits, not branches)\n- No more merged polecat branches \u003e24h old\n- Remote branches all \u003c24h or not merged","created_at":"2026-01-26T06:30:14Z"}]}
{"id":"tv-ynta","title":"Add healer-seeking behavior for fighters","description":"When low HP and no bread available, seek Monastery for healing instead of just retreating. Currently only self-heal with bread. See role_audit_report.md 'No healer-seeking' gap. File: src/scripted/fighter.nim","status":"closed","priority":3,"issue_type":"feature","assignee":"tribal_village/dementus","owner":"richard@relh.net","created_at":"2026-01-25T10:19:23.754452617-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:36:41.402517633-08:00","closed_at":"2026-01-25T22:36:41.402517633-08:00","close_reason":"Closed"}
{"id":"tv-z20","title":"Add Gatherer flee behavior when enemies nearby","description":"attached_molecule: tv-wisp-wisp-zkv0\nattached_at: 2026-01-25T21:44:45Z\ndispatched_by: mayor\n\nAdd canStartGathererFlee that checks for nearby enemies and moves toward home altar when threat detected. Insert at priority 1 (before planting). See role_audit_report.md 'Danger Awareness Option' section.","status":"open","priority":1,"issue_type":"feature","owner":"richard@relh.net","created_at":"2026-01-25T10:18:29.051942393-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T22:25:51.733449059-08:00","dependencies":[{"issue_id":"tv-z20","depends_on_id":"tv-wisp-wisp-548","type":"blocks","created_at":"2026-01-25T13:44:45.057938377-08:00","created_by":"mayor"},{"issue_id":"tv-z20","depends_on_id":"tv-wisp-wisp-zkv0","type":"blocks","created_at":"2026-01-25T19:15:53.742604076-08:00","created_by":"mayor"}]}
{"id":"tv-z7q5","title":"Arm Castle with range 6 auto-attack","description":"attached_molecule: tv-wisp-wisp-xx0i\nattached_at: 2026-01-26T01:31:08Z\ndispatched_by: mayor\n\nAdd static ranged defense to existing Castle building. Range 6, higher HP than Guard Tower. See siege_fortifications_plan.md section 2.3. Files: src/step.nim, src/combat.nim","status":"closed","priority":2,"issue_type":"feature","assignee":"tribal_village/polecats/dementus","owner":"richard@relh.net","created_at":"2026-01-25T10:19:37.158129121-08:00","created_by":"tribal_village/polecats/nux","updated_at":"2026-01-25T17:33:24.413368768-08:00","closed_at":"2026-01-25T17:33:24.413368768-08:00","close_reason":"Feature already fully implemented - Castle has range 6 auto-attack","dependencies":[{"issue_id":"tv-z7q5","depends_on_id":"tv-wisp-wisp-xx0i","type":"blocks","created_at":"2026-01-25T17:30:52.652763468-08:00","created_by":"mayor"}]}
