#!/usr/bin/env bash
# Pre-commit hook for tribal-village
# Runs `make check` to validate Nim code before committing
set -euo pipefail

ROOT_DIR="$(git rev-parse --show-toplevel)"
cd "$ROOT_DIR"

echo "==> Running pre-commit checks..."

# Run make check (nim check with dependency sync)
if ! make check; then
    echo ""
    echo "Pre-commit check failed. Please fix the issues above before committing."
    exit 1
fi

echo "==> Pre-commit checks passed"
